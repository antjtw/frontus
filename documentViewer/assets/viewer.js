/*
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(av,az){function i(t,c,E){if(E===az&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!O.isNaN(E)?parseFloat(E):Q.test(E)?O.parseJSON(E):E}catch(B){}O.data(t,c,E)}else{E=az}}return E}function ak(){return false}function I(){return true}function aX(t,c,B){B[0].type=t;return O.event.handle.apply(c,B)}function z(aa){var X,W,V,U,T,P,S,E,Z,c,B,t=[];U=[];T=O.data(this,this.nodeType?"events":"__events__");if(typeof T==="function"){T=T.events}if(!(aa.liveFired===this||!T||!T.live||aa.button&&aa.type==="click")){if(aa.namespace){B=RegExp("(^|\\.)"+aa.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}aa.liveFired=this;var Y=T.live.slice(0);for(S=0;S<Y.length;S++){T=Y[S];T.origType.replace(ah,"")===aa.type?U.push(T.selector):Y.splice(S--,1)}U=O(aa.target).closest(U,aa.currentTarget);E=0;for(Z=U.length;E<Z;E++){c=U[E];for(S=0;S<Y.length;S++){T=Y[S];if(c.selector===T.selector&&(!B||B.test(T.namespace))){P=c.elem;V=null;if(T.preType==="mouseenter"||T.preType==="mouseleave"){aa.type=T.preType;V=O(aa.relatedTarget).closest(T.selector)[0]}if(!V||V!==P){t.push({elem:P,handleObj:T,level:c.level})}}}}E=0;for(Z=t.length;E<Z;E++){U=t[E];if(W&&U.level>W){break}aa.currentTarget=U.elem;aa.data=U.handleObj.data;aa.handleObj=U.handleObj;B=U.handleObj.origHandler.apply(U.elem,arguments);if(B===false||aa.isPropagationStopped()){W=U.level;if(B===false){X=false}if(aa.isImmediatePropagationStopped()){break}}}return X}}function ag(t,c){return(t&&t!=="*"?t+".":"")+c.replace(m,"`").replace(a1,"&")}function aK(t,c,E){if(O.isFunction(c)){return O.grep(t,function(S,P){return !!c.call(S,P,S)===E})}else{if(c.nodeType){return O.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=O.grep(t,function(P){return P.nodeType===1});if(aP.test(c)){return O.filter(c,B,!E)}else{c=O.filter(c,B)}}}}return O.grep(t,function(P){return O.inArray(P,c)>=0===E})}function aw(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var T=O.data(t[B++]),S=O.data(this,T);if(T=T&&T.events){delete S.handle;S.events={};for(var P in T){for(var E in T[P]){O.event.add(this,P,T[P][E],T[P][E].data)}}}}})}function aC(t,c){c.src?O.ajax({url:c.src,async:false,dataType:"script"}):O.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function N(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}O.each(c==="width"?ad:D,function(){E||(B-=parseFloat(O.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(O.css(t,"margin"+this))||0}else{B-=parseFloat(O.css(t,"border"+this+"Width"))||0}});return B}function s(t,c,E,B){if(O.isArray(c)&&c.length){O.each(c,function(S,P){E||p.test(t)?B(t,P):s(t+"["+(typeof P==="object"||O.isArray(P)?S:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){O.isEmptyObject(c)?B(t,""):O.each(c,function(S,P){s(t+"["+S+"]",P,E,B)})}else{B(t,c)}}}function am(t,c){var B={};O.each(y.concat.apply([],y.slice(0,c)),function(){B[this]=t});return B}function l(t){if(!g[t]){var c=O("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}g[t]=B}return g[t]}function aU(c){return O.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var G=av.document,O=function(){function bh(){if(!bg.isReady){try{G.documentElement.doScroll("left")}catch(bi){setTimeout(bh,1);return}bg.ready()}}var bg=function(bi,bj){return new bg.fn.init(bi,bj)},bf=av.jQuery,be=av.$,bd,bb=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,a8=/\S/,a9=/^\s+/,a5=/\s+$/,V=/\W/,ab=/\d/,a4=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,aa=/^[\],:{}\s]*$/,T=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,W=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,bc=/(opera)(?:.*version)?[ \/]([\w.]+)/,ba=/(msie) ([\w.]+)/,a6=/(mozilla)(?:.*? rv:([\w.]+))?/,a7=navigator.userAgent,a3=false,a2=[],Y,S=Object.prototype.toString,X=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,Z=Array.prototype.indexOf,c={};bg.fn=bg.prototype={init:function(bj,bl){var bi,bm,bk;if(!bj){return this}if(bj.nodeType){this.context=this[0]=bj;this.length=1;return this}if(bj==="body"&&!bl&&G.body){this.context=G;this[0]=G.body;this.selector="body";this.length=1;return this}if(typeof bj==="string"){if((bi=bb.exec(bj))&&(bi[1]||!bl)){if(bi[1]){bk=bl?bl.ownerDocument||bl:G;if(bm=a4.exec(bj)){if(bg.isPlainObject(bl)){bj=[G.createElement(bm[1])];bg.fn.attr.call(bj,bl,true)}else{bj=[bk.createElement(bm[1])]}}else{bm=bg.buildFragment([bi[1]],[bk]);bj=(bm.cacheable?bm.fragment.cloneNode(true):bm.fragment).childNodes}return bg.merge(this,bj)}else{if((bm=G.getElementById(bi[2]))&&bm.parentNode){if(bm.id!==bi[2]){return bd.find(bj)}this.length=1;this[0]=bm}this.context=G;this.selector=bj;return this}}else{if(!bl&&!V.test(bj)){this.selector=bj;this.context=G;bj=G.getElementsByTagName(bj);return bg.merge(this,bj)}else{return !bl||bl.jquery?(bl||bd).find(bj):bg(bl).find(bj)}}}else{if(bg.isFunction(bj)){return bd.ready(bj)}}if(bj.selector!==az){this.selector=bj.selector;this.context=bj.context}return bg.makeArray(bj,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bi){return bi==null?this.toArray():bi<0?this.slice(bi)[0]:this[bi]},pushStack:function(bj,bk,bi){var bl=bg();bg.isArray(bj)?E.apply(bl,bj):bg.merge(bl,bj);bl.prevObject=this;bl.context=this.context;if(bk==="find"){bl.selector=this.selector+(this.selector?" ":"")+bi}else{if(bk){bl.selector=this.selector+"."+bk+"("+bi+")"}}return bl},each:function(bi,bj){return bg.each(this,bi,bj)},ready:function(bi){bg.bindReady();if(bg.isReady){bi.call(G,bg)}else{a2&&a2.push(bi)}return this},eq:function(bi){return bi===-1?this.slice(bi):this.slice(bi,+bi+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bi){return this.pushStack(bg.map(this,function(bk,bj){return bi.call(bk,bj,bk)}))},end:function(){return this.prevObject||bg(null)},push:E,sort:[].sort,splice:[].splice};bg.fn.init.prototype=bg.fn;bg.extend=bg.fn.extend=function(){var bi,bq,bn,bk,bm,bo=arguments[0]||{},bl=1,bj=arguments.length,bp=false;if(typeof bo==="boolean"){bp=bo;bo=arguments[1]||{};bl=2}if(typeof bo!=="object"&&!bg.isFunction(bo)){bo={}}if(bj===bl){bo=this;--bl}for(;bl<bj;bl++){if((bi=arguments[bl])!=null){for(bq in bi){bn=bo[bq];bk=bi[bq];if(bo!==bk){if(bp&&bk&&(bg.isPlainObject(bk)||(bm=bg.isArray(bk)))){if(bm){bm=false;bn=bn&&bg.isArray(bn)?bn:[]}else{bn=bn&&bg.isPlainObject(bn)?bn:{}}bo[bq]=bg.extend(bp,bn,bk)}else{if(bk!==az){bo[bq]=bk}}}}}}return bo};bg.extend({noConflict:function(bi){av.$=be;if(bi){av.jQuery=bf}return bg},isReady:false,readyWait:1,ready:function(bj){bj===true&&bg.readyWait--;if(!bg.readyWait||bj!==true&&!bg.isReady){if(!G.body){return setTimeout(bg.ready,1)}bg.isReady=true;if(!(bj!==true&&--bg.readyWait>0)){if(a2){var bk=0,bi=a2;for(a2=null;bj=bi[bk++];){bj.call(G,bg)}bg.fn.trigger&&bg(G).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!a3){a3=true;if(G.readyState==="complete"){return setTimeout(bg.ready,1)}if(G.addEventListener){G.addEventListener("DOMContentLoaded",Y,false);av.addEventListener("load",bg.ready,false)}else{if(G.attachEvent){G.attachEvent("onreadystatechange",Y);av.attachEvent("onload",bg.ready);var bi=false;try{bi=av.frameElement==null}catch(bj){}G.documentElement.doScroll&&bi&&bh()}}}},isFunction:function(bi){return bg.type(bi)==="function"},isArray:Array.isArray||function(bi){return bg.type(bi)==="array"},isWindow:function(bi){return bi&&typeof bi==="object"&&"setInterval" in bi},isNaN:function(bi){return bi==null||!ab.test(bi)||isNaN(bi)},type:function(bi){return bi==null?String(bi):c[S.call(bi)]||"object"},isPlainObject:function(bi){if(!bi||bg.type(bi)!=="object"||bi.nodeType||bg.isWindow(bi)){return false}if(bi.constructor&&!X.call(bi,"constructor")&&!X.call(bi.constructor.prototype,"isPrototypeOf")){return false}for(var bj in bi){}return bj===az||X.call(bi,bj)},isEmptyObject:function(bi){for(var bj in bi){return false}return true},error:function(bi){throw bi},parseJSON:function(bi){if(typeof bi!=="string"||!bi){return null}bi=bg.trim(bi);if(aa.test(bi.replace(T,"@").replace(W,"]").replace(U,""))){return av.JSON&&av.JSON.parse?av.JSON.parse(bi):(new Function("return "+bi))()}else{bg.error("Invalid JSON: "+bi)}},noop:function(){},globalEval:function(bj){if(bj&&a8.test(bj)){var bk=G.getElementsByTagName("head")[0]||G.documentElement,bi=G.createElement("script");bi.type="text/javascript";if(bg.support.scriptEval){bi.appendChild(G.createTextNode(bj))}else{bi.text=bj}bk.insertBefore(bi,bk.firstChild);bk.removeChild(bi)}},nodeName:function(bi,bj){return bi.nodeName&&bi.nodeName.toUpperCase()===bj.toUpperCase()},each:function(bk,bn,bj){var bo,bl=0,bm=bk.length,bi=bm===az||bg.isFunction(bk);if(bj){if(bi){for(bo in bk){if(bn.apply(bk[bo],bj)===false){break}}}else{for(;bl<bm;){if(bn.apply(bk[bl++],bj)===false){break}}}}else{if(bi){for(bo in bk){if(bn.call(bk[bo],bo,bk[bo])===false){break}}}else{for(bj=bk[0];bl<bm&&bn.call(bj,bl,bj)!==false;bj=bk[++bl]){}}}return bk},trim:t?function(bi){return bi==null?"":t.call(bi)}:function(bi){return bi==null?"":bi.toString().replace(a9,"").replace(a5,"")},makeArray:function(bj,bk){var bi=bk||[];if(bj!=null){var bl=bg.type(bj);bj.length==null||bl==="string"||bl==="function"||bl==="regexp"||bg.isWindow(bj)?E.call(bi,bj):bg.merge(bi,bj)}return bi},inArray:function(bj,bk){if(bk.indexOf){return bk.indexOf(bj)}for(var bi=0,bl=bk.length;bi<bl;bi++){if(bk[bi]===bj){return bi}}return -1},merge:function(bj,bl){var bi=bj.length,bm=0;if(typeof bl.length==="number"){for(var bk=bl.length;bm<bk;bm++){bj[bi++]=bl[bm]}}else{for(;bl[bm]!==az;){bj[bi++]=bl[bm++]}}bj.length=bi;return bj},grep:function(bk,bn,bj){var bo=[],bl;bj=!!bj;for(var bm=0,bi=bk.length;bm<bi;bm++){bl=!!bn(bk[bm],bm);bj!==bl&&bo.push(bk[bm])}return bo},map:function(bk,bn,bj){for(var bo=[],bl,bm=0,bi=bk.length;bm<bi;bm++){bl=bn(bk[bm],bm,bj);if(bl!=null){bo[bo.length]=bl}}return bo.concat.apply([],bo)},guid:1,proxy:function(bj,bk,bi){if(arguments.length===2){if(typeof bk==="string"){bi=bj;bj=bi[bk];bk=az}else{if(bk&&!bg.isFunction(bk)){bi=bk;bk=az}}}if(!bk&&bj){bk=function(){return bj.apply(bi||this,arguments)}}if(bj){bk.guid=bj.guid=bj.guid||bk.guid||bg.guid++}return bk},access:function(bk,bn,bj,bp,bl,bm){var bi=bk.length;if(typeof bn==="object"){for(var bo in bn){bg.access(bk,bo,bn[bo],bp,bl,bj)}return bk}if(bj!==az){bp=!bm&&bp&&bg.isFunction(bj);for(bo=0;bo<bi;bo++){bl(bk[bo],bn,bp?bj.call(bk[bo],bo,bl(bk[bo],bn)):bj,bm)}return bk}return bi?bl(bk[0],bn):az},now:function(){return(new Date).getTime()},uaMatch:function(bi){bi=bi.toLowerCase();bi=P.exec(bi)||bc.exec(bi)||ba.exec(bi)||bi.indexOf("compatible")<0&&a6.exec(bi)||[];return{browser:bi[1]||"",version:bi[2]||"0"}},browser:{}});bg.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bi,bj){c["[object "+bj+"]"]=bj.toLowerCase()});a7=bg.uaMatch(a7);if(a7.browser){bg.browser[a7.browser]=true;bg.browser.version=a7.version}if(bg.browser.webkit){bg.browser.safari=true}if(Z){bg.inArray=function(bi,bj){return Z.call(bj,bi)}}if(!/\s/.test("\u00a0")){a9=/^[\s\xA0]+/;a5=/[\s\xA0]+$/}bd=bg(G);if(G.addEventListener){Y=function(){G.removeEventListener("DOMContentLoaded",Y,false);bg.ready()}}else{if(G.attachEvent){Y=function(){if(G.readyState==="complete"){G.detachEvent("onreadystatechange",Y);bg.ready()}}}}return av.jQuery=av.$=bg}();(function(){O.support={};var X=G.documentElement,V=G.createElement("script"),U=G.createElement("div"),T="script"+O.now();U.style.display="none";U.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var S=U.getElementsByTagName("*"),P=U.getElementsByTagName("a")[0],B=G.createElement("select"),E=B.appendChild(G.createElement("option"));if(!(!S||!S.length||!P)){O.support={leadingWhitespace:U.firstChild.nodeType===3,tbody:!U.getElementsByTagName("tbody").length,htmlSerialize:!!U.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:U.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;O.support.optDisabled=!E.disabled;V.type="text/javascript";try{V.appendChild(G.createTextNode("window."+T+"=1;"))}catch(t){}X.insertBefore(V,X.firstChild);if(av[T]){O.support.scriptEval=true;delete av[T]}try{delete V.test}catch(W){O.support.deleteExpando=false}X.removeChild(V);if(U.attachEvent&&U.fireEvent){U.attachEvent("onclick",function c(){O.support.noCloneEvent=false;U.detachEvent("onclick",c)});U.cloneNode(true).fireEvent("onclick")}U=G.createElement("div");U.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";X=G.createDocumentFragment();X.appendChild(U.firstChild);O.support.checkClone=X.cloneNode(true).cloneNode(true).lastChild.checked;O(function(){var Z=G.createElement("div");Z.style.width=Z.style.paddingLeft="1px";G.body.appendChild(Z);O.boxModel=O.support.boxModel=Z.offsetWidth===2;if("zoom" in Z.style){Z.style.display="inline";Z.style.zoom=1;O.support.inlineBlockNeedsLayout=Z.offsetWidth===2;Z.style.display="";Z.innerHTML="<div style='width:4px;'></div>";O.support.shrinkWrapBlocks=Z.offsetWidth!==2}Z.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var Y=Z.getElementsByTagName("td");O.support.reliableHiddenOffsets=Y[0].offsetHeight===0;Y[0].style.display="";Y[1].style.display="none";O.support.reliableHiddenOffsets=O.support.reliableHiddenOffsets&&Y[0].offsetHeight===0;Z.innerHTML="";G.body.removeChild(Z).style.display="none"});X=function(Z){var Y=G.createElement("div");Z="on"+Z;var aa=Z in Y;if(!aa){Y.setAttribute(Z,"return;");aa=typeof Y[Z]==="function"}return aa};O.support.submitBubbles=X("submit");O.support.changeBubbles=X("change");X=V=U=S=P=null}})();var a0={},Q=/^(?:\{.*\}|\[.*\])$/;O.extend({cache:{},uuid:0,expando:"jQuery"+O.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,S){if(O.acceptData(t)){t=t==av?a0:t;var P=t.nodeType,E=P?t[O.expando]:null,B=O.cache;if(!(P&&!E&&typeof c==="string"&&S===az)){if(P){E||(t[O.expando]=E=++O.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=O.extend(B[E],c)}else{O.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(S!==az){t[c]=S}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(O.acceptData(B)){B=B==av?a0:B;var T=B.nodeType,S=T?B[O.expando]:B,P=O.cache,E=T?P[S]:S;if(c){if(E){delete E[c];T&&O.isEmptyObject(E)&&O.removeData(B)}}else{if(T&&O.support.deleteExpando){delete B[O.expando]}else{if(B.removeAttribute){B.removeAttribute(O.expando)}else{if(T){delete P[S]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=O.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});O.fn.extend({data:function(B,c){var U=null;if(typeof B==="undefined"){if(this.length){var T=this[0].attributes,S;U=O.data(this[0]);for(var P=0,t=T.length;P<t;P++){S=T[P].name;if(S.indexOf("data-")===0){S=S.substr(5);i(this[0],S,U[S])}}}return U}else{if(typeof B==="object"){return this.each(function(){O.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===az){U=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(U===az&&this.length){U=O.data(this[0],B);U=i(this[0],B,U)}return U===az&&E[1]?this.data(E[0]):U}else{return this.each(function(){var W=O(this),V=[E[0],c];W.triggerHandler("setData"+E[1]+"!",V);O.data(this,B,c);W.triggerHandler("changeData"+E[1]+"!",V)})}},removeData:function(c){return this.each(function(){O.removeData(this,c)})}});O.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=O.data(t,c);if(!E){return B||[]}if(!B||O.isArray(E)){B=O.data(t,c,O.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=O.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){O.dequeue(t,c)})}}});O.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===az){return O.queue(this[0],t)}return this.each(function(){var B=O.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&O.dequeue(this,t)})},dequeue:function(c){return this.each(function(){O.dequeue(this,c)})},delay:function(t,c){t=O.fx?O.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){O.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aO=/[\n\t]/g,ar=/\s+/,d=/\r/g,aR=/^(?:href|src|style)$/,aE=/^(?:button|input)$/i,af=/^(?:button|input|object|select|textarea)$/i,F=/^a(?:rea)?$/i,aB=/^(?:radio|checkbox)$/i;O.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};O.fn.extend({attr:function(t,c){return O.access(this,t,c,true,O.attr)},removeAttr:function(c){return this.each(function(){O.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(V){if(O.isFunction(V)){return this.each(function(W){var X=O(this);X.addClass(V.call(this,W,X.attr("class")))})}if(V&&typeof V==="string"){for(var U=(V||"").split(ar),T=0,S=this.length;T<S;T++){var P=this[T];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=U.length;B<c;B++){if(E.indexOf(" "+U[B]+" ")<0){t+=" "+U[B]}}P.className=O.trim(t)}else{P.className=V}}}}return this},removeClass:function(B){if(O.isFunction(B)){return this.each(function(W){var V=O(this);V.removeClass(B.call(this,W,V.attr("class")))})}if(B&&typeof B==="string"||B===az){for(var c=(B||"").split(ar),U=0,T=this.length;U<T;U++){var S=this[U];if(S.nodeType===1&&S.className){if(B){for(var P=(" "+S.className+" ").replace(aO," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}S.className=O.trim(P)}else{S.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(O.isFunction(t)){return this.each(function(S){var P=O(this);P.toggleClass(t.call(this,S,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var U,T=0,P=O(this),S=c,V=t.split(ar);U=V[T++];){S=B?S:!P.hasClass(U);P[S?"addClass":"removeClass"](U)}}else{if(E==="undefined"||E==="boolean"){this.className&&O.data(this,"__className__",this.className);this.className=this.className||t===false?"":O.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aO," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(O.nodeName(c,"option")){var U=c.attributes.value;return !U||U.specified?c.value:c.text}if(O.nodeName(c,"select")){var T=c.selectedIndex;U=[];var S=c.options;c=c.type==="select-one";if(T<0){return null}var P=c?T:0;for(T=c?T+1:S.length;P<T;P++){var t=S[P];if(t.selected&&(O.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!O.nodeName(t.parentNode,"optgroup"))){B=O(t).val();if(c){return B}U.push(B)}}return U}if(aB.test(c.type)&&!O.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(d,"")}return az}var E=O.isFunction(B);return this.each(function(Y){var W=O(this),X=B;if(this.nodeType===1){if(E){X=B.call(this,Y,W.val())}if(X==null){X=""}else{if(typeof X==="number"){X+=""}else{if(O.isArray(X)){X=O.map(X,function(Z){return Z==null?"":Z+""})}}}if(O.isArray(X)&&aB.test(this.type)){this.checked=O.inArray(W.val(),X)>=0}else{if(O.nodeName(this,"select")){var V=O.makeArray(X);O("option",this).each(function(){this.selected=O.inArray(O(this).val(),V)>=0});if(!V.length){this.selectedIndex=-1}}else{this.value=X}}}})}});O.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,S,P){if(!t||t.nodeType===3||t.nodeType===8){return az}if(P&&c in O.attrFn){return O(t)[c](S)}P=t.nodeType!==1||!O.isXMLDoc(t);var E=S!==az;c=P&&O.props[c]||c;var B=aR.test(c);if((c in t||t[c]!==az)&&P&&!B){if(E){c==="type"&&aE.test(t.nodeName)&&t.parentNode&&O.error("type property can't be changed");if(S===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=S}}if(O.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:af.test(t.nodeName)||F.test(t.nodeName)&&t.href?0:az}return t[c]}if(!O.support.style&&P&&c==="style"){if(E){t.style.cssText=""+S}return t.style.cssText}E&&t.setAttribute(c,""+S);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return az}t=!O.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?az:t}});var ah=/\.(.*)$/,K=/^(?:textarea|input|select)$/i,m=/\./g,a1=/ /g,q=/[^\w\s.|`]/g,e=function(c){return c.replace(q,"\\$&")},ac={focusin:0,focusout:0};O.event={add:function(Z,X,W,V){if(!(Z.nodeType===3||Z.nodeType===8)){if(O.isWindow(Z)&&Z!==av&&!Z.frameElement){Z=av}if(W===false){W=ak}else{if(!W){return}}var U,T;if(W.handler){U=W;W=U.handler}if(!W.guid){W.guid=O.guid++}if(T=O.data(Z)){var P=Z.nodeType?"events":"__events__",S=T[P],E=T.handle;if(typeof S==="function"){E=S.handle;S=S.events}else{if(!S){Z.nodeType||(T[P]=T=function(){});T.events=S={}}}if(!E){T.handle=E=function(){return typeof O!=="undefined"&&!O.event.triggered?O.event.handle.apply(E.elem,arguments):az}}E.elem=Z;X=X.split(" ");for(var Y=0,c;P=X[Y++];){T=U?O.extend({},U):{handler:W,data:V};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();T.namespace=c.slice(0).sort().join(".")}else{c=[];T.namespace=""}T.type=P;if(!T.guid){T.guid=W.guid}var B=S[P],t=O.event.special[P]||{};if(!B){B=S[P]=[];if(!t.setup||t.setup.call(Z,V,c,E)===false){if(Z.addEventListener){Z.addEventListener(P,E,false)}else{Z.attachEvent&&Z.attachEvent("on"+P,E)}}}if(t.add){t.add.call(Z,T);if(!T.handler.guid){T.handler.guid=W.guid}}B.push(T);O.event.global[P]=true}Z=null}}},global:{},remove:function(aa,X,W,V){if(!(aa.nodeType===3||aa.nodeType===8)){if(W===false){W=ak}var U,T,P=0,S,E,Z,c,B,t,Y=aa.nodeType?"events":"__events__",a2=O.data(aa),ab=a2&&a2[Y];if(a2&&ab){if(typeof ab==="function"){a2=ab;ab=ab.events}if(X&&X.type){W=X.handler;X=X.type}if(!X||typeof X==="string"&&X.charAt(0)==="."){X=X||"";for(U in ab){O.event.remove(aa,U+X)}}else{for(X=X.split(" ");U=X[P++];){c=U;S=U.indexOf(".")<0;E=[];if(!S){E=U.split(".");U=E.shift();Z=RegExp("(^|\\.)"+O.map(E.slice(0).sort(),e).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=ab[U]){if(W){c=O.event.special[U]||{};for(T=V||0;T<B.length;T++){t=B[T];if(W.guid===t.guid){if(S||Z.test(t.namespace)){V==null&&B.splice(T--,1);c.remove&&c.remove.call(aa,t)}if(V!=null){break}}}if(B.length===0||V!=null&&B.length===1){if(!c.teardown||c.teardown.call(aa,E)===false){O.removeEvent(aa,U,a2.handle)}delete ab[U]}}else{for(T=0;T<B.length;T++){t=B[T];if(S||Z.test(t.namespace)){O.event.remove(aa,c,t.handler,T);B.splice(T--,1)}}}}}if(O.isEmptyObject(ab)){if(X=a2.handle){X.elem=null}delete a2.events;delete a2.handle;if(typeof a2==="function"){O.removeData(aa,Y)}else{O.isEmptyObject(a2)&&O.removeData(aa)}}}}}},trigger:function(X,V,U,T){var S=X.type||X;if(!T){X=typeof X==="object"?X[O.expando]?X:O.extend(O.Event(S),X):O.Event(S);if(S.indexOf("!")>=0){X.type=S=S.slice(0,-1);X.exclusive=true}if(!U){X.stopPropagation();O.event.global[S]&&O.each(O.cache,function(){this.events&&this.events[S]&&O.event.trigger(X,V,this.handle.elem)})}if(!U||U.nodeType===3||U.nodeType===8){return az}X.result=az;X.target=U;V=O.makeArray(V);V.unshift(X)}X.currentTarget=U;(T=U.nodeType?O.data(U,"handle"):(O.data(U,"__events__")||{}).handle)&&T.apply(U,V);T=U.parentNode||U.ownerDocument;try{if(!(U&&U.nodeName&&O.noData[U.nodeName.toLowerCase()])){if(U["on"+S]&&U["on"+S].apply(U,V)===false){X.result=false;X.preventDefault()}}}catch(P){}if(!X.isPropagationStopped()&&T){O.event.trigger(X,V,T,true)}else{if(!X.isDefaultPrevented()){var B;T=X.target;var E=S.replace(ah,""),t=O.nodeName(T,"a")&&E==="click",W=O.event.special[E]||{};if((!W._default||W._default.call(U,X)===false)&&!t&&!(T&&T.nodeName&&O.noData[T.nodeName.toLowerCase()])){try{if(T[E]){if(B=T["on"+E]){T["on"+E]=null}O.event.triggered=true;T[E]()}}catch(c){}if(B){T["on"+E]=B}O.event.triggered=false}}}},handle:function(B){var c,U,T,S;U=[];var P=O.makeArray(arguments);B=P[0]=O.event.fix(B||av.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){T=B.type.split(".");B.type=T.shift();U=T.slice(0).sort();T=RegExp("(^|\\.)"+U.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||U.join(".");S=O.data(this,this.nodeType?"events":"__events__");if(typeof S==="function"){S=S.events}U=(S||{})[B.type];if(S&&U){U=U.slice(0);S=0;for(var t=U.length;S<t;S++){var E=U[S];if(c||T.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==az){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[O.expando]){return t}var c=t;t=O.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||G}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=G.documentElement;E=G.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==az){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:O.proxy,special:{ready:{setup:O.bindReady,teardown:O.noop},live:{add:function(c){O.event.add(this,ag(c.origType,c.selector),O.extend({},c,{handler:z,guid:c.handler.guid}))},remove:function(c){O.event.remove(this,ag(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(O.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};O.removeEvent=G.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};O.Event=function(c){if(!this.preventDefault){return new O.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=O.now();this[O.expando]=true};O.Event.prototype={preventDefault:function(){this.isDefaultPrevented=I;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=I;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=I;this.stopPropagation()},isDefaultPrevented:ak,isPropagationStopped:ak,isImmediatePropagationStopped:ak};var C=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;O.event.handle.apply(this,arguments)}}catch(B){}},o=function(c){c.type=c.data;O.event.handle.apply(this,arguments)};O.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){O.event.special[t]={setup:function(B){O.event.add(this,c,B&&B.selector?o:C,t)},teardown:function(B){O.event.remove(this,c,B&&B.selector?o:C)}}});if(!O.support.submitBubbles){O.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){O.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&O(c).closest("form").length){t.liveFired=az;return aX("submit",this,arguments)}});O.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&O(c).closest("form").length&&t.keyCode===13){t.liveFired=az;return aX("submit",this,arguments)}})}else{return false}},teardown:function(){O.event.remove(this,".specialSubmit")}}}if(!O.support.changeBubbles){var aj,b=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?O.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},ae=function(t,c){var P=t.target,E,B;if(!(!K.test(P.nodeName)||P.readOnly)){E=O.data(P,"_change_data");B=b(P);if(t.type!=="focusout"||P.type!=="radio"){O.data(P,"_change_data",B)}if(!(E===az||B===E)){if(E!=null||B){t.type="change";t.liveFired=az;return O.event.trigger(t,c,P)}}}};O.event.special.change={filters:{focusout:ae,beforedeactivate:ae,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return ae.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return ae.call(this,t)}},beforeactivate:function(c){c=c.target;O.data(c,"_change_data",b(c))}},setup:function(){if(this.type==="file"){return false}for(var c in aj){O.event.add(this,c+".specialChange",aj[c])}return K.test(this.nodeName)},teardown:function(){O.event.remove(this,".specialChange");return K.test(this.nodeName)}};aj=O.event.special.change.filters;aj.focus=aj.beforeactivate}G.addEventListener&&O.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=O.event.fix(E);E.type=c;return O.event.trigger(E,null,E.target)}O.event.special[c]={setup:function(){ac[c]++===0&&G.addEventListener(t,B,true)},teardown:function(){--ac[c]===0&&G.removeEventListener(t,B,true)}}});O.each(["bind","one"],function(t,c){O.fn[c]=function(U,T,S){if(typeof U==="object"){for(var P in U){this[c](P,T,U[P],S)}return this}if(O.isFunction(T)||T===false){S=T;T=az}var B=c==="one"?O.proxy(S,function(V){O(this).unbind(V,B);return S.apply(this,arguments)}):S;if(U==="unload"&&c!=="one"){this.one(U,T,S)}else{P=0;for(var E=this.length;P<E;P++){O.event.add(this[P],U,B,T)}}return this}});O.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){O.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){O.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=O.Event(t);B.preventDefault();B.stopPropagation();O.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){O.proxy(t,c[B++])}return this.click(O.proxy(t,function(P){var E=(O.data(this,"lastToggle"+t.guid)||0)%B;O.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aQ={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};O.each(["live","die"],function(t,c){O.fn[c]=function(X,W,V,U){var S,T=0,P,Y,B=U||this.selector;U=U?this:O(this.context);if(typeof X==="object"&&!X.preventDefault){for(S in X){U[c](S,W,X[S],B)}return this}if(O.isFunction(W)){V=W;W=az}for(X=(X||"").split(" ");(S=X[T++])!=null;){P=ah.exec(S);Y="";if(P){Y=P[0];S=S.replace(ah,"")}if(S==="hover"){X.push("mouseenter"+Y,"mouseleave"+Y)}else{P=S;if(S==="focus"||S==="blur"){X.push(aQ[S]+Y);S+=Y}else{S=(aQ[S]||S)+Y}if(c==="live"){Y=0;for(var E=U.length;Y<E;Y++){O.event.add(U[Y],"live."+ag(S,B),{data:W,selector:B,handler:V,origType:S,origHandler:V,preType:P})}}else{U.unbind("live."+ag(S,B),V)}}}return this}});O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){O.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(O.attrFn){O.attrFn[c]=true}});av.attachEvent&&!av.addEventListener&&O(av).bind("unload",function(){for(var t in O.cache){if(O.cache[t].handle){try{O.event.remove(O.cache[t].handle.elem)}catch(c){}}}});(function(){function ab(a9,a8,a6,a7,a5,a4){a5=0;for(var bb=a7.length;a5<bb;a5++){var ba=a7[a5];if(ba){var bc=false;for(ba=ba[a9];ba;){if(ba.sizcache===a6){bc=a7[ba.sizset];break}if(ba.nodeType===1&&!a4){ba.sizcache=a6;ba.sizset=a5}if(ba.nodeName.toLowerCase()===a8){bc=ba;break}ba=ba[a9]}a7[a5]=bc}}}function Y(a9,a8,a6,a7,a5,a4){a5=0;for(var bb=a7.length;a5<bb;a5++){var ba=a7[a5];if(ba){var bc=false;for(ba=ba[a9];ba;){if(ba.sizcache===a6){bc=a7[ba.sizset];break}if(ba.nodeType===1){if(!a4){ba.sizcache=a6;ba.sizset=a5}if(typeof a8!=="string"){if(ba===a8){bc=true;break}}else{if(S.filter(a8,[ba]).length>0){bc=ba;break}}}ba=ba[a9]}a7[a5]=bc}}}var W=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,V=0,U=Object.prototype.toString,T=false,P=true;[0,0].sort(function(){P=false;return 0});var S=function(bb,ba,a7,a8){a7=a7||[];var a6=ba=ba||G;if(ba.nodeType!==1&&ba.nodeType!==9){return[]}if(!bb||typeof bb!=="string"){return a7}var a5,bg,bf,bh,be,bd=true,bc=S.isXML(ba),a4=[],a9=bb;do{W.exec("");if(a5=W.exec(a9)){a9=a5[3];a4.push(a5[1]);if(a5[2]){bh=a5[3];break}}}while(a5);if(a4.length>1&&aa.exec(bb)){if(a4.length===2&&E.relative[a4[0]]){bg=X(a4[0]+a4[1],ba)}else{for(bg=E.relative[a4[0]]?[ba]:S(a4.shift(),ba);a4.length;){bb=a4.shift();if(E.relative[bb]){bb+=a4.shift()}bg=X(bb,bg)}}}else{if(!a8&&a4.length>1&&ba.nodeType===9&&!bc&&E.match.ID.test(a4[0])&&!E.match.ID.test(a4[a4.length-1])){a5=S.find(a4.shift(),ba,bc);ba=a5.expr?S.filter(a5.expr,a5.set)[0]:a5.set[0]}if(ba){a5=a8?{expr:a4.pop(),set:t(a8)}:S.find(a4.pop(),a4.length===1&&(a4[0]==="~"||a4[0]==="+")&&ba.parentNode?ba.parentNode:ba,bc);bg=a5.expr?S.filter(a5.expr,a5.set):a5.set;if(a4.length>0){bf=t(bg)}else{bd=false}for(;a4.length;){a5=be=a4.pop();if(E.relative[be]){a5=a4.pop()}else{be=""}if(a5==null){a5=ba}E.relative[be](bf,a5,bc)}}else{bf=[]}}bf||(bf=bg);bf||S.error(be||bb);if(U.call(bf)==="[object Array]"){if(bd){if(ba&&ba.nodeType===1){for(bb=0;bf[bb]!=null;bb++){if(bf[bb]&&(bf[bb]===true||bf[bb].nodeType===1&&S.contains(ba,bf[bb]))){a7.push(bg[bb])}}}else{for(bb=0;bf[bb]!=null;bb++){bf[bb]&&bf[bb].nodeType===1&&a7.push(bg[bb])}}}else{a7.push.apply(a7,bf)}}else{t(bf,a7)}if(bh){S(bh,a6,a7,a8);S.uniqueSort(a7)}return a7};S.uniqueSort=function(a5){if(a3){T=P;a5.sort(a3);if(T){for(var a4=1;a4<a5.length;a4++){a5[a4]===a5[a4-1]&&a5.splice(a4--,1)}}}return a5};S.matches=function(a5,a4){return S(a5,null,null,a4)};S.matchesSelector=function(a5,a4){return S(a4,null,null,[a5]).length>0};S.find=function(a9,a8,a6){var a7;if(!a9){return[]}for(var a5=0,a4=E.order.length;a5<a4;a5++){var bb,ba=E.order[a5];if(bb=E.leftMatch[ba].exec(a9)){var bc=bb[1];bb.splice(1,1);if(bc.substr(bc.length-1)!=="\\"){bb[1]=(bb[1]||"").replace(/\\/g,"");a7=E.find[ba](bb,a8,a6);if(a7!=null){a9=a9.replace(E.match[ba],"");break}}}}a7||(a7=a8.getElementsByTagName("*"));return{set:a7,expr:a9}};S.filter=function(bc,bb,a7,a8){for(var a6,a5,bh=bc,bg=[],bi=bb,bf=bb&&bb[0]&&S.isXML(bb[0]);bc&&bb.length;){for(var be in E.filter){if((a6=E.leftMatch[be].exec(bc))!=null&&a6[2]){var bd,a4,ba=E.filter[be];a4=a6[1];a5=false;a6.splice(1,1);if(a4.substr(a4.length-1)!=="\\"){if(bi===bg){bg=[]}if(E.preFilter[be]){if(a6=E.preFilter[be](a6,bi,a7,bg,a8,bf)){if(a6===true){continue}}else{a5=bd=true}}if(a6){for(var a9=0;(a4=bi[a9])!=null;a9++){if(a4){bd=ba(a4,a6,a9,bi);var bj=a8^!!bd;if(a7&&bd!=null){if(bj){a5=true}else{bi[a9]=false}}else{if(bj){bg.push(a4);a5=true}}}}}if(bd!==az){a7||(bi=bg);bc=bc.replace(E.match[be],"");if(!a5){return[]}break}}}}if(bc===bh){if(a5==null){S.error(bc)}else{break}}bh=bc}return bi};S.error=function(a4){throw"Syntax error, unrecognized expression: "+a4};var E=S.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a4){return a4.getAttribute("href")}},relative:{"+":function(a6,a5){var a9=typeof a5==="string",a4=a9&&!/\W/.test(a5);a9=a9&&!a4;if(a4){a5=a5.toLowerCase()}a4=0;for(var a8=a6.length,a7;a4<a8;a4++){if(a7=a6[a4]){for(;(a7=a7.previousSibling)&&a7.nodeType!==1;){}a6[a4]=a9||a7&&a7.nodeName.toLowerCase()===a5?a7||false:a7===a5}}a9&&S.filter(a5,a6,true)},">":function(a6,a5){var a9,a4=typeof a5==="string",a8=0,a7=a6.length;if(a4&&!/\W/.test(a5)){for(a5=a5.toLowerCase();a8<a7;a8++){if(a9=a6[a8]){a9=a9.parentNode;a6[a8]=a9.nodeName.toLowerCase()===a5?a9:false}}}else{for(;a8<a7;a8++){if(a9=a6[a8]){a6[a8]=a4?a9.parentNode:a9.parentNode===a5}}a4&&S.filter(a5,a6,true)}},"":function(a6,a5,a9){var a4,a8=V++,a7=Y;if(typeof a5==="string"&&!/\W/.test(a5)){a4=a5=a5.toLowerCase();a7=ab}a7("parentNode",a5,a8,a6,a4,a9)},"~":function(a6,a5,a9){var a4,a8=V++,a7=Y;if(typeof a5==="string"&&!/\W/.test(a5)){a4=a5=a5.toLowerCase();a7=ab}a7("previousSibling",a5,a8,a6,a4,a9)}},find:{ID:function(a5,a4,a6){if(typeof a4.getElementById!=="undefined"&&!a6){return(a5=a4.getElementById(a5[1]))&&a5.parentNode?[a5]:[]}},NAME:function(a6,a5){if(typeof a5.getElementsByName!=="undefined"){for(var a9=[],a4=a5.getElementsByName(a6[1]),a8=0,a7=a4.length;a8<a7;a8++){a4[a8].getAttribute("name")===a6[1]&&a9.push(a4[a8])}return a9.length===0?null:a9}},TAG:function(a5,a4){return a4.getElementsByTagName(a5[1])}},preFilter:{CLASS:function(a7,a6,ba,a4,a9,a8){a7=" "+a7[1].replace(/\\/g,"")+" ";if(a8){return a7}a8=0;for(var a5;(a5=a6[a8])!=null;a8++){if(a5){if(a9^(a5.className&&(" "+a5.className+" ").replace(/[\t\n]/g," ").indexOf(a7)>=0)){ba||a4.push(a5)}else{if(ba){a6[a8]=false}}}}return false},ID:function(a4){return a4[1].replace(/\\/g,"")},TAG:function(a4){return a4[1].toLowerCase()},CHILD:function(a5){if(a5[1]==="nth"){var a4=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a5[2]==="even"&&"2n"||a5[2]==="odd"&&"2n+1"||!/\D/.test(a5[2])&&"0n+"+a5[2]||a5[2]);a5[2]=a4[1]+(a4[2]||1)-0;a5[3]=a4[3]-0}a5[0]=V++;return a5},ATTR:function(a6,a5,a9,a4,a8,a7){a5=a6[1].replace(/\\/g,"");if(!a7&&E.attrMap[a5]){a6[1]=E.attrMap[a5]}if(a6[2]==="~="){a6[4]=" "+a6[4]+" "}return a6},PSEUDO:function(a6,a5,a8,a4,a7){if(a6[1]==="not"){if((W.exec(a6[3])||"").length>1||/^\w/.test(a6[3])){a6[3]=S(a6[3],null,null,a5)}else{a6=S.filter(a6[3],a5,a8,true^a7);a8||a4.push.apply(a4,a6);return false}}else{if(E.match.POS.test(a6[0])||E.match.CHILD.test(a6[0])){return true}}return a6},POS:function(a4){a4.unshift(true);return a4}},filters:{enabled:function(a4){return a4.disabled===false&&a4.type!=="hidden"},disabled:function(a4){return a4.disabled===true},checked:function(a4){return a4.checked===true},selected:function(a4){return a4.selected===true},parent:function(a4){return !!a4.firstChild},empty:function(a4){return !a4.firstChild},has:function(a5,a4,a6){return !!S(a6[3],a5).length},header:function(a4){return/h\d/i.test(a4.nodeName)},text:function(a4){return"text"===a4.type},radio:function(a4){return"radio"===a4.type},checkbox:function(a4){return"checkbox"===a4.type},file:function(a4){return"file"===a4.type},password:function(a4){return"password"===a4.type},submit:function(a4){return"submit"===a4.type},image:function(a4){return"image"===a4.type},reset:function(a4){return"reset"===a4.type},button:function(a4){return"button"===a4.type||a4.nodeName.toLowerCase()==="button"},input:function(a4){return/input|select|textarea|button/i.test(a4.nodeName)}},setFilters:{first:function(a5,a4){return a4===0},last:function(a6,a5,a7,a4){return a5===a4.length-1},even:function(a5,a4){return a4%2===0},odd:function(a5,a4){return a4%2===1},lt:function(a5,a4,a6){return a4<a6[3]-0},gt:function(a5,a4,a6){return a4>a6[3]-0},nth:function(a5,a4,a6){return a6[3]-0===a4},eq:function(a5,a4,a6){return a6[3]-0===a4}},filter:{PSEUDO:function(a6,a5,a9,a4){var a8=a5[1],a7=E.filters[a8];if(a7){return a7(a6,a9,a5,a4)}else{if(a8==="contains"){return(a6.textContent||a6.innerText||S.getText([a6])||"").indexOf(a5[3])>=0}else{if(a8==="not"){a5=a5[3];a9=0;for(a4=a5.length;a9<a4;a9++){if(a5[a9]===a6){return false}}return true}else{S.error("Syntax error, unrecognized expression: "+a8)}}}},CHILD:function(a7,a6){var bb=a6[1],a4=a7;switch(bb){case"only":case"first":for(;a4=a4.previousSibling;){if(a4.nodeType===1){return false}}if(bb==="first"){return true}a4=a7;case"last":for(;a4=a4.nextSibling;){if(a4.nodeType===1){return false}}return true;case"nth":bb=a6[2];var a9=a6[3];if(bb===1&&a9===0){return true}var a8=a6[0],a5=a7.parentNode;if(a5&&(a5.sizcache!==a8||!a7.nodeIndex)){var ba=0;for(a4=a5.firstChild;a4;a4=a4.nextSibling){if(a4.nodeType===1){a4.nodeIndex=++ba}}a5.sizcache=a8}a4=a7.nodeIndex-a9;return bb===0?a4===0:a4%bb===0&&a4/bb>=0}},ID:function(a5,a4){return a5.nodeType===1&&a5.getAttribute("id")===a4},TAG:function(a5,a4){return a4==="*"&&a5.nodeType===1||a5.nodeName.toLowerCase()===a4},CLASS:function(a5,a4){return(" "+(a5.className||a5.getAttribute("class"))+" ").indexOf(a4)>-1},ATTR:function(a6,a5){var a9=a5[1];a9=E.attrHandle[a9]?E.attrHandle[a9](a6):a6[a9]!=null?a6[a9]:a6.getAttribute(a9);var a4=a9+"",a8=a5[2],a7=a5[4];return a9==null?a8==="!=":a8==="="?a4===a7:a8==="*="?a4.indexOf(a7)>=0:a8==="~="?(" "+a4+" ").indexOf(a7)>=0:!a7?a4&&a9!==false:a8==="!="?a4!==a7:a8==="^="?a4.indexOf(a7)===0:a8==="$="?a4.substr(a4.length-a7.length)===a7:a8==="|="?a4===a7||a4.substr(0,a7.length+1)===a7+"-":false},POS:function(a6,a5,a8,a4){var a7=E.setFilters[a5[2]];if(a7){return a7(a6,a8,a5,a4)}}}},aa=E.match.POS,c=function(a5,a4){return"\\"+(a4-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(a5,a4){a5=Array.prototype.slice.call(a5,0);if(a4){a4.push.apply(a4,a5);return a4}return a5};try{Array.prototype.slice.call(G.documentElement.childNodes,0)}catch(Z){t=function(a6,a5){var a8=0,a4=a5||[];if(U.call(a6)==="[object Array]"){Array.prototype.push.apply(a4,a6)}else{if(typeof a6.length==="number"){for(var a7=a6.length;a8<a7;a8++){a4.push(a6[a8])}}else{for(;a6[a8];a8++){a4.push(a6[a8])}}}return a4}}var a3,a2;if(G.documentElement.compareDocumentPosition){a3=function(a5,a4){if(a5===a4){T=true;return 0}if(!a5.compareDocumentPosition||!a4.compareDocumentPosition){return a5.compareDocumentPosition?-1:1}return a5.compareDocumentPosition(a4)&4?-1:1}}else{a3=function(a7,a6){var ba,a4,a9=[],a8=[];ba=a7.parentNode;a4=a6.parentNode;var a5=ba;if(a7===a6){T=true;return 0}else{if(ba===a4){return a2(a7,a6)}else{if(ba){if(!a4){return 1}}else{return -1}}}for(;a5;){a9.unshift(a5);a5=a5.parentNode}for(a5=a4;a5;){a8.unshift(a5);a5=a5.parentNode}ba=a9.length;a4=a8.length;for(a5=0;a5<ba&&a5<a4;a5++){if(a9[a5]!==a8[a5]){return a2(a9[a5],a8[a5])}}return a5===ba?a2(a7,a8[a5],-1):a2(a9[a5],a6,1)};a2=function(a5,a4,a6){if(a5===a4){return a6}for(a5=a5.nextSibling;a5;){if(a5===a4){return -1}a5=a5.nextSibling}return 1}}S.getText=function(a6){for(var a5="",a7,a4=0;a6[a4];a4++){a7=a6[a4];if(a7.nodeType===3||a7.nodeType===4){a5+=a7.nodeValue}else{if(a7.nodeType!==8){a5+=S.getText(a7.childNodes)}}}return a5};(function(){var a5=G.createElement("div"),a4="script"+(new Date).getTime(),a6=G.documentElement;a5.innerHTML="<a name='"+a4+"'/>";a6.insertBefore(a5,a6.firstChild);if(G.getElementById(a4)){E.find.ID=function(a7,a9,a8){if(typeof a9.getElementById!=="undefined"&&!a8){return(a9=a9.getElementById(a7[1]))?a9.id===a7[1]||typeof a9.getAttributeNode!=="undefined"&&a9.getAttributeNode("id").nodeValue===a7[1]?[a9]:az:[]}};E.filter.ID=function(a7,a9){var a8=typeof a7.getAttributeNode!=="undefined"&&a7.getAttributeNode("id");return a7.nodeType===1&&a8&&a8.nodeValue===a9}}a6.removeChild(a5);a6=a5=null})();(function(){var a4=G.createElement("div");a4.appendChild(G.createComment(""));if(a4.getElementsByTagName("*").length>0){E.find.TAG=function(a6,a9){var a5=a9.getElementsByTagName(a6[1]);if(a6[1]==="*"){for(var a8=[],a7=0;a5[a7];a7++){a5[a7].nodeType===1&&a8.push(a5[a7])}a5=a8}return a5}}a4.innerHTML="<a href='#'></a>";if(a4.firstChild&&typeof a4.firstChild.getAttribute!=="undefined"&&a4.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(a5){return a5.getAttribute("href",2)}}a4=null})();G.querySelectorAll&&function(){var a5=S,a4=G.createElement("div");a4.innerHTML="<p class='TEST'></p>";if(!(a4.querySelectorAll&&a4.querySelectorAll(".TEST").length===0)){S=function(a7,bb,ba,a8){bb=bb||G;a7=a7.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!a8&&!S.isXML(bb)){if(bb.nodeType===9){try{return t(bb.querySelectorAll(a7),ba)}catch(be){}}else{if(bb.nodeType===1&&bb.nodeName.toLowerCase()!=="object"){var a9=bb.getAttribute("id"),bd=a9||"__sizzle__";a9||bb.setAttribute("id",bd);try{return t(bb.querySelectorAll("#"+bd+" "+a7),ba)}catch(bc){}finally{a9||bb.removeAttribute("id")}}}}return a5(a7,bb,ba,a8)};for(var a6 in a5){S[a6]=a5[a6]}a4=null}}();(function(){var a6=G.documentElement,a5=a6.matchesSelector||a6.mozMatchesSelector||a6.webkitMatchesSelector||a6.msMatchesSelector,a7=false;try{a5.call(G.documentElement,"[test!='']:sizzle")}catch(a4){a7=true}if(a5){S.matchesSelector=function(ba,a9){a9=a9.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!S.isXML(ba)){try{if(a7||!E.match.PSEUDO.test(a9)&&!/!=/.test(a9)){return a5.call(ba,a9)}}catch(a8){}}return S(a9,null,null,[ba]).length>0}}})();(function(){var a4=G.createElement("div");a4.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!a4.getElementsByClassName||a4.getElementsByClassName("e").length===0)){a4.lastChild.className="e";if(a4.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(a6,a7,a5){if(typeof a7.getElementsByClassName!=="undefined"&&!a5){return a7.getElementsByClassName(a6[1])}};a4=null}}})();S.contains=G.documentElement.contains?function(a5,a4){return a5!==a4&&(a5.contains?a5.contains(a4):true)}:G.documentElement.compareDocumentPosition?function(a5,a4){return !!(a5.compareDocumentPosition(a4)&16)}:function(){return false};S.isXML=function(a4){return(a4=(a4?a4.ownerDocument||a4:0).documentElement)?a4.nodeName!=="HTML":false};var X=function(a7,a6){for(var ba,a4=[],a9="",a8=a6.nodeType?[a6]:a6;ba=E.match.PSEUDO.exec(a7);){a9+=ba[0];a7=a7.replace(E.match.PSEUDO,"")}a7=E.relative[a7]?a7+"*":a7;ba=0;for(var a5=a8.length;ba<a5;ba++){S(a7,a8[ba],a4)}return S.filter(a9,a4)};O.find=S;O.expr=S.selectors;O.expr[":"]=O.expr.filters;O.unique=S.uniqueSort;O.text=S.getText;O.isXMLDoc=S.isXML;O.contains=S.contains})();var aS=/Until$/,ay=/^(?:parents|prevUntil|prevAll)/,aF=/,/,aP=/^.[^:#\[\.,]*$/,an=Array.prototype.slice,H=O.expr.match.POS;O.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),T=0,S=0,P=this.length;S<P;S++){T=c.length;O.find(B,this[S],c);if(S>0){for(var E=T;E<c.length;E++){for(var t=0;t<T;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=O(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(O.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aK(this,c,false),"not",c)},filter:function(c){return this.pushStack(aK(this,c,true),"filter",c)},is:function(c){return !!c&&O.filter(c,this).length>0},closest:function(V,U){var T=[],S,P,E=this[0];if(O.isArray(V)){var t,B={},c=1;if(E&&V.length){S=0;for(P=V.length;S<P;S++){t=V[S];B[t]||(B[t]=O.expr.match.POS.test(t)?O(t,U||this.context):t)}for(;E&&E.ownerDocument&&E!==U;){for(t in B){S=B[t];if(S.jquery?S.index(E)>-1:O(E).is(S)){T.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return T}t=H.test(V)?O(V,U||this.context):null;S=0;for(P=this.length;S<P;S++){for(E=this[S];E;){if(t?t.index(E)>-1:O.find.matchesSelector(E,V)){T.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===U){break}}}}T=T.length>1?O.unique(T):T;return this.pushStack(T,"closest",V)},index:function(c){if(!c||typeof c==="string"){return O.inArray(this[0],c?O(c):this.parent().children())}return O.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?O(t,c||this.context):O.makeArray(t),B=O.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:O.unique(B))},andSelf:function(){return this.add(this.prevObject)}});O.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return O.dir(c,"parentNode")},parentsUntil:function(t,c,B){return O.dir(t,"parentNode",B)},next:function(c){return O.nth(c,2,"nextSibling")},prev:function(c){return O.nth(c,2,"previousSibling")},nextAll:function(c){return O.dir(c,"nextSibling")},prevAll:function(c){return O.dir(c,"previousSibling")},nextUntil:function(t,c,B){return O.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return O.dir(t,"previousSibling",B)},siblings:function(c){return O.sibling(c.parentNode.firstChild,c)},children:function(c){return O.sibling(c.firstChild)},contents:function(c){return O.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:O.makeArray(c.childNodes)}},function(t,c){O.fn[t]=function(P,E){var B=O.map(this,c,P);aS.test(t)||(E=P);if(E&&typeof E==="string"){B=O.filter(E,B)}B=this.length>1?O.unique(B):B;if((this.length>1||aF.test(E))&&ay.test(t)){B=B.reverse()}return this.pushStack(B,t,an.call(arguments).join(","))}});O.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?O.find.matchesSelector(c[0],t)?[c[0]]:[]:O.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===az||t.nodeType!==1||!O(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aD=/ jQuery\d+="(?:\d+|null)"/g,aM=/^\s+/,aV=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aI=/<([\w:]+)/,r=/<tbody/i,f=/<|&#?\w+;/,at=/<(?:script|object|embed|option|style)/i,L=/checked\s*(?:[^=]|=\s*.checked.)/i,aT=/\=([^="'>\s]+\/)>/g,ao={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ao.optgroup=ao.option;ao.tbody=ao.tfoot=ao.colgroup=ao.caption=ao.thead;ao.th=ao.td;if(!O.support.htmlSerialize){ao._default=[1,"div<div>","</div>"]}O.fn.extend({text:function(c){if(O.isFunction(c)){return this.each(function(t){var B=O(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==az){return this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(c))}return O.text(this)},wrapAll:function(t){if(O.isFunction(t)){return this.each(function(B){O(this).wrapAll(t.call(this,B))})}if(this[0]){var c=O(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(O.isFunction(c)){return this.each(function(t){O(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=O(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){O(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=O(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,O(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||O.filter(t,[B]).length){if(!c&&B.nodeType===1){O.cleanData(B.getElementsByTagName("*"));O.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&O.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!O.support.noCloneEvent&&!O.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return O.clean([E.replace(aD,"").replace(aT,'="$1">').replace(aM,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){aw(this,c);aw(this.find("*"),c.find("*"))}return c},html:function(t){if(t===az){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aD,""):null}else{if(typeof t==="string"&&!at.test(t)&&(O.support.leadingWhitespace||!aM.test(t))&&!ao[(aI.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(aV,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){O.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{O.isFunction(t)?this.each(function(S){var P=O(this);P.html(t.call(this,S,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(O.isFunction(c)){return this.each(function(t){var E=O(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=O(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;O(this).remove();t?O(t).before(c):O(B).append(c)})}else{return this.pushStack(O(O.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(V,U,T){var S,P,E,t=V[0],B=[];if(!O.support.checkClone&&arguments.length===3&&typeof t==="string"&&L.test(t)){return this.each(function(){O(this).domManip(V,U,T,true)})}if(O.isFunction(t)){return this.each(function(W){var X=O(this);V[0]=t.call(this,W,U?X.html():az);X.domManip(V,U,T)})}if(this[0]){S=t&&t.parentNode;S=O.support.parentNode&&S&&S.nodeType===11&&S.childNodes.length===this.length?{fragment:S}:O.buildFragment(V,this,B);E=S.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){U=U&&O.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){T.call(U?O.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||S.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&O.each(B,aC)}return this}});O.buildFragment=function(t,c,S){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:G;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===G&&!at.test(t[0])&&(O.support.checkClone||!L.test(t[0]))){E=true;if(B=O.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();O.clean(t,c,P,S)}if(E){O.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};O.fragments={};O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){O.fn[t]=function(T){var S=[];T=O(T);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&T.length===1){T[c](this[0]);return this}else{P=0;for(var E=T.length;P<E;P++){var B=(P>0?this.clone(true):this).get();O(T[P])[c](B);S=S.concat(B)}return this.pushStack(S,t,T.selector)}}});O.extend({clean:function(X,V,U,T){V=V||G;if(typeof V.createElement==="undefined"){V=V.ownerDocument||V[0]&&V[0].ownerDocument||G}for(var S=[],P=0,B;(B=X[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!f.test(B)){B=V.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(aV,"<$1></$2>");var E=(aI.exec(B)||["",""])[1].toLowerCase(),t=ao[E]||ao._default,W=t[0],c=V.createElement("div");for(c.innerHTML=t[1]+B+t[2];W--;){c=c.lastChild}if(!O.support.tbody){W=r.test(B);E=E==="table"&&!W?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!W?c.childNodes:[];for(t=E.length-1;t>=0;--t){O.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!O.support.leadingWhitespace&&aM.test(B)&&c.insertBefore(V.createTextNode(aM.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){S.push(B)}else{S=O.merge(S,B)}}}if(U){for(P=0;S[P];P++){if(T&&O.nodeName(S[P],"script")&&(!S[P].type||S[P].type.toLowerCase()==="text/javascript")){T.push(S[P].parentNode?S[P].parentNode.removeChild(S[P]):S[P])}else{S[P].nodeType===1&&S.splice.apply(S,[P+1,0].concat(O.makeArray(S[P].getElementsByTagName("script"))));U.appendChild(S[P])}}}return S},cleanData:function(V){for(var U,T,S=O.cache,P=O.event.special,E=O.support.deleteExpando,t=0,B;(B=V[t])!=null;t++){if(!(B.nodeName&&O.noData[B.nodeName.toLowerCase()])){if(T=B[O.expando]){if((U=S[T])&&U.events){for(var c in U.events){P[c]?O.event.remove(B,c):O.removeEvent(B,c,U.handle)}}if(E){delete B[O.expando]}else{B.removeAttribute&&B.removeAttribute(O.expando)}delete S[T]}}}}});var w=/alpha\([^)]*\)/i,aH=/opacity=([^)]*)/,aq=/-([a-z])/ig,J=/([A-Z])/g,j=/^-?\d+(?:px)?$/i,u=/^-?\d/,h={position:"absolute",visibility:"hidden",display:"block"},ad=["Left","Right"],D=["Top","Bottom"],ai,aY,aG,aW=function(t,c){return c.toUpperCase()};O.fn.css=function(t,c){if(arguments.length===2&&c===az){return this}return O.access(this,t,c,true,function(P,E,B){return B!==az?O.style(P,E,B):O.css(P,E)})};O.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=ai(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":O.support.cssFloat?"cssFloat":"styleFloat"},style:function(V,U,T,S){if(!(!V||V.nodeType===3||V.nodeType===8||!V.style)){var P,E=O.camelCase(U),t=V.style,B=O.cssHooks[E];U=O.cssProps[E]||E;if(T!==az){if(!(typeof T==="number"&&isNaN(T)||T==null)){if(typeof T==="number"&&!O.cssNumber[E]){T+="px"}if(!B||!("set" in B)||(T=B.set(V,T))!==az){try{t[U]=T}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(V,false,S))!==az){return P}return t[U]}}},css:function(t,c,S){var P,E=O.camelCase(c),B=O.cssHooks[E];c=O.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,S))!==az){return P}else{if(ai){return ai(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(aq,aW)}});O.curCSS=O.css;O.each(["height","width"],function(t,c){O.cssHooks[c]={get:function(S,P,E){var B;if(P){if(S.offsetWidth!==0){B=N(S,c,E)}else{O.swap(S,h,function(){B=N(S,c,E)})}if(B<=0){B=ai(S,c,c);if(B==="0px"&&aG){B=aG(S,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=S.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(j.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!O.support.opacity){O.cssHooks.opacity={get:function(t,c){return aH.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=O.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=w.test(B)?B.replace(w,E):P.filter+" "+E}}}if(G.defaultView&&G.defaultView.getComputedStyle){aY=function(t,c,E){var B;E=E.replace(J,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return az}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!O.contains(t.ownerDocument.documentElement,t)){B=O.style(t,E)}}return B}}if(G.documentElement.currentStyle){aG=function(t,c){var S,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!j.test(E)&&u.test(E)){S=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=S;t.runtimeStyle.left=P}return E===""?"auto":E}}ai=aY||aG;if(O.expr&&O.expr.filters){O.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!O.support.reliableHiddenOffsets&&(t.style.display||O.css(t,"display"))==="none"};O.expr.filters.visible=function(c){return !O.expr.filters.hidden(c)}}var aJ=O.now(),au=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,M=/^(?:select|textarea)/i,x=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,k=/^(?:GET|HEAD)$/,p=/\[\]$/,al=/\=\?(&|$)/,v=/\?/,aZ=/([?&])_=[^&]*/,aN=/^(\w+:)?\/\/([^\/?#]+)/,aA=/%20/g,R=/#.*$/,aL=O.fn.load;O.fn.extend({load:function(t,c,S){if(typeof t!=="string"&&aL){return aL.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(O.isFunction(c)){S=c;c=null}else{if(typeof c==="object"){c=O.param(c,O.ajaxSettings.traditional);P="POST"}}}var B=this;O.ajax({url:t,type:P,dataType:"html",data:c,complete:function(T,U){if(U==="success"||U==="notmodified"){B.html(E?O("<div>").append(T.responseText.replace(au,"")).find(E):T.responseText)}S&&B.each(S,[T.responseText,U,T])}});return this},serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?O.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||M.test(this.nodeName)||x.test(this.type))}).map(function(t,c){var B=O(this).val();return B==null?null:O.isArray(B)?O.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});O.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){O.fn[c]=function(B){return this.bind(c,B)}});O.extend({get:function(t,c,E,B){if(O.isFunction(c)){B=B||E;E=c;c=null}return O.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return O.get(t,null,c,"script")},getJSON:function(t,c,B){return O.get(t,c,B,"json")},post:function(t,c,E,B){if(O.isFunction(c)){B=B||E;E=c;c={}}return O.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){O.extend(O.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new av.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(a6){var a5=O.extend(true,{},O.ajaxSettings,a6),a4,a3,a2,aa=a5.type.toUpperCase(),X=k.test(aa);a5.url=a5.url.replace(R,"");a5.context=a6&&a6.context!=null?a6.context:a5;if(a5.data&&a5.processData&&typeof a5.data!=="string"){a5.data=O.param(a5.data,a5.traditional)}if(a5.dataType==="jsonp"){if(aa==="GET"){al.test(a5.url)||(a5.url+=(v.test(a5.url)?"&":"?")+(a5.jsonp||"callback")+"=?")}else{if(!a5.data||!al.test(a5.data)){a5.data=(a5.data?a5.data+"&":"")+(a5.jsonp||"callback")+"=?"}}a5.dataType="json"}if(a5.dataType==="json"&&(a5.data&&al.test(a5.data)||al.test(a5.url))){a4=a5.jsonpCallback||"jsonp"+aJ++;if(a5.data){a5.data=(a5.data+"").replace(al,"="+a4+"$1")}a5.url=a5.url.replace(al,"="+a4+"$1");a5.dataType="script";var Y=av[a4];av[a4]=function(a7){if(O.isFunction(Y)){Y(a7)}else{av[a4]=az;try{delete av[a4]}catch(a8){}}a2=a7;O.handleSuccess(a5,P,a3,a2);O.handleComplete(a5,P,a3,a2);T&&T.removeChild(U)}}if(a5.dataType==="script"&&a5.cache===null){a5.cache=false}if(a5.cache===false&&X){var V=O.now(),E=a5.url.replace(aZ,"$1_="+V);a5.url=E+(E===a5.url?(v.test(a5.url)?"&":"?")+"_="+V:"")}if(a5.data&&X){a5.url+=(v.test(a5.url)?"&":"?")+a5.data}a5.global&&O.active++===0&&O.event.trigger("ajaxStart");V=(V=aN.exec(a5.url))&&(V[1]&&V[1].toLowerCase()!==location.protocol||V[2].toLowerCase()!==location.host);if(a5.dataType==="script"&&aa==="GET"&&V){var T=G.getElementsByTagName("head")[0]||G.documentElement,U=G.createElement("script");if(a5.scriptCharset){U.charset=a5.scriptCharset}U.src=a5.url;if(!a4){var S=false;U.onload=U.onreadystatechange=function(){if(!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){S=true;O.handleSuccess(a5,P,a3,a2);O.handleComplete(a5,P,a3,a2);U.onload=U.onreadystatechange=null;T&&U.parentNode&&T.removeChild(U)}}}T.insertBefore(U,T.firstChild);return az}var t=false,P=a5.xhr();if(P){a5.username?P.open(aa,a5.url,a5.async,a5.username,a5.password):P.open(aa,a5.url,a5.async);try{if(a5.data!=null&&!X||a6&&a6.contentType){P.setRequestHeader("Content-Type",a5.contentType)}if(a5.ifModified){O.lastModified[a5.url]&&P.setRequestHeader("If-Modified-Since",O.lastModified[a5.url]);O.etag[a5.url]&&P.setRequestHeader("If-None-Match",O.etag[a5.url])}V||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",a5.dataType&&a5.accepts[a5.dataType]?a5.accepts[a5.dataType]+", */*; q=0.01":a5.accepts._default)}catch(B){}if(a5.beforeSend&&a5.beforeSend.call(a5.context,P,a5)===false){a5.global&&O.active--===1&&O.event.trigger("ajaxStop");P.abort();return false}a5.global&&O.triggerGlobal(a5,"ajaxSend",[P,a5]);var c=P.onreadystatechange=function(a7){if(!P||P.readyState===0||a7==="abort"){t||O.handleComplete(a5,P,a3,a2);t=true;if(P){P.onreadystatechange=O.noop}}else{if(!t&&P&&(P.readyState===4||a7==="timeout")){t=true;P.onreadystatechange=O.noop;a3=a7==="timeout"?"timeout":!O.httpSuccess(P)?"error":a5.ifModified&&O.httpNotModified(P,a5.url)?"notmodified":"success";var a9;if(a3==="success"){try{a2=O.httpData(P,a5.dataType,a5)}catch(a8){a3="parsererror";a9=a8}}if(a3==="success"||a3==="notmodified"){a4||O.handleSuccess(a5,P,a3,a2)}else{O.handleError(a5,P,a3,a9)}a4||O.handleComplete(a5,P,a3,a2);a7==="timeout"&&P.abort();if(a5.async){P=null}}}};try{var ab=P.abort;P.abort=function(){P&&Function.prototype.call.call(ab,P);c("abort")}}catch(Z){}a5.async&&a5.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},a5.timeout);try{P.send(X||a5.data==null?null:a5.data)}catch(W){O.handleError(a5,P,null,W);O.handleComplete(a5,P,a3,a2)}a5.async||c();return P}},param:function(t,c){var P=[],E=function(T,S){S=O.isFunction(S)?S():S;P[P.length]=encodeURIComponent(T)+"="+encodeURIComponent(S)};if(c===az){c=O.ajaxSettings.traditional}if(O.isArray(t)||t.jquery){O.each(t,function(){E(this.name,this.value)})}else{for(var B in t){s(B,t[B],c,E)}}return P.join("&").replace(aA,"+")}});O.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&O.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&O.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&O.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&O.active--===1&&O.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?O(t.context):O.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){O.lastModified[c]=E}if(B){O.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&O.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=O.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){O.globalEval(t)}}}return t}});if(av.ActiveXObject){O.ajaxSettings.xhr=function(){if(av.location.protocol!=="file:"){try{return new av.XMLHttpRequest}catch(t){}}try{return new av.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}O.support.ajax=!!O.ajaxSettings.xhr();var g={},A=/^(?:toggle|show|hide)$/,n=/^([+\-]=)?([\d+.\-]+)(.*)$/,ap,y=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];O.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(am("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!O.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&O.css(t,"display")==="none"&&O.data(t,"olddisplay",l(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=O.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(am("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=O.css(this[t],"display");B!=="none"&&O.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:O.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(O.isFunction(t)&&O.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:O(this).is(":hidden");O(this)[P?"show":"hide"]()}):this.animate(am("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=O.speed(c,P,E);if(O.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var V=O.extend({},B),T,U=this.nodeType===1,X=U&&O(this).is(":hidden"),S=this;for(T in t){var W=O.camelCase(T);if(T!==W){t[W]=t[T];delete t[T];T=W}if(t[T]==="hide"&&X||t[T]==="show"&&!X){return V.complete.call(this)}if(U&&(T==="height"||T==="width")){V.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(O.css(this,"display")==="inline"&&O.css(this,"float")==="none"){if(O.support.inlineBlockNeedsLayout){if(l(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(O.isArray(t[T])){(V.specialEasing=V.specialEasing||{})[T]=t[T][1];t[T]=t[T][0]}}if(V.overflow!=null){this.style.overflow="hidden"}V.curAnim=O.extend({},t);O.each(t,function(Z,a4){var ab=new O.fx(S,V,Z);if(A.test(a4)){ab[a4==="toggle"?X?"show":"hide":a4](t)}else{var aa=n.exec(a4),a2=ab.cur()||0;if(aa){var Y=parseFloat(aa[2]),a3=aa[3]||"px";if(a3!=="px"){O.style(S,Z,(Y||1)+a3);a2=(Y||1)/ab.cur()*a2;O.style(S,Z,a2+a3)}if(aa[1]){Y=(aa[1]==="-="?-1:1)*Y+a2}ab.custom(a2,Y,a3)}else{ab.custom(a2,a4,"")}}});return true})},stop:function(t,c){var B=O.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});O.each({slideDown:am("show",1),slideUp:am("hide",1),slideToggle:am("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){O.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});O.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?O.extend({},t):{complete:E||!E&&c||O.isFunction(t)&&t,duration:t,easing:E&&c||c&&!O.isFunction(c)&&c};B.duration=O.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in O.fx.speeds?O.fx.speeds[B.duration]:O.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&O(this).dequeue();O.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});O.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(O.fx.step[this.prop]||O.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(O.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,S){function P(T){return E.step(T)}var E=this,B=O.fx;this.startTime=O.now();this.start=t;this.end=c;this.unit=S||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&O.timers.push(P)&&!ap){ap=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=O.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());O(this.elem).show()},hide:function(){this.options.orig[this.prop]=O.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=O.now(),T=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var S in this.options.curAnim){if(this.options.curAnim[S]!==true){T=false}}if(T){if(this.options.overflow!=null&&!O.support.shrinkWrapBlocks){var P=this.elem,E=this.options;O.each(["","X","Y"],function(U,V){P.style["overflow"+V]=E.overflow[U]})}this.options.hide&&O(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){O.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(O.easing.swing?"swing":"linear");this.pos=O.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};O.extend(O.fx,{tick:function(){for(var t=O.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||O.fx.stop()},interval:13,stop:function(){clearInterval(ap);ap=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){O.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(O.expr&&O.expr.filters){O.expr.filters.animated=function(c){return O.grep(O.timers,function(t){return c===t.elem}).length}}var a=/^t(?:able|d|h)$/i,ax=/^(?:body|html)$/i;O.fn.offset="getBoundingClientRect" in G.documentElement?function(t){var c=this[0],S;if(t){return this.each(function(T){O.offset.setOffset(this,t,T)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return O.offset.bodyOffset(c)}try{S=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!S||!O.contains(B,c)){return S||{top:0,left:0}}c=E.body;E=aU(E);return{top:S.top+(E.pageYOffset||O.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:S.left+(E.pageXOffset||O.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(V){var U=this[0];if(V){return this.each(function(W){O.offset.setOffset(this,V,W)})}if(!U||!U.ownerDocument){return null}if(U===U.ownerDocument.body){return O.offset.bodyOffset(U)}O.offset.initialize();var T,S=U.offsetParent,P=U.ownerDocument,E=P.documentElement,t=P.body;T=(P=P.defaultView)?P.getComputedStyle(U,null):U.currentStyle;for(var B=U.offsetTop,c=U.offsetLeft;(U=U.parentNode)&&U!==t&&U!==E;){if(O.offset.supportsFixedPosition&&T.position==="fixed"){break}T=P?P.getComputedStyle(U,null):U.currentStyle;B-=U.scrollTop;c-=U.scrollLeft;if(U===S){B+=U.offsetTop;c+=U.offsetLeft;if(O.offset.doesNotAddBorder&&!(O.offset.doesAddBorderForTableAndCells&&a.test(U.nodeName))){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}S=U.offsetParent}if(O.offset.subtractsBorderForOverflowNotVisible&&T.overflow!=="visible"){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}T=T}if(T.position==="relative"||T.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(O.offset.supportsFixedPosition&&T.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};O.offset={initialize:function(){var t=G.body,c=G.createElement("div"),S,P,E,B=parseFloat(O.css(t,"marginTop"))||0;O.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);S=c.firstChild;P=S.firstChild;E=S.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";S.style.overflow="hidden";S.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);O.offset.initialize=O.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;O.offset.initialize();if(O.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(O.css(t,"marginTop"))||0;B+=parseFloat(O.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(W,U,T){var S=O.css(W,"position");if(S==="static"){W.style.position="relative"}var P=O(W),E=P.offset(),t=O.css(W,"top"),B=O.css(W,"left"),c=S==="absolute"&&O.inArray("auto",[t,B])>-1;S={};var V={};if(c){V=P.position()}t=c?V.top:parseInt(t,10)||0;B=c?V.left:parseInt(B,10)||0;if(O.isFunction(U)){U=U.call(W,T,E)}if(U.top!=null){S.top=U.top-E.top+t}if(U.left!=null){S.left=U.left-E.left+B}"using" in U?U.using.call(W,S):P.css(S)}};O.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=ax.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(O.css(t,"marginTop"))||0;E.left-=parseFloat(O.css(t,"marginLeft"))||0;B.top+=parseFloat(O.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(O.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||G.body;c&&!ax.test(c.nodeName)&&O.css(c,"position")==="static";){c=c.offsetParent}return c})}});O.each(["Left","Top"],function(t,c){var B="scroll"+c;O.fn[B]=function(S){var P=this[0],E;if(!P){return null}if(S!==az){return this.each(function(){if(E=aU(this)){E.scrollTo(!t?S:O(E).scrollLeft(),t?S:O(E).scrollTop())}else{this[B]=S}})}else{return(E=aU(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:O.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});O.each(["Height","Width"],function(t,c){var B=c.toLowerCase();O.fn["inner"+c]=function(){return this[0]?parseFloat(O.css(this[0],B,"padding")):null};O.fn["outer"+c]=function(E){return this[0]?parseFloat(O.css(this[0],B,E?"margin":"border")):null};O.fn[B]=function(S){var P=this[0];if(!P){return S==null?null:this}if(O.isFunction(S)){return this.each(function(T){var U=O(this);U[B](S.call(this,T,U[B]()))})}if(O.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(S===az){P=O.css(P,B);var E=parseFloat(P);return O.isNaN(E)?P:E}else{return this.css(B,typeof S==="string"?S:S+"px")}}}}})})(window);
/*
 * jQuery UI 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
jQuery.ui||function(a){a.ui={version:"1.8.1",plugin:{add:function(f,c,h){f=a.ui[f].prototype;for(var g in h){f.plugins[g]=f.plugins[g]||[];f.plugins[g].push([c,h[g]])}},call:function(f,c,h){if((c=f.plugins[c])&&f.element[0].parentNode){for(var g=0;g<c.length;g++){f.options[c[g][0]]&&c[g][1].apply(f.element,h)}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(e,c){if(a(e).css("overflow")=="hidden"){return false}c=c&&c=="left"?"scrollLeft":"scrollTop";var f=false;if(e[c]>0){return true}e[c]=1;f=e[c]>0;e[c]=0;return f},isOverAxis:function(e,c,f){return e>c&&e<c+f},isOver:function(h,c,l,k,j,i){return a.ui.isOverAxis(h,l,j)&&a.ui.isOverAxis(c,k,i)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};a.fn.extend({_focus:a.fn.focus,focus:function(d,c){return typeof d==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},d)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(d){if(d!==undefined){return this.css("zIndex",d)}if(this.length){d=a(this[0]);for(var c;d.length&&d[0]!==document;){c=d.css("position");if(c=="absolute"||c=="relative"||c=="fixed"){c=parseInt(d.css("zIndex"));if(!isNaN(c)&&c!=0){return c}}d=d.parent()}}return 0}});a.extend(a.expr[":"],{data:function(e,c,f){return !!a.data(e,f[3])},focusable:function(e){var c=e.nodeName.toLowerCase(),f=a.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c||"area"==c?e.href||!isNaN(f):!isNaN(f))&&!a(e)["area"==c?"parents":"closest"](":hidden").length},tabbable:function(d){var c=a.attr(d,"tabindex");return(isNaN(c)||c>=0)&&a(d).is(":focusable")}})}(jQuery);
/*
 * jQuery UI Widget 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a){var c=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){if(!d){if(!b||a.filter(b,[this]).length){a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})}}return c.call(a(this),b,d)})};a.widget=function(b,j,i){var h=b.split(".")[0],g;b=b.split(".")[1];g=h+"-"+b;if(!i){i=j;j=a.Widget}a.expr[":"][g]=function(d){return !!a.data(d,b)};a[h]=a[h]||{};a[h][b]=function(d,e){arguments.length&&this._createWidget(d,e)};j=new j;j.options=a.extend({},j.options);a[h][b].prototype=a.extend(true,j,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},i);a.widget.bridge(b,a[h][b])};a.widget.bridge=function(b,d){a.fn[b]=function(k){var j=typeof k==="string",i=Array.prototype.slice.call(arguments,1),g=this;k=!j&&i.length?a.extend.apply(null,[true,k].concat(i)):k;if(j&&k.substring(0,1)==="_"){return g}j?this.each(function(){var f=a.data(this,b),e=f&&a.isFunction(f[k])?f[k].apply(f,i):f;if(e!==f&&e!==undefined){g=e;return false}}):this.each(function(){var e=a.data(this,b);if(e){k&&e.option(k);e._init()}else{a.data(this,b,new d(k,this))}});return g}};a.Widget=function(b,d){arguments.length&&this._createWidget(b,d)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,f){this.element=a(f).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(f)[this.widgetName],b);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,h){var g=b,f=this;if(arguments.length===0){return a.extend({},f.options)}if(typeof b==="string"){if(h===undefined){return this.options[b]}g={};g[b]=h}a.each(g,function(e,d){f._setOption(e,d)});return f},_setOption:function(b,d){this.options[b]=d;if(b==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,j,i){var h=this.options[b];j=a.Event(j);j.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();i=i||{};if(j.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];j[g]=j.originalEvent[g]}}this.element.trigger(j,i);return !(a.isFunction(h)&&h.call(this.element[0],j,i)===false||j.isDefaultPrevented())}}})(jQuery);
/*
 * jQuery UI Mouse 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,h=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!h||g||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(b){return c._mouseMove(b)};this._mouseUpDelegate=function(b){return c._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b)}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(f){f.ui=f.ui||{};var a=/left|center|right/,e=/top|center|bottom/,d=f.fn.position,b=f.fn.offset;f.fn.position=function(j){if(!j||!j.of){return d.apply(this,arguments)}j=f.extend({},j);var c=f(j.of),o=(j.collision||"flip").split(" "),n=j.offset?j.offset.split(" "):[0,0],m,l,k;if(j.of.nodeType===9){m=c.width();l=c.height();k={top:0,left:0}}else{if(j.of.scrollTo&&j.of.document){m=c.width();l=c.height();k={top:c.scrollTop(),left:c.scrollLeft()}}else{if(j.of.preventDefault){j.at="left top";m=l=0;k={top:j.of.pageY,left:j.of.pageX}}else{m=c.outerWidth();l=c.outerHeight();k=c.offset()}}}f.each(["my","at"],function(){var g=(j[this]||"").split(" ");if(g.length===1){g=a.test(g[0])?g.concat(["center"]):e.test(g[0])?["center"].concat(g):["center","center"]}g[0]=a.test(g[0])?g[0]:"center";g[1]=e.test(g[1])?g[1]:"center";j[this]=g});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(j.at[0]==="right"){k.left+=m}else{if(j.at[0]==="center"){k.left+=m/2}}if(j.at[1]==="bottom"){k.top+=l}else{if(j.at[1]==="center"){k.top+=l/2}}k.left+=n[0];k.top+=n[1];return this.each(function(){var p=f(this),h=p.outerWidth(),g=p.outerHeight(),i=f.extend({},k);if(j.my[0]==="right"){i.left-=h}else{if(j.my[0]==="center"){i.left-=h/2}}if(j.my[1]==="bottom"){i.top-=g}else{if(j.my[1]==="center"){i.top-=g/2}}i.left=parseInt(i.left);i.top=parseInt(i.top);f.each(["left","top"],function(s,q){f.ui.position[o[s]]&&f.ui.position[o[s]][q](i,{targetWidth:m,targetHeight:l,elemWidth:h,elemHeight:g,offset:n,my:j.my,at:j.at})});f.fn.bgiframe&&p.bgiframe();p.offset(f.extend(i,{using:j.using}))})};f.ui.position={fit:{left:function(g,c){var h=f(window);c=g.left+c.elemWidth-h.width()-h.scrollLeft();g.left=c>0?g.left-c:Math.max(0,g.left)},top:function(g,c){var h=f(window);c=g.top+c.elemHeight-h.height()-h.scrollTop();g.top=c>0?g.top-c:Math.max(0,g.top)}},flip:{left:function(h,c){if(c.at[0]!=="center"){var k=f(window);k=h.left+c.elemWidth-k.width()-k.scrollLeft();var j=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,i=-2*c.offset[0];h.left+=h.left<0?j+c.targetWidth+i:k>0?j-c.targetWidth+i:0}},top:function(i,c){if(c.at[1]!=="center"){var m=f(window);m=i.top+c.elemHeight-m.height()-m.scrollTop();var l=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,k=c.at[1]==="top"?c.targetHeight:-c.targetHeight,j=-2*c.offset[1];i.top+=i.top<0?l+c.targetHeight+j:m>0?l+k+j:0}}}};if(!f.offset.setOffset){f.offset.setOffset=function(i,c){if(/static/.test(f.curCSS(i,"position"))){i.style.position="relative"}var m=f(i),l=m.offset(),k=parseInt(f.curCSS(i,"top",true),10)||0,j=parseInt(f.curCSS(i,"left",true),10)||0;l={top:c.top-l.top+k,left:c.left-l.left+j};"using" in c?c.using.call(i,l):m.css(l)};f.fn.offset=function(g){var c=this[0];if(!c||!c.ownerDocument){return null}if(g){return this.each(function(){f.offset.setOffset(this,g)})}return b.call(this)}}})(jQuery);(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");d.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=a([]);if(d.range){if(d.range===true){this.range=a("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!==2){d.values=[d.values[0],d.values[0]]}}else{this.range=a("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range==="min"||d.range==="max"){this.range.addClass("ui-slider-range-"+d.range)}this.range.addClass("ui-widget-header")}a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(d.values&&d.values.length){for(;a(".ui-slider-handle",this.element).length<d.values.length;){a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(d.disabled){a(this).blur()}else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(n){var m=true,l=a(this).data("index.ui-slider-handle"),k,j,b;if(!c.options.disabled){switch(n.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:m=false;if(!c._keySliding){c._keySliding=true;a(this).addClass("ui-state-active");k=c._start(n,l);if(k===false){return}}break}b=c.options.step;k=c.options.values&&c.options.values.length?(j=c.values(l)):(j=c.value());switch(n.keyCode){case a.ui.keyCode.HOME:j=c._valueMin();break;case a.ui.keyCode.END:j=c._valueMax();break;case a.ui.keyCode.PAGE_UP:j=k+(c._valueMax()-c._valueMin())/5;break;case a.ui.keyCode.PAGE_DOWN:j=k-(c._valueMax()-c._valueMin())/5;break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(k===c._valueMax()){return}j=k+b;break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(k===c._valueMin()){return}j=k-b;break}c._slide(n,l,j);return m}}).keyup(function(f){var b=a(this).data("index.ui-slider-handle");if(c._keySliding){c._keySliding=false;c._stop(f,b);c._change(f,b);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var j=this.options,p,o,n,m,l,k;if(j.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();p={x:d.pageX,y:d.pageY};o=this._normValueFromMouse(p);n=this._valueMax()-this._valueMin()+1;l=this;this.handles.each(function(c){var b=Math.abs(o-l.values(c));if(n>b){n=b;m=a(this);k=c}});if(j.range===true&&this.values(1)===j.min){k+=1;m=a(this.handles[k])}if(this._start(d,k)===false){return false}this._mouseSliding=true;l._handleIndex=k;m.addClass("ui-state-active").focus();j=m.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-j.left-m.width()/2,top:d.pageY-j.top-m.height()/2-(parseInt(m.css("borderTopWidth"),10)||0)-(parseInt(m.css("borderBottomWidth"),10)||0)+(parseInt(m.css("marginTop"),10)||0)};o=this._normValueFromMouse(p);this._slide(d,k,o);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(c){var d=this._normValueFromMouse({x:c.pageX,y:c.pageY});this._slide(c,this._handleIndex,d);return false},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(c){var d;if(this.orientation==="horizontal"){d=this.elementSize.width;c=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;c=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=c/d;if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}c=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+d*c)},_start:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,f,h){var g;if(this.options.values&&this.options.values.length){g=this.values(f?0:1);if(this.options.values.length===2&&this.options.range===true&&(f===0&&h>g||f===1&&h<g)){h=g}if(h!==this.values(f)){g=this.values();g[f]=h;d=this._trigger("slide",d,{handle:this.handles[f],value:h,values:g});this.values(f?0:1);d!==false&&this.values(f,h,true)}}else{if(h!==this.value()){d=this._trigger("slide",d,{handle:this.handles[f],value:h});d!==false&&this.value(h)}}},_stop:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,e){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("change",d,f)}},value:function(c){if(arguments.length){this.options.value=this._trimAlignValue(c);this._refreshValue();this._change(null,0)}return this._value()},values:function(d,g){var j,i,h;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(g);this._refreshValue();this._change(null,d)}if(arguments.length){if(a.isArray(arguments[0])){j=this.options.values;i=arguments[0];for(h=0;h<j.length;h+=1){j[h]=this._trimAlignValue(i[h]);this._change(null,h)}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(d):this.value()}}else{return this._values()}},_setOption:function(d,f){var h,g=0;if(a.isArray(this.options.values)){g=this.options.values.length}a.Widget.prototype._setOption.apply(this,arguments);switch(d){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(h=0;h<g;h+=1){this._change(null,h)}this._animateOff=false;break}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},_values:function(d){var e,f;if(arguments.length){e=this.options.values[d];return e=this._trimAlignValue(e)}else{e=this.options.values.slice();for(f=0;f<e.length;f+=1){e[f]=this._trimAlignValue(e[f])}return e}},_trimAlignValue:function(d){if(d<this._valueMin()){return this._valueMin()}if(d>this._valueMax()){return this._valueMax()}var e=this.options.step,f=d%e;d=d-f;if(f>=e/2){d+=e}return parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s=this.options.range,t=this.options,r=this,q=!this._animateOff?t.animate:false,p,o={},n,m,l,d;if(this.options.values&&this.options.values.length){this.handles.each(function(b){p=(r.values(b)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=p+"%";a(this).stop(1,1)[q?"animate":"css"](o,t.animate);if(r.options.range===true){if(r.orientation==="horizontal"){if(b===0){r.range.stop(1,1)[q?"animate":"css"]({left:p+"%"},t.animate)}if(b===1){r.range[q?"animate":"css"]({width:p-n+"%"},{queue:false,duration:t.animate})}}else{if(b===0){r.range.stop(1,1)[q?"animate":"css"]({bottom:p+"%"},t.animate)}if(b===1){r.range[q?"animate":"css"]({height:p-n+"%"},{queue:false,duration:t.animate})}}}n=p})}else{m=this.value();l=this._valueMin();d=this._valueMax();p=d!==l?(m-l)/(d-l)*100:0;o[r.orientation==="horizontal"?"left":"bottom"]=p+"%";this.handle.stop(1,1)[q?"animate":"css"](o,t.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[q?"animate":"css"]({width:p+"%"},t.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range[q?"animate":"css"]({width:100-p+"%"},{queue:false,duration:t.animate})}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[q?"animate":"css"]({height:p+"%"},t.animate)}if(s==="max"&&this.orientation==="vertical"){this.range[q?"animate":"css"]({height:100-p+"%"},{queue:false,duration:t.animate})}}}});a.extend(a.ui.slider,{version:"1.8.1"})})(jQuery);jQuery.effects||function(p){function h(j){var f;if(j&&j.constructor==Array&&j.length==3){return j}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(j)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(j)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(j)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(j)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(/rgba\(0, 0, 0, 0\)/.exec(j)){return g.transparent}return g[p.trim(j).toLowerCase()]}function b(k,j){var f;do{f=p.curCSS(k,j);if(f!=""&&f!="transparent"||p.nodeName(k,"body")){break}j="backgroundColor"}while(k=k.parentNode);return h(f)}function e(){var m=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,j={},f,l;if(m&&m.length&&m[0]&&m[m[0]]){for(var k=m.length;k--;){f=m[k];if(typeof m[f]=="string"){l=f.replace(/\-(\w)/g,function(o,n){return n.toUpperCase()});j[l]=m[f]}}}else{for(f in m){if(typeof m[f]==="string"){j[f]=m[f]}}}return j}function d(k){var j,f;for(j in k){f=k[j];if(f==null||p.isFunction(f)||j in a||/scrollbar/.test(j)||!/color/i.test(j)&&isNaN(parseFloat(f))){delete k[j]}}return k}function t(l,j){var f={_:0},k;for(k in j){if(l[k]!=j[k]){f[k]=j[k]}}return f}function i(l,j,f,k){if(typeof l=="object"){k=j;f=null;j=l;l=j.effect}if(p.isFunction(j)){k=j;f=null;j={}}if(p.isFunction(f)){k=f;f=null}if(typeof j=="number"||p.fx.speeds[j]){k=f;f=j;j={}}j=j||{};f=f||j.duration;f=p.fx.off?0:typeof f=="number"?f:p.fx.speeds[f]||p.fx.speeds._default;k=k||j.complete;return[l,j,f,k]}p.effects={};p.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(j,f){p.fx.step[f]=function(k){if(!k.colorInit){k.start=b(k.elem,f);k.end=h(k.end);k.colorInit=true}k.elem.style[f]="rgb("+Math.max(Math.min(parseInt(k.pos*(k.end[0]-k.start[0])+k.start[0],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[1]-k.start[1])+k.start[1],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[2]-k.start[2])+k.start[2],10),255),0)+")"}});var g={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};p.effects.animateClass=function(l,j,f,k){if(p.isFunction(f)){k=f;f=null}return this.each(function(){var r=p(this),o=r.attr("style")||" ",n=d(e.call(this)),q,m=r.attr("className");p.each(c,function(s,v){l[v]&&r[v+"Class"](l[v])});q=d(e.call(this));r.attr("className",m);r.animate(t(n,q),j,f,function(){p.each(c,function(s,v){l[v]&&r[v+"Class"](l[v])});if(typeof r.attr("style")=="object"){r.attr("style").cssText="";r.attr("style").cssText=o}else{r.attr("style",o)}k&&k.apply(this,arguments)})})};p.fn.extend({_addClass:p.fn.addClass,addClass:function(l,j,f,k){return j?p.effects.animateClass.apply(this,[{add:l},j,f,k]):this._addClass(l)},_removeClass:p.fn.removeClass,removeClass:function(l,j,f,k){return j?p.effects.animateClass.apply(this,[{remove:l},j,f,k]):this._removeClass(l)},_toggleClass:p.fn.toggleClass,toggleClass:function(m,j,f,l,k){return typeof j=="boolean"||j===undefined?f?p.effects.animateClass.apply(this,[j?{add:m}:{remove:m},f,l,k]):this._toggleClass(m,j):p.effects.animateClass.apply(this,[{toggle:m},j,f,l])},switchClass:function(m,j,f,l,k){return p.effects.animateClass.apply(this,[{add:j,remove:m},f,l,k])}});p.extend(p.effects,{version:"1.8.1",save:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.data("ec.storage."+j[f],k[0].style[j[f]])}},restore:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.css(j[f],k.data("ec.storage."+j[f]))}},setMode:function(j,f){if(f=="toggle"){f=j.is(":hidden")?"show":"hide"}return f},getBaseline:function(k,j){var f;switch(k[0]){case"top":f=0;break;case"middle":f=0.5;break;case"bottom":f=1;break;default:f=k[0]/j.height}switch(k[1]){case"left":k=0;break;case"center":k=0.5;break;case"right":k=1;break;default:k=k[1]/j.width}return{x:k,y:f}},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()}var j={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")},f=p("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});k.wrap(f);f=k.parent();if(k.css("position")=="static"){f.css({position:"relative"});k.css({position:"relative"})}else{p.extend(j,{position:k.css("position"),zIndex:k.css("z-index")});p.each(["top","left","bottom","right"],function(m,l){j[l]=k.css(l);if(isNaN(parseInt(j[l],10))){j[l]="auto"}});k.css({position:"relative",top:0,left:0})}return f.css(j).show()},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(l,j,f,k){k=k||{};p.each(j,function(n,m){unit=l.cssUnit(m);if(unit[0]>0){k[m]=unit[0]*f+unit[1]}});return k}});p.fn.extend({effect:function(k){var j=i.apply(this,arguments);j={options:j[1],duration:j[2],callback:j[3]};var f=p.effects[k];return f&&!p.fx.off?f.call(this,j):this},_show:p.fn.show,show:function(j){if(!j||typeof j=="number"||p.fx.speeds[j]){return this._show.apply(this,arguments)}else{var f=i.apply(this,arguments);f[1].mode="show";return this.effect.apply(this,f)}},_hide:p.fn.hide,hide:function(j){if(!j||typeof j=="number"||p.fx.speeds[j]){return this._hide.apply(this,arguments)}else{var f=i.apply(this,arguments);f[1].mode="hide";return this.effect.apply(this,f)}},__toggle:p.fn.toggle,toggle:function(j){if(!j||typeof j=="number"||p.fx.speeds[j]||typeof j=="boolean"||p.isFunction(j)){return this.__toggle.apply(this,arguments)}else{var f=i.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)}},cssUnit:function(k){var j=this.css(k),f=[];p.each(["em","px","%","pt"],function(m,l){if(j.indexOf(l)>0){f=[parseFloat(j),l]}});return f}});p.easing.jswing=p.easing.swing;p.extend(p.easing,{def:"easeOutQuad",swing:function(m,j,f,l,k){return p.easing[p.easing.def](m,j,f,l,k)},easeInQuad:function(m,j,f,l,k){return l*(j/=k)*j+f},easeOutQuad:function(m,j,f,l,k){return -l*(j/=k)*(j-2)+f},easeInOutQuad:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j+f}return -l/2*(--j*(j-2)-1)+f},easeInCubic:function(m,j,f,l,k){return l*(j/=k)*j*j+f},easeOutCubic:function(m,j,f,l,k){return l*((j=j/k-1)*j*j+1)+f},easeInOutCubic:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j+f}return l/2*((j-=2)*j*j+2)+f},easeInQuart:function(m,j,f,l,k){return l*(j/=k)*j*j*j+f},easeOutQuart:function(m,j,f,l,k){return -l*((j=j/k-1)*j*j*j-1)+f},easeInOutQuart:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j+f}return -l/2*((j-=2)*j*j*j-2)+f},easeInQuint:function(m,j,f,l,k){return l*(j/=k)*j*j*j*j+f},easeOutQuint:function(m,j,f,l,k){return l*((j=j/k-1)*j*j*j*j+1)+f},easeInOutQuint:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j*j+f}return l/2*((j-=2)*j*j*j*j+2)+f},easeInSine:function(m,j,f,l,k){return -l*Math.cos(j/k*(Math.PI/2))+l+f},easeOutSine:function(m,j,f,l,k){return l*Math.sin(j/k*(Math.PI/2))+f},easeInOutSine:function(m,j,f,l,k){return -l/2*(Math.cos(Math.PI*j/k)-1)+f},easeInExpo:function(m,j,f,l,k){return j==0?f:l*Math.pow(2,10*(j/k-1))+f},easeOutExpo:function(m,j,f,l,k){return j==k?f+l:l*(-Math.pow(2,-10*j/k)+1)+f},easeInOutExpo:function(m,j,f,l,k){if(j==0){return f}if(j==k){return f+l}if((j/=k/2)<1){return l/2*Math.pow(2,10*(j-1))+f}return l/2*(-Math.pow(2,-10*--j)+2)+f},easeInCirc:function(m,j,f,l,k){return -l*(Math.sqrt(1-(j/=k)*j)-1)+f},easeOutCirc:function(m,j,f,l,k){return l*Math.sqrt(1-(j=j/k-1)*j)+f},easeInOutCirc:function(m,j,f,l,k){if((j/=k/2)<1){return -l/2*(Math.sqrt(1-j*j)-1)+f}return l/2*(Math.sqrt(1-(j-=2)*j)+1)+f},easeInElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n}l||(l=m*0.3);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return -(k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l))+f},easeOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n}l||(l=m*0.3);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return k*Math.pow(2,-10*j)*Math.sin((j*m-o)*2*Math.PI/l)+n+f},easeInOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m/2)==2){return f+n}l||(l=m*0.3*1.5);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}if(j<1){return -0.5*k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)+f}return k*Math.pow(2,-10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)*0.5+n+f},easeInBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}return m*(j/=l)*j*((k+1)*j-k)+f},easeOutBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}return m*((j=j/l-1)*j*((k+1)*j+k)+1)+f},easeInOutBack:function(n,j,f,m,l,k){if(k==undefined){k=1.70158}if((j/=l/2)<1){return m/2*j*j*(((k*=1.525)+1)*j-k)+f}return m/2*((j-=2)*j*(((k*=1.525)+1)*j+k)+2)+f},easeInBounce:function(m,j,f,l,k){return l-p.easing.easeOutBounce(m,k-j,0,l,k)+f},easeOutBounce:function(m,j,f,l,k){return(j/=k)<1/2.75?l*7.5625*j*j+f:j<2/2.75?l*(7.5625*(j-=1.5/2.75)*j+0.75)+f:j<2.5/2.75?l*(7.5625*(j-=2.25/2.75)*j+0.9375)+f:l*(7.5625*(j-=2.625/2.75)*j+0.984375)+f},easeInOutBounce:function(m,j,f,l,k){if(j<k/2){return p.easing.easeInBounce(m,j*2,0,l,k)*0.5+f}return p.easing.easeOutBounce(m,j*2-k,0,l,k)*0.5+l*0.5+f}})}(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),l=["position","top","left"],m=a.effects.setMode(c,b.options.mode||"hide"),o=b.options.direction||"vertical";a.effects.save(c,l);c.show();var n=a.effects.createWrapper(c).css({overflow:"hidden"}),k=o=="vertical"?"height":"width";o=o=="vertical"?n.height():n.width();m=="show"&&n.css(k,0);var j={};j[k]=m=="show"?o:0;n.animate(j,b.duration,b.options.easing,function(){m=="hide"&&c.hide();a.effects.restore(c,l);a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);(function(){var u=this;var r=u._;var b=typeof StopIteration!=="undefined"?StopIteration:"__break__";var g=function(C){return C.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};var j=Array.prototype,A=Object.prototype;var s=j.slice,w=j.unshift,v=A.toString,p=A.hasOwnProperty,n=A.propertyIsEnumerable;var m=j.forEach,i=j.map,y=j.reduce,e=j.reduceRight,l=j.filter,a=j.every,x=j.some,t=j.indexOf,f=j.lastIndexOf,c=Array.isArray,z=Object.keys;var B=function(C){return new h(C)};if(typeof exports!=="undefined"){exports._=B}u._=B;B.VERSION="1.1.0";var d=B.forEach=function(I,G,F){try{if(m&&I.forEach===m){I.forEach(G,F)}else{if(B.isNumber(I.length)){for(var E=0,C=I.length;E<C;E++){G.call(F,I[E],E,I)}}else{for(var D in I){if(p.call(I,D)){G.call(F,I[D],D,I)}}}}}catch(H){if(H!=b){throw H}}return I};B.map=function(F,E,D){if(i&&F.map===i){return F.map(E,D)}var C=[];d(F,function(I,G,H){C.push(E.call(D,I,G,H))});return C};B.reduce=function(F,E,C,D){if(y&&F.reduce===y){if(D){E=B.bind(E,D)}return F.reduce(E,C)}d(F,function(I,G,H){C=E.call(D,C,I,G,H)});return C};B.reduceRight=function(F,E,C,D){if(e&&F.reduceRight===e){if(D){E=B.bind(E,D)}return F.reduceRight(E,C)}var G=B.clone(B.toArray(F)).reverse();return B.reduce(G,E,C,D)};B.detect=function(F,E,D){var C;d(F,function(I,G,H){if(E.call(D,I,G,H)){C=I;B.breakLoop()}});return C};B.filter=function(F,E,D){if(l&&F.filter===l){return F.filter(E,D)}var C=[];d(F,function(I,G,H){E.call(D,I,G,H)&&C.push(I)});return C};B.reject=function(F,E,D){var C=[];d(F,function(I,G,H){!E.call(D,I,G,H)&&C.push(I)});return C};B.every=function(F,E,D){E=E||B.identity;if(a&&F.every===a){return F.every(E,D)}var C=true;d(F,function(I,G,H){if(!(C=C&&E.call(D,I,G,H))){B.breakLoop()}});return C};B.some=function(F,E,D){E=E||B.identity;if(x&&F.some===x){return F.some(E,D)}var C=false;d(F,function(I,G,H){if(C=E.call(D,I,G,H)){B.breakLoop()}});return C};B.include=function(E,D){if(t&&E.indexOf===t){return E.indexOf(D)!=-1}var C=false;d(E,function(F){if(C=F===D){B.breakLoop()}});return C};B.invoke=function(D,E){var C=B.rest(arguments,2);return B.map(D,function(F){return(E?F[E]:F).apply(F,C)})};B.pluck=function(D,C){return B.map(D,function(E){return E[C]})};B.max=function(F,E,D){if(!E&&B.isArray(F)){return Math.max.apply(Math,F)}var C={computed:-Infinity};d(F,function(J,G,I){var H=E?E.call(D,J,G,I):J;H>=C.computed&&(C={value:J,computed:H})});return C.value};B.min=function(F,E,D){if(!E&&B.isArray(F)){return Math.min.apply(Math,F)}var C={computed:Infinity};d(F,function(J,G,I){var H=E?E.call(D,J,G,I):J;H<C.computed&&(C={value:J,computed:H})});return C.value};B.sortBy=function(E,D,C){return B.pluck(B.map(E,function(H,F,G){return{value:H,criteria:D.call(C,H,F,G)}}).sort(function(I,H){var G=I.criteria,F=H.criteria;return G<F?-1:G>F?1:0}),"value")};B.sortedIndex=function(H,G,E){E=E||B.identity;var C=0,F=H.length;while(C<F){var D=(C+F)>>1;E(H[D])<E(G)?C=D+1:F=D}return C};B.toArray=function(C){if(!C){return[]}if(C.toArray){return C.toArray()}if(B.isArray(C)){return C}if(B.isArguments(C)){return s.call(C)}return B.values(C)};B.size=function(C){return B.toArray(C).length};B.first=function(E,D,C){return D&&!C?s.call(E,0,D):E[0]};B.rest=function(E,C,D){return s.call(E,B.isUndefined(C)||D?1:C)};B.last=function(C){return C[C.length-1]};B.compact=function(C){return B.filter(C,function(D){return !!D})};B.flatten=function(C){return B.reduce(C,function(D,E){if(B.isArray(E)){return D.concat(B.flatten(E))}D.push(E);return D},[])};B.without=function(D){var C=B.rest(arguments);return B.filter(D,function(E){return !B.include(C,E)})};B.uniq=function(D,C){return B.reduce(D,function(E,G,F){if(0==F||(C===true?B.last(E)!=G:!B.include(E,G))){E.push(G)}return E},[])};B.intersect=function(D){var C=B.rest(arguments);return B.filter(B.uniq(D),function(E){return B.every(C,function(F){return B.indexOf(F,E)>=0})})};B.zip=function(){var C=B.toArray(arguments);var F=B.max(B.pluck(C,"length"));var E=new Array(F);for(var D=0;D<F;D++){E[D]=B.pluck(C,String(D))}return E};B.indexOf=function(F,E){if(t&&F.indexOf===t){return F.indexOf(E)}for(var D=0,C=F.length;D<C;D++){if(F[D]===E){return D}}return -1};B.lastIndexOf=function(E,D){if(f&&E.lastIndexOf===f){return E.lastIndexOf(D)}var C=E.length;while(C--){if(E[C]===D){return C}}return -1};B.range=function(C,I,D){var J=B.toArray(arguments);var H=J.length<=1;var C=H?0:J[0],I=H?J[0]:J[1],D=J[2]||1;var G=Math.ceil((I-C)/D);if(G<=0){return[]}var F=new Array(G);for(var E=C,K=0;true;E+=D){if((D>0?E-I:I-E)>=0){return F}F[K++]=E}};B.bind=function(D,E){var C=B.rest(arguments,2);return function(){return D.apply(E||{},C.concat(B.toArray(arguments)))}};B.bindAll=function(D){var C=B.rest(arguments);if(C.length==0){C=B.functions(D)}d(C,function(E){D[E]=B.bind(D[E],D)});return D};B.memoize=function(E,D){var C={};D=D||B.identity;return function(){var F=D.apply(this,arguments);return F in C?C[F]:(C[F]=E.apply(this,arguments))}};B.delay=function(D,E){var C=B.rest(arguments,2);return setTimeout(function(){return D.apply(D,C)},E)};B.defer=function(C){return B.delay.apply(B,[C,1].concat(B.rest(arguments)))};B.wrap=function(C,D){return function(){var E=[C].concat(B.toArray(arguments));return D.apply(D,E)}};B.compose=function(){var C=B.toArray(arguments);return function(){var D=B.toArray(arguments);for(var E=C.length-1;E>=0;E--){D=[C[E].apply(this,D)]}return D[0]}};B.keys=z||function(E){if(B.isArray(E)){return B.range(0,E.length)}var D=[];for(var C in E){if(p.call(E,C)){D.push(C)}}return D};B.values=function(C){return B.map(C,B.identity)};B.functions=function(C){return B.filter(B.keys(C),function(D){return B.isFunction(C[D])}).sort()};B.extend=function(C){d(B.rest(arguments),function(D){for(var E in D){C[E]=D[E]}});return C};B.clone=function(C){if(B.isArray(C)){return C.slice(0)}return B.extend({},C)};B.tap=function(D,C){C(D);return D};B.isEqual=function(D,C){if(D===C){return true}var G=typeof(D),I=typeof(C);if(G!=I){return false}if(D==C){return true}if((!D&&C)||(D&&!C)){return false}if(D.isEqual){return D.isEqual(C)}if(B.isDate(D)&&B.isDate(C)){return D.getTime()===C.getTime()}if(B.isNaN(D)&&B.isNaN(C)){return false}if(B.isRegExp(D)&&B.isRegExp(C)){return D.source===C.source&&D.global===C.global&&D.ignoreCase===C.ignoreCase&&D.multiline===C.multiline}if(G!=="object"){return false}if(D.length&&(D.length!==C.length)){return false}var E=B.keys(D),H=B.keys(C);if(E.length!=H.length){return false}for(var F in D){if(!(F in C)||!B.isEqual(D[F],C[F])){return false}}return true};B.isEmpty=function(D){if(B.isArray(D)||B.isString(D)){return D.length===0}for(var C in D){if(p.call(D,C)){return false}}return true};B.isElement=function(C){return !!(C&&C.nodeType==1)};B.isArray=c||function(C){return !!(C&&C.concat&&C.unshift&&!C.callee)};B.isArguments=function(C){return C&&C.callee};B.isFunction=function(C){return !!(C&&C.constructor&&C.call&&C.apply)};B.isString=function(C){return !!(C===""||(C&&C.charCodeAt&&C.substr))};B.isNumber=function(C){return(C===+C)||(v.call(C)==="[object Number]")};B.isBoolean=function(C){return C===true||C===false};B.isDate=function(C){return !!(C&&C.getTimezoneOffset&&C.setUTCFullYear)};B.isRegExp=function(C){return !!(C&&C.test&&C.exec&&(C.ignoreCase||C.ignoreCase===false))};B.isNaN=function(C){return B.isNumber(C)&&isNaN(C)};B.isNull=function(C){return C===null};B.isUndefined=function(C){return typeof C=="undefined"};B.noConflict=function(){u._=r;return this};B.identity=function(C){return C};B.times=function(F,E,D){for(var C=0;C<F;C++){E.call(D,C)}};B.breakLoop=function(){throw b};B.mixin=function(C){d(B.functions(C),function(D){q(D,B[D]=C[D])})};var k=0;B.uniqueId=function(C){var D=k++;return C?C+D:D};B.templateSettings={start:"<%",end:"%>",interpolate:/<%=(.+?)%>/g};B.template=function(F,E){var G=B.templateSettings;var D=new RegExp("'(?=[^"+G.end.substr(0,1)+"]*"+g(G.end)+")","g");var C=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj||{}){p.push('"+F.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(D,"").split("'").join("\\'").split("").join("'").replace(G.interpolate,"',$1,'").split(G.start).join("');").split(G.end).join("p.push('")+"');}return p.join('');");return E?C(E):C};B.each=B.forEach;B.foldl=B.inject=B.reduce;B.foldr=B.reduceRight;B.select=B.filter;B.all=B.every;B.any=B.some;B.contains=B.include;B.head=B.first;B.tail=B.rest;B.methods=B.functions;var h=function(C){this._wrapped=C};var o=function(D,C){return C?B(D).chain():D};var q=function(C,D){h.prototype[C]=function(){var E=B.toArray(arguments);w.call(E,this._wrapped);return o(D.apply(B,E),this._chain)}};B.mixin(B);d(["pop","push","reverse","shift","sort","splice","unshift"],function(C){var D=j[C];h.prototype[C]=function(){D.apply(this._wrapped,arguments);return o(this._wrapped,this._chain)}});d(["concat","join","slice"],function(C){var D=j[C];h.prototype[C]=function(){return o(D.apply(this._wrapped,arguments),this._chain)}});h.prototype.chain=function(){this._chain=true;return this};h.prototype.value=function(){return this._wrapped}})();(function(){jQuery.fn.autohide=function(a){var b=this;a=_.extend({clickable:null,onHide:null},a||{});b._autoignore=true;setTimeout(function(){delete b._autoignore},0);if(!b._autohider){b.forceHide=function(c){if(!c&&a.onHide){a.onHide()}b.hide();jQuery(document).unbind("click",b._autohider);jQuery(document).unbind("keypress",b._autohider);b._autohider=null;b.forceHide=null};b._autohider=function(c){if(b._autoignore){return}if(a.clickable&&(b[0]==c.target||_.include(jQuery(c.target).parents(),b[0]))){return}if(a.onHide&&!a.onHide(c)){return}b.forceHide(c)};jQuery(document).bind("click",this._autohider);jQuery(document).bind("keypress",this._autohider)}};jQuery.fn.acceptInput=function(b){var a={delay:1000,callback:null,className:"acceptInput",initialStateClassName:"acceptInput-awaitingActivity",typingStateClassName:"acceptInput-acceptingInput",inputClassName:"acceptInput-textField"};if(b){jQuery.extend(a,b)}this.editTimer=null;this.deny=function(){this.parent().addClass("stopAcceptingInput")};this.allow=function(){this.parent().removeClass("stopAcceptingInput")};this.each(function(d,e){if(jQuery(e).parent().hasClass(a.initialStateClassName)){return true}e=jQuery(e);var c=e.wrap('<span class="'+a.initialStateClassName+'"></span>');c=c.parent();var f=jQuery('<input type="text" class="'+a.inputClassName+'" style="display:none;" />').appendTo(c);f.bind("blur",function(){c.addClass(a.initialStateClassName).removeClass(a.typingStateClassName);f.hide();e.show()});f.bind("keyup",function(){var g=f.attr("value");e.text(g);if(a.changeCallBack){jQuery.fn.acceptInput.editTimer=setTimeout(a.changeCallBack,500)}});f.bind("keydown",function(){if(jQuery.fn.acceptInput.editTimer){clearTimeout(jQuery.fn.acceptInput.editTimer)}});c.bind("click",function(){if(c.hasClass("stopAcceptingInput")){return}if(c.hasClass(a.initialStateClassName)){var g=function(){c.addClass(a.initialStateClassName).removeClass(a.typingStateClassName)};jQuery(f).autohide({clickable:true,onHide:DV.jQuery.proxy(g,this)});e.hide();f.attr("value",e.text()).show()[0].focus();f[0].select();c.addClass(a.typingStateClassName).removeClass(a.initialStateClassName)}})});return this}}).call(this);(function(a){a.fn.placeholder=function(d){var e={message:"...",className:"placeholder",clearClassName:"show_cancel_search"};var b=a.extend({},e,d);var c=function(f){f.val(f.attr("placeholder")||b.message);f.addClass(b.className)};return this.each(function(){var f=a(this);if(f.attr("type")=="search"){return}f.bind("blur",function(){if(f.val()==""){c(f)}}).bind("focus",function(){if(f.val()==(f.attr("placeholder")||b.message)){f.val("")}f.removeClass(b.className)}).bind("keyup",function(){var g=f.val();if(g!=""&&g!=b.message){f.parent().addClass(b.clearClassName)}else{f.parent().removeClass(b.clearClassName)}});_.defer(function(){f.keyup().blur()})})}})(jQuery);window.console||(window.console={});console.log||(console.log=_.identity);window.DV=window.DV||{};DV.jQuery=jQuery.noConflict();DV.viewers=DV.viewers||{};DV.model=DV.model||{};DV.Annotation=function(a){this.position={top:a.top,left:a.left};this.dimensions={width:a.width,height:a.height};this.page=a.page;this.pageEl=a.pageEl;this.annotationContainerEl=a.annotationContainerEl;this.viewer=this.page.set.viewer;this.annotationEl=null;this.renderedHTML=a.renderedHTML;this.type=a.type;this.id=a.id;this.model=this.viewer.models.annotations.getAnnotation(this.id);this.state="collapsed";this.active=false;this.remove();this.add();if(a.active){this.viewer.helpers.setActiveAnnotationLimits(this);this.viewer.events.resetTracker();this.active=null;this.show();if(a.showEdit){this.showEdit()}}};DV.Annotation.prototype.add=function(){if(this.type==="page"){this.annotationEl=this.renderedHTML.insertBefore(this.annotationContainerEl)}else{if(this.page.annotations.length>0){for(var b=0,a=this.page.annotations.length;b<a;b++){if(this.page.annotations[b].id===this.id){return false}else{this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}}}else{this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}}};DV.Annotation.prototype.next=function(){this.hide.preventRemovalOfCoverClass=true;var a=this.viewer.models.annotations.getNextAnnotation(this.id);if(!a){return}this.page.set.showAnnotation({index:a.index,id:a.id,top:a.y1})};DV.Annotation.prototype.previous=function(){this.hide.preventRemovalOfCoverClass=true;var a=this.viewer.models.annotations.getPreviousAnnotation(this.id);if(!a){return}this.page.set.showAnnotation({index:a.index,id:a.id,top:a.y1})};DV.Annotation.prototype.show=function(a){if(this.viewer.activeAnnotation&&this.viewer.activeAnnotation.id!=this.id){this.viewer.activeAnnotation.hide()}this.viewer.annotationToLoadId=null;this.viewer.elements.window.addClass("DV-coverVisible");this.annotationEl.find("div.DV-annotationBG").css({display:"block",opacity:1});this.annotationEl.addClass("DV-activeAnnotation");this.page.activeAnnotation=this;this.viewer.activeAnnotation=this;this.viewer.helpers.addObserver("trackAnnotation");this.viewer.helpers.setActiveAnnotationInNav(this.id);this.active=true;this.pageEl.parent(".DV-set").addClass("DV-activePage");if(a&&a.edit){this.showEdit()}};DV.Annotation.prototype.hide=function(b){var a=parseInt(this.viewer.elements.currentPage.text(),10);if(this.type!=="page"){this.annotationEl.find("div.DV-annotationBG").css({opacity:0,display:"none"})}if(this.annotationEl.hasClass("DV-editing")){this.viewer.helpers.saveAnnotation({target:this.annotationEl},"onlyIfText")}this.annotationEl.removeClass("DV-editing DV-activeAnnotation");if(b===true){this.viewer.elements.window.removeClass("DV-coverVisible")}if(this.hide.preventRemovalOfCoverClass===false||!this.hide.preventRemovalOfCoverClass){this.viewer.elements.window.removeClass("DV-coverVisible");this.hide.preventRemovalOfCoverClass=false}this.page.activeAnnotation=null;this.viewer.activeAnnotation=null;this.viewer.helpers.removeObserver("trackAnnotation");this.viewer.pageSet.setActiveAnnotation(null);this.viewer.activeAnnotation=null;this.viewer.events.trackAnnotation.h=null;this.viewer.events.trackAnnotation.id=null;this.viewer.events.trackAnnotation.combined=null;this.viewer.helpers.setActiveAnnotationInNav();this.active=false;this.pageEl.parent(".DV-set").removeClass("DV-activePage");this.removeConnector(true)};DV.Annotation.prototype.toggle=function(b){if(this.viewer.activeAnnotation&&(this.viewer.activeAnnotation!=this)){this.viewer.activeAnnotation.hide()}if(this.type==="page"){return}var a=this.annotationEl.find("div.DV-annotationBG");this.annotationEl.toggleClass("DV-activeAnnotation");if(this.active==true){this.hide(true)}else{this.show()}};DV.Annotation.prototype.drawConnector=function(){if(this.active!=true){this.viewer.elements.window.addClass("DV-annotationActivated");this.annotationEl.addClass("DV-annotationHover")}};DV.Annotation.prototype.removeConnector=function(a){if(this.active!=true){this.viewer.elements.window.removeClass("DV-annotationActivated");this.annotationEl.removeClass("DV-annotationHover")}};DV.Annotation.prototype.showEdit=function(){this.annotationEl.addClass("DV-editing");this.viewer.$(".DV-annotationTitleInput",this.annotationEl).focus()};DV.Annotation.prototype.remove=function(){this.viewer.$("#DV-annotation-"+this.id).remove()};DV.DragReporter=function(d,a,c,b){this.viewer=d;this.dragClassName="DV-dragging";this.sensitivityY=1;this.sensitivityX=1;this.oldPageY=0;_.extend(this,b);this.dispatcher=c;this.toWatch=this.viewer.$(a);this.boundReporter=_.bind(this.mouseMoveReporter,this);this.boundMouseUpReporter=_.bind(this.mouseUpReporter,this);this.boundMouseDownReporter=_.bind(this.mouseDownReporter,this);this.boundEase=_.bind(this.boundEase,this);this.setBinding()};DV.DragReporter.prototype.shouldIgnore=function(b){if(!this.ignoreSelector){return false}var a=this.viewer.$(b.target);return a.parents().is(this.ignoreSelector)||a.is(this.ignoreSelector)};DV.DragReporter.prototype.mouseUpReporter=function(a){if(this.shouldIgnore(a)){return true}a.preventDefault();clearInterval(this.updateTimer);this.stop()};DV.DragReporter.prototype.oldPositionUpdater=function(){this.oldPageY=this.pageY};DV.DragReporter.prototype.stop=function(){this.toWatch.removeClass(this.dragClassName);this.toWatch.unbind("mousemove")};DV.DragReporter.prototype.setBinding=function(){this.toWatch.mouseup(this.boundMouseUpReporter);this.toWatch.mousedown(this.boundMouseDownReporter)};DV.DragReporter.prototype.unBind=function(){this.toWatch.unbind("mouseup",this.boundMouseUpReporter);this.toWatch.unbind("mousedown",this.boundMouseDownReporter)};DV.DragReporter.prototype.destroy=function(){this.unBind();this.toWatch=null};DV.DragReporter.prototype.mouseDownReporter=function(a){if(this.shouldIgnore(a)){return true}a.preventDefault();this.pageY=a.pageY;this.pageX=a.pageX;this.oldPageY=a.pageY;this.updateTimer=setInterval(_.bind(this.oldPositionUpdater,this),1200);this.toWatch.addClass(this.dragClassName);this.toWatch.mousemove(this.boundReporter)};DV.DragReporter.prototype.mouseMoveReporter=function(f){if(this.shouldIgnore(f)){return true}f.preventDefault();var b=Math.round(this.sensitivityX*(this.pageX-f.pageX));var a=Math.round(this.sensitivityY*(this.pageY-f.pageY));var d=(b>0)?"right":"left";var c=(a>0)?"down":"up";this.pageY=f.pageY;this.pageX=f.pageX;if(a===0&&b===0){return}this.dispatcher({event:f,deltaX:b,deltaY:a,directionX:d,directionY:c})};DV.Elements=function(a){this._viewer=a;_.each(DV.Schema.elements,_.bind(function(b){this.getElement(b)},this))};DV.Elements.prototype.getElement=function(b,a){this[b.name]=this._viewer.$(b.query)};DV.History=function(a){this.viewer=a;DV.History.count++;this.URL_CHECK_INTERVAL=500;this.USE_IFRAME=jQuery.browser.msie&&jQuery.browser.version<8;this.handlers=[];this.defaultCallback=null;this.hash=window.location.hash;_.bindAll(this,"checkURL");if(DV.History.count>1){return}DV.jQuery(_.bind(function(){if(this.USE_IFRAME){this.iframe=DV.jQuery('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow}if("onhashchange" in window){window.onhashchange=this.checkURL}else{setInterval(this.checkURL,this.URL_CHECK_INTERVAL)}},this))};DV.History.count=0;DV.History.prototype={register:function(a,b){this.handlers.push({matcher:a,callback:b})},save:function(a){if(DV.History.count>1){return}window.location.hash=this.hash=(a?"#"+a:"");if(this.USE_IFRAME&&(this.iframe&&(this.hash!=this.iframe.location.hash))){this.iframe.document.open().close();this.iframe.location.hash=this.hash}},checkURL:function(){if(DV.History.count>1){return}try{var b=(this.USE_IFRAME?this.iframe:window).location.hash}catch(a){}if(!b||b==this.hash||"#"+b==this.hash||b==decodeURIComponent(this.hash)){return false}if(this.USE_IFRAME){window.location.hash=b}this.loadURL(true)},loadURL:function(c){var d=this.hash=window.location.hash;for(var b=this.handlers.length-1;b>=0;b--){var a=d.match(this.handlers[b].matcher);if(a){if(c===true){this.handlers[b].callback.apply(this.handlers[b].callback,a.slice(1,a.length))}return true}}if(this.defaultCallback!=null&&c===true){this.defaultCallback()}else{return false}}};DV.Page=function(d,c){this.viewer=d;this.index=c.index;for(var b in c){this[b]=c[b]}this.el=this.viewer.$(this.el);this.parent=this.el.parent();this.pageNumberEl=this.el.find("span.DV-pageNumber");this.pageInsertEl=this.el.find(".DV-pageNoteInsert");this.removedOverlayEl=this.el.find(".DV-removeOverlay");this.pageImageEl=this.getPageImage();this.pageEl=this.el.find("div.DV-page");this.annotationContainerEl=this.el.find("div.DV-annotations");this.coverEl=this.el.find("div.DV-cover");this.loadTimer=null;this.hasLayerPage=false;this.hasLayerRegional=false;this.imgSource=null;this.offset=null;this.pageNumber=null;this.zoom=1;this.annotations=[];this.activeAnnotation=null;var a=this.viewer.models;this.model_document=a.document;this.model_pages=a.pages;this.model_annotations=a.annotations;this.model_chapters=a.chapters};DV.Page.prototype.setPageImage=function(){this.pageImageEl=this.getPageImage()};DV.Page.prototype.getPageImage=function(){return this.el.find("img.DV-pageImage")};DV.Page.prototype.getOffset=function(){return this.model_document.offsets[this.index]};DV.Page.prototype.getPageNoteHeight=function(){return this.model_pages.pageNoteHeights[this.index]};DV.Page.prototype.draw=function(d){if(this.index===d.index&&!d.force&&this.imgSource==this.model_pages.imageURL(this.index)){return}this.index=(d.force===true)?this.index:d.index;var h=[];var f=this.model_pages.imageURL(this.index);if(this.imgSource!=f){this.imgSource=f;this.loadImage()}this.sizeImage();this.position();if(this.pageNumber!=this.index+1||d.forceAnnotationRedraw===true){for(var c=0;c<this.annotations.length;c++){this.annotations[c].remove();delete this.annotations[c];this.hasLayerRegional=false;this.hasLayerPage=false}this.annotations=[];var e=this.model_annotations.byPage[this.index];if(e){for(var c=0;c<e.length;c++){var b=e[c];if(b.id===this.viewer.annotationToLoadId){var g=true;if(b.id===this.viewer.annotationToLoadEdit){d.edit=true}this.viewer.helpers.jump(this.index,(b.y1||0)-37)}else{var g=false}if(b.type=="page"){this.hasLayerPage=true}else{if(b.type=="regional"){this.hasLayerRegional=true}}var a=new DV.Annotation({renderedHTML:this.viewer.$(".DV-allAnnotations .DV-annotation[rel=aid-"+b.id+"]").clone().attr("id","DV-annotation-"+b.id),id:b.id,page:this,pageEl:this.pageEl,annotationContainerEl:this.annotationContainerEl,pageNumber:this.pageNumber,state:"collapsed",top:b.y1,left:b.x1,width:b.x1+b.x2,height:b.y1+b.y2,active:g,showEdit:d.edit,type:b.type});this.annotations.push(a)}}this.pageInsertEl.toggleClass("visible",!this.hasLayerPage);this.renderMeta({pageNumber:this.index+1});this.drawRemoveOverlay()}this.setPageType()};DV.Page.prototype.drawRemoveOverlay=function(){this.removedOverlayEl.toggleClass("visible",!!this.viewer.models.removedPages[this.index+1])};DV.Page.prototype.setPageType=function(){if(this.annotations.length>0){if(this.hasLayerPage===true){this.el.addClass("DV-layer-page")}if(this.hasLayerRegional===true){this.el.addClass("DV-layer-page")}}else{this.el.removeClass("DV-layer-page DV-layer-regional")}};DV.Page.prototype.position=function(a){this.el.css({top:this.model_document.offsets[this.index]});this.offset=this.getOffset()};DV.Page.prototype.renderMeta=function(a){this.pageNumberEl.text("p. "+a.pageNumber);this.pageNumber=a.pageNumber};DV.Page.prototype.loadImage=function(c){if(this.loadTimer){clearTimeout(this.loadTimer);delete this.loadTimer}this.el.removeClass("DV-loaded").addClass("DV-loading");var a=this.model_pages;var b=this.viewer.$(new Image());var d=this;var e=function(){if(d.loadTimer){clearTimeout(d.loadTimer);delete d.loadTimer}b.bind("load readystatechange",function(g){if(this.complete||(this.readyState=="complete"&&g.type=="readystatechange")){if(b[0].src!=d._currentSrc){return}a.updateHeight(b[0],d.index);d.drawImage(b[0].src);clearTimeout(d.loadTimer);delete d.loadTimer}});var f=d.model_pages.imageURL(d.index);d._currentSrc=f;b[0].src=f};this.loadTimer=setTimeout(e,150);this.viewer.pageSet.redraw()};DV.Page.prototype.sizeImage=function(){var b=this.model_pages.width;var a=this.model_pages.getPageHeight(this.index);this.coverEl.css({width:b,height:a});this.pageImageEl.css({width:b,height:a});this.el.css({height:a,width:b});this.pageEl.css({height:a,width:b})};DV.Page.prototype.drawImage=function(b){var a=this.model_pages.getPageHeight(this.index);if(b==this.pageImageEl.attr("src")&&a==this.pageImageEl.attr("height")){this.el.addClass("DV-loaded").removeClass("DV-loading");return}this.pageImageEl.replaceWith('<img width="'+this.model_pages.width+'" height="'+a+'" class="DV-pageImage" src="'+b+'" />');this.setPageImage();this.sizeImage();this.el.addClass("DV-loaded").removeClass("DV-loading")};DV.PageSet=function(a){this.currentPage=null;this.pages={};this.viewer=a;this.zoomText()};DV.PageSet.prototype.execute=function(a,b){this.pages.each(function(c){c[a].apply(c,b)})};DV.PageSet.prototype.buildPages=function(b){b=b||{};var a=this.getPages();for(var c=0;c<a.length;c++){var d=a[c];d.set=this;d.index=c;this.pages[d.label]=new DV.Page(this.viewer,d);if(d.currentPage==true){this.currentPage=this.pages[d.label]}}this.viewer.models.annotations.renderAnnotations()};DV.PageSet.prototype.getPages=function(){var a=[];this.viewer.elements.sets.each(function(d,c){var b=(d==0)?true:false;a.push({label:"p"+d,el:c,index:d,pageNumber:d+1,currentPage:b})});return a};DV.PageSet.prototype.reflowPages=function(){this.viewer.models.pages.resize();this.viewer.helpers.setActiveAnnotationLimits();this.redraw(false,true)};DV.PageSet.prototype.simpleReflowPages=function(){this.viewer.helpers.setActiveAnnotationLimits();this.redraw(false,false)};DV.PageSet.prototype.cleanUp=function(){if(this.viewer.activeAnnotation){this.viewer.activeAnnotation.hide(true)}};DV.PageSet.prototype.zoom=function(d){if(this.viewer.models.document.zoomLevel===d.zoomLevel){return}var e=this.viewer.models.document.currentIndex();var g=e-1;var c=this.viewer.models.document.offsets[e];var j=this.viewer.models.document.zoomLevel*1;var b=this.viewer.elements.window.scrollTop();this.viewer.models.document.zoom(d.zoomLevel);var h=(parseInt(b,10)>parseInt(c,10))?b-c:c-b;var a=h/this.viewer.models.pages.height;this.reflowPages();this.zoomText();if(this.viewer.activeAnnotation!=null){var f={index:this.viewer.models.document.currentIndex(),top:this.viewer.activeAnnotation.y1,id:this.viewer.activeAnnotation.id};this.viewer.activeAnnotation=null;this.showAnnotation(f);this.viewer.helpers.setActiveAnnotationLimits(this.viewer.activeAnnotation)}else{var i=Math.round(this.viewer.models.pages.height*a);this.viewer.helpers.jump(this.viewer.models.document.currentIndex(),i)}};DV.PageSet.prototype.zoomText=function(){var b=this.viewer.models.pages.DEFAULT_PADDING;var a=this.viewer.models.pages.zoomLevel;this.viewer.$(".DV-textContents").width(a-b);this.viewer.$(".DV-textPage").width(a);if(this.viewer.options.zoom=="auto"){b=this.viewer.models.pages.REDUCED_PADDING}this.viewer.elements.collection.css({width:a+b})};DV.PageSet.prototype.draw=function(a){for(var c=0,b=a.length;c<b;c++){var d=this.pages[a[c].label];if(d){d.draw({index:a[c].index,pageNumber:a[c].index+1})}}};DV.PageSet.prototype.redraw=function(a,c){var b=this.viewer.models.document.currentIndex();if(this.pages.p0){this.pages.p0.draw({force:true,forceAnnotationRedraw:c})}if(this.pages.p1){this.pages.p1.draw({force:true,forceAnnotationRedraw:c})}if(this.pages.p2){this.pages.p2.draw({force:true,forceAnnotationRedraw:c})}if(c&&this.viewer.activeAnnotation){this.viewer.helpers.jump(this.viewer.activeAnnotation.page.index,this.viewer.activeAnnotation.position.top-37)}};DV.PageSet.prototype.setActiveAnnotation=function(b,a){this.viewer.annotationToLoadId=b;this.viewer.annotationToLoadEdit=a?b:null};DV.PageSet.prototype.showAnnotation=function(d,b){b=b||{};if(this.viewer.state==="ViewAnnotation"){var f=this.viewer.$(".DV-allAnnotations div[rel=aid-"+d.id+"]")[0].offsetTop;this.viewer.elements.window.scrollTop(f+10,"fast");this.viewer.helpers.setActiveAnnotationInNav(d.id);this.viewer.activeAnnotationId=d.id;return}else{this.viewer.helpers.removeObserver("trackAnnotation");this.viewer.activeAnnotationId=null;if(this.viewer.activeAnnotation!=null){this.viewer.activeAnnotation.hide()}this.setActiveAnnotation(d.id,b.edit);var e=this.viewer.models.annotations.byId[d.id].type=="page";var a=e?-7:36;var f=(d.top*this.viewer.models.pages.zoomFactor())-a;for(var c=0;c<=2;c++){if(this.pages["p"+c]){for(var g=0;g<this.pages["p"+c].annotations.length;g++){if(this.pages["p"+c].annotations[g].id===d.id){this.viewer.helpers.jump(d.index,f);this.pages["p"+c].annotations[g].show(b);return}}}}this.viewer.helpers.jump(d.index,f)}};DV.Thumbnails=function(a){this.currentIndex=0;this.zoomLevel=null;this.scrollTimer=null;this.imageUrl=a.schema.document.resources.page.image.replace(/\{size\}/,"small");this.pageCount=a.schema.document.pages;this.viewer=a;this.resizeId=_.uniqueId();this.sizes={"0":{w:60,h:75},"1":{w:90,h:112},"2":{w:120,h:150},"3":{w:150,h:188},"4":{w:180,h:225}};_.bindAll(this,"lazyloadThumbnails","loadThumbnails")};DV.Thumbnails.prototype.render=function(){this.el=this.viewer.$(".DV-thumbnails");this.getCurrentIndex();this.getZoom();if(this.pageCount<=100||this.currentIndex>=100){this.buildThumbnails(1,this.pageCount)}else{this.buildThumbnails(1,100);_.delay(_.bind(this.buildThumbnails,this,101,this.pageCount),100)}this.setZoom();this.viewer.elements.window.unbind("scroll.thumbnails").bind("scroll.thumbnails",this.lazyloadThumbnails);var a="resize.thumbnails-"+this.resizeId;DV.jQuery(window).unbind(a).bind(a,this.lazyloadThumbnails)};DV.Thumbnails.prototype.buildThumbnails=function(b,a){if(b==1){this.el.empty()}var c=JST.thumbnails({page:b,endPage:a,zoom:this.zoomLevel,imageUrl:this.imageUrl});this.el.html(this.el.html()+c);this.highlightCurrentPage();_.defer(this.loadThumbnails)};DV.Thumbnails.prototype.getCurrentIndex=function(){this.currentIndex=this.viewer.models.document.currentIndex()};DV.Thumbnails.prototype.highlightCurrentPage=function(){this.currentIndex=this.viewer.models.document.currentIndex();this.viewer.$(".DV-thumbnail.DV-selected").removeClass("DV-selected");var b=this.viewer.$(".DV-thumbnail:eq("+this.currentIndex+")");if(b.length){b.addClass("DV-selected");var a=this.viewer.$(".DV-pages");a.scrollTop(a.scrollTop()+b.position().top-12)}};DV.Thumbnails.prototype.setZoom=function(b){this.getZoom(b);var a=this.sizes[this.zoomLevel];this.viewer.$(".DV-hasHeight").each(function(c){var d=a.w/this.width;DV.jQuery(this).css({height:this.height*d})});this.viewer.$(".DV-hasWidth").each(function(c){var d=a.h/this.height;var e=DV.jQuery(this);e.add(e.prev(".DV-thumbnail-shadow")).css({width:this.width*d})});this.el[0].className=this.el[0].className.replace(/DV-zoom-\d\s*/,"");this.el.addClass("DV-zoom-"+this.zoomLevel)};DV.Thumbnails.prototype.getZoom=function(a){if(a!=null){return this.zoomLevel=_.indexOf(this.viewer.models.document.ZOOM_RANGES,a)}else{return this.zoomLevel=this.viewer.slider.slider("value")}};DV.Thumbnails.prototype.setImageSize=function(f,g){var c=this.sizes[this.zoomLevel];var d=c.w/f.width;var a=f.height*d;if(Math.abs(c.h-a)>10||(/DV-has/).test(g[0].className)){if(a<c.h){g.addClass("DV-hasHeight").css({height:a})}else{var b=a/c.h;var e=c.w/b;g.add(g.prev(".DV-thumbnail-shadow")).addClass("DV-hasWidth").css({width:e})}}g.attr({src:f.src})};DV.Thumbnails.prototype.lazyloadThumbnails=function(){if(this.viewer.state!="ViewThumbnails"){return}if(this.scrollTimer){clearTimeout(this.scrollTimer)}this.scrollTimer=setTimeout(this.loadThumbnails,100)};DV.Thumbnails.prototype.loadThumbnails=function(){var e=this.viewer;var b=e.$(".DV-thumbnails").width();var k=e.elements.window.height();var d=e.elements.window.scrollTop();var a=d+k;var f=e.$(".DV-thumbnail:first-child");var c=f.outerHeight(true);var h=f.outerWidth(true);var i=Math.floor(b/h);var g=Math.floor(d/c*i);var j=Math.ceil(a/c*i);g-=(g%i)+1;j+=i-(j%i);this.loadImages(g,j)};DV.Thumbnails.prototype.loadImages=function(e,c){var d=this;var f=this.viewer;var b=e>0?":gt("+e+")":"";var a=c<=this.pageCount?":lt("+c+")":"";f.$(".DV-thumbnail"+a+b).each(function(g){var h=f.$(this);if(!h.attr("src")){var k=f.$(".DV-thumbnail-image",h);var j=new Image();DV.jQuery(j).bind("load",_.bind(d.setImageSize,d,j,k)).attr({src:k.attr("data-src")})}})};DV.Schema=function(){this.models={};this.views={};this.states={};this.helpers={};this.events={};this.elements={};this.text={};this.data={zoomLevel:700,pageWidthPadding:20,additionalPaddingOnPage:30,state:{page:{previous:0,current:0,next:1}}}};DV.Schema.prototype.importCanonicalDocument=function(a){_.uniqueId();a.sections=_.sortBy(a.sections||[],function(b){return b.page});a.annotations=a.annotations||[];a.canonicalURL=a.canonical_url;this.document=DV.jQuery.extend(true,{},a);this.data.title=a.title;this.data.totalPages=a.pages;this.data.totalAnnotations=a.annotations.length;this.data.sections=a.sections;this.data.chapters=[];this.data.annotationsById={};this.data.annotationsByPage={};_.each(a.annotations,DV.jQuery.proxy(this.loadAnnotation,this))};DV.Schema.prototype.loadAnnotation=function(b){if(b.id){b.server_id=b.id}var a=b.page-1;b.id=b.id||_.uniqueId();b.title=b.title||"Untitled Note";b.text=b.content||"";b.access=b.access||"public";b.type=b.location&&b.location.image?"region":"page";if(b.type==="region"){var e=DV.jQuery.map(b.location.image.split(","),function(g,f){return parseInt(g,10)});b.y1=e[0];b.x2=e[1];b.y2=e[2];b.x1=e[3]}else{if(b.type==="page"){b.y1=0;b.x2=0;b.y2=0;b.x1=0}}this.data.annotationsById[b.id]=b;var d=this.data.annotationsByPage[a]=this.data.annotationsByPage[a]||[];var c=_.sortedIndex(d,b,function(f){return f.y1});d.splice(c,0,b);return b};DV.Schema.elements=[{name:"browserDocument",query:document},{name:"browserWindow",query:window},{name:"header",query:"div.DV-header"},{name:"viewer",query:"div.DV-docViewer"},{name:"window",query:"div.DV-pages"},{name:"sets",query:"div.DV-set"},{name:"pages",query:"div.DV-page"},{name:"metas",query:"div.DV-pageMeta"},{name:"bar",query:"div.DV-bar"},{name:"currentPage",query:"span.DV-currentPage"},{name:"well",query:"div.DV-well"},{name:"collection",query:"div.DV-pageCollection"},{name:"annotations",query:"div.DV-allAnnotations"},{name:"navigation",query:"div.DV-navigation"},{name:"chaptersContainer",query:"div.DV-chaptersContainer"},{name:"searchInput",query:"input.DV-searchInput"},{name:"textCurrentPage",query:"span.DV-textCurrentPage"},{name:"textContents",query:".DV-textContents"},{name:"coverPages",query:"div.DV-cover"},{name:"fullscreen",query:"div.DV-fullscreen"}];DV.model.Annotations=function(a){this.LEFT_MARGIN=25;this.PAGE_NOTE_FUDGE=26;this.viewer=a;this.offsetsAdjustments=[];this.offsetAdjustmentSum=0;this.saveCallbacks=[];this.deleteCallbacks=[];this.byId=this.viewer.schema.data.annotationsById;this.byPage=this.viewer.schema.data.annotationsByPage;this.bySortOrder=this.sortAnnotations()};DV.model.Annotations.prototype={render:function(e){var c=this.viewer.models.document;var d=this.viewer.models.pages;var i=d.zoomFactor();var j=e;var b,a,g,f;if(j.type==="page"){b=a=g=f=0;j.top=0}else{g=Math.round(j.y1*i);f=Math.round(j.y2*i);if(b<this.LEFT_MARGIN){b=this.LEFT_MARGIN}b=Math.round(j.x1*i);a=Math.round(j.x2*i);j.top=g-6}j.width=d.width;j.pageNumber=j.page;j.bgWidth=j.width;j.bWidth=j.width-66;j.excerptWidth=(a-b)-10;j.excerptMarginLeft=b-18;j.excerptLeft=b-25;j.excerptHeight=f-g;j.index=j.page-1;j.image=d.imageURL(j.index);j.imageLeft=b;j.imageTop=g+1;j.tabTop=(g<35?35-g:0)+8;j.imageWidth=d.width;j.imageHeight=Math.round(d.height*i);j.regionLeft=b;j.regionWidth=a-b;j.regionHeight=f-g;j.excerptDSHeight=j.excerptHeight-6;j.DSOffset=3;j.orderClass="";j.options=this.viewer.options;if(j.position==1){j.orderClass+=" DV-firstAnnotation"}if(j.position==this.bySortOrder.length){j.orderClass+=" DV-lastAnnotation"}var h=(j.type==="page")?"pageAnnotation":"annotation";return JST[h](j)},sortAnnotations:function(){return this.bySortOrder=_.sortBy(_.values(this.byId),function(a){return a.page*10000+a.y1})},renderAnnotations:function(){for(var b=0;b<this.bySortOrder.length;b++){var a=this.bySortOrder[b];a.of=_.indexOf(this.byPage[a.page-1],a);a.position=b+1;a.html=this.render(a)}this.renderAnnotationsByIndex()},renderAnnotationsByIndex:function(){var b=_.map(this.bySortOrder,function(c){return c.html});var a=b.join("").replace(/id="DV-annotation-(\d+)"/g,function(c,d){return'id="DV-listAnnotation-'+d+'" rel="aid-'+d+'"'});this.viewer.$("div.DV-allAnnotations").html(a);this.renderAnnotationsByIndex.rendered=true;this.renderAnnotationsByIndex.zoomLevel=this.zoomLevel;this.updateAnnotationOffsets()},refreshAnnotation:function(a){var b=this.viewer;b.$("#DV-annotation-"+a.id+", #DV-listAnnotation-"+a.id).each(function(){b.$(".DV-annotationTitleInput",this).val(a.title);b.$(".DV-annotationTitle",this).text(a.title);b.$(".DV-annotationTextArea",this).val(a.text);b.$(".DV-annotationBody",this).html(a.text)})},removeAnnotation:function(b){delete this.byId[b.id];var a=b.page-1;this.byPage[a]=_.without(this.byPage[a],b);this.sortAnnotations();this.viewer.$("#DV-annotation-"+b.id+", #DV-listAnnotation-"+b.id).remove();this.viewer.api.redraw(true);if(_.isEmpty(this.byId)){this.viewer.open("ViewDocument")}},updateAnnotationOffsets:function(){this.offsetsAdjustments=[];this.offsetAdjustmentSum=0;var a=this.viewer.models.document;var b=this.viewer.$("div.DV-allAnnotations");var g=b.find(".DV-pageNote");var c=this.viewer.models.pages.pageNoteHeights;var f=this;if(this.viewer.$("div.DV-docViewer").hasClass("DV-viewAnnotations")==false){b.addClass("DV-getHeights")}var h=[];_.each(_.select(this.bySortOrder,function(i){return i.type=="page"}),function(l,k){l.el=g[k];h[l.pageNumber]=l});for(var d=0,e=a.totalPages;d<=e;d++){c[d]=0;if(h[d]){var j=(this.viewer.$(h[d].el).height()+this.PAGE_NOTE_FUDGE);c[d-1]=j;this.offsetAdjustmentSum+=j}this.offsetsAdjustments[d]=this.offsetAdjustmentSum}b.removeClass("DV-getHeights")},fireSaveCallbacks:function(a){_.each(this.saveCallbacks,function(b){b(a)})},fireDeleteCallbacks:function(a){_.each(this.deleteCallbacks,function(b){b(a)})},getAnnotations:function(a){return this.byPage[a]},getFirstAnnotation:function(){return _.first(this.bySortOrder)},getNextAnnotation:function(a){var b=this.byId[a];return this.bySortOrder[_.indexOf(this.bySortOrder,b)+1]},getPreviousAnnotation:function(a){var b=this.byId[a];return this.bySortOrder[_.indexOf(this.bySortOrder,b)-1]},getAnnotation:function(a){if(a.id){return this.byId[a.id]}if(a.index&&!a.id){throw new Error("looked up an annotation without an id")}return this.byId[a]}};DV.model.Chapters=function(a){this.viewer=a;this.loadChapters()};DV.model.Chapters.prototype={loadChapters:function(){var g=this.viewer.schema.data.sections;var c=this.chapters=this.viewer.schema.data.chapters=[];_.each(g,function(h){h.id||(h.id=_.uniqueId())});var e=0;for(var b=0,a=this.viewer.schema.data.totalPages;b<a;b++){var d=g[e];var f=g[e+1];if(f&&(b>=(f.page-1))){e+=1;d=f}if(d){c[b]=d.id}}},getChapterId:function(a){return this.chapters[a]},getChapterPosition:function(c){for(var b=0,a=this.chapters.length;b<a;b++){if(this.chapters[b]===c){return b}}}};DV.model.Document=function(d){this.viewer=d;this.currentPageIndex=0;this.offsets=[];this.baseHeightsPortion=[];this.baseHeightsPortionOffsets=[];this.paddedOffsets=[];this.totalDocumentHeight=0;this.totalPages=0;this.additionalPaddingOnPage=0;this.ZOOM_RANGES=[500,700,800,900,1000];var c=this.viewer.schema.data;this.state=c.state;this.baseImageURL=c.baseImageURL;this.canonicalURL=c.canonicalURL;this.additionalPaddingOnPage=c.additionalPaddingOnPage;this.pageWidthPadding=c.pageWidthPadding;this.totalPages=c.totalPages;var b=this.zoomLevel=this.viewer.options.zoom||c.zoomLevel;if(b=="auto"){this.zoomLevel=c.zoomLevel}var a=_.last(this.ZOOM_RANGES);if(this.zoomLevel>a){this.zoomLevel=a}};DV.model.Document.prototype={setPageIndex:function(a){this.currentPageIndex=a;this.viewer.elements.currentPage.text(this.currentPage());this.viewer.helpers.setActiveChapter(this.viewer.models.chapters.getChapterId(a));return a},currentPage:function(){return this.currentPageIndex+1},currentIndex:function(){return this.currentPageIndex},nextPage:function(){var a=this.currentIndex()+1;if(a>=this.totalPages){return this.currentIndex()}return this.setPageIndex(a)},previousPage:function(){var a=this.currentIndex()-1;if(a<0){return this.currentIndex()}return this.setPageIndex(a)},zoom:function(b,a){if(this.zoomLevel!=b||a===true){this.zoomLevel=b;this.viewer.models.pages.resize(this.zoomLevel);this.viewer.models.annotations.renderAnnotations();this.computeOffsets()}},computeOffsets:function(){var m=this.viewer.models.annotations;var j=0;var f=0;var e=this.totalPages;var k=0;var a=this.viewer.elements.window[0].scrollTop;for(var c=0;c<e;c++){if(m.offsetsAdjustments[c]){f=m.offsetsAdjustments[c]}var b=this.viewer.models.pages.getPageHeight(c);var g=this.offsets[c]||0;var d=this.offsets[c]=f+j;if((g!==d)&&(d<a)){var l=d-g-k;a+=l;k+=l}this.baseHeightsPortion[c]=Math.round((b+this.additionalPaddingOnPage)/3);this.baseHeightsPortionOffsets[c]=(c==0)?0:d-this.baseHeightsPortion[c];j+=(b+this.additionalPaddingOnPage)}if(j!=this.totalDocumentHeight){k=(this.totalDocumentHeight!=0)?k:j-this.totalDocumentHeight;this.viewer.helpers.setDocHeight(j,k);this.totalDocumentHeight=j}},getOffset:function(a){return this.offsets[a]},resetRemovedPages:function(){this.viewer.models.removedPages={};this.redrawRemovedPages()},addPageToRemovedPages:function(a){this.viewer.models.removedPages[a]=true;this.redrawRemovedPages()},removePageFromRemovedPages:function(a){this.viewer.models.removedPages[a]=false;this.redrawRemovedPages()},redrawRemovedPages:function(){_.each(this.viewer.pageSet.pages,function(a){a.drawRemoveOverlay()})},removePages:function(c,a,b){b=b||{};$.ajax({url:"/documents/"+c+"/remove_pages",type:"POST",data:{pages:a},dataType:"json",success:function(d){if(b.success){b.success(c,d)}},error:_.bind(function(d){this._handleError(model,b.error,null,d)},this)})}};DV.model.Pages=function(a){this.viewer=a;this.averageHeight=0;this.pageHeights=[];this.pageNoteHeights=[];this.BASE_WIDTH=700;this.BASE_HEIGHT=906;this.SCALE_FACTORS={"500":0.714,"700":1,"800":0.8,"900":0.9,"1000":1};this.DEFAULT_PADDING=100;this.REDUCED_PADDING=44;this.zoomLevel=this.viewer.models.document.zoomLevel;this.baseWidth=this.BASE_WIDTH;this.baseHeight=this.BASE_HEIGHT;this.width=this.zoomLevel;this.height=this.baseHeight*this.zoomFactor();this.numPagesLoaded=0};DV.model.Pages.prototype={imageURL:function(c){var b=this.viewer.schema.document.resources.page.image;var d=this.zoomLevel>this.BASE_WIDTH?"large":"normal";var a=c+1;if(this.viewer.schema.document.resources.page.zeropad){a=this.zeroPad(a,5)}b=b.replace(/\{size\}/,d);b=b.replace(/\{page\}/,a);return b},zeroPad:function(b,c){var a=b.toString();while(a.length<c){a="0"+a}return a},zoomFactor:function(){return this.zoomLevel/this.BASE_WIDTH},resize:function(d){var b=this.viewer.models.pages.DEFAULT_PADDING;if(d){if(d==this.zoomLevel){return}var a=this.zoomFactor();this.zoomLevel=d||this.zoomLevel;var c=this.zoomFactor()/a;this.width=Math.round(this.baseWidth*this.zoomFactor());this.height=Math.round(this.height*c);this.averageHeight=Math.round(this.averageHeight*c)}this.viewer.elements.sets.width(this.zoomLevel);this.viewer.elements.collection.css({width:this.width+b});this.viewer.$(".DV-textContents").css({"font-size":this.zoomLevel*0.02+"px"})},updateHeight:function(d,b){var c=this.getPageHeight(b);var a=d.height*(this.zoomLevel>this.BASE_WIDTH?0.7:1);this.setPageHeight(b,a);this.averageHeight=((this.averageHeight*this.numPagesLoaded)+d.height)/(this.numPagesLoaded+1);this.numPagesLoaded+=1;if(c===d.height){return}this.viewer.models.document.computeOffsets();this.viewer.pageSet.simpleReflowPages()},setPageHeight:function(a,b){this.pageHeights[a]=Math.round(b)},getPageHeight:function(a){var b=this.pageHeights[a];return Math.round(b?b*this.zoomFactor():this.height)}};DV.Schema.events={zoom:function(c){var b=this.viewer;var a=function(){b.pageSet.zoom({zoomLevel:c});var d=b.models.document.ZOOM_RANGES;b.dragReporter.sensitivity=d[d.length-1]==c?1.5:1;b.notifyChangedState();return true};b.confirmStateChange?b.confirmStateChange(a):a()},drawPages:function(){if(this.viewer.state!="ViewDocument"){return}var g=this.models.document;var e=this.elements.window[0];var c=g.baseHeightsPortionOffsets;var a=this.viewer.scrollPosition=e.scrollTop;var i=a+(this.viewer.$(e).height()/3);var d=_.sortedIndex(c,a);var h=_.sortedIndex(c,i);if(c[d]==a){d++&&h++}var b=this.helpers.sortPages(h-1);var f=g.totalPages;if(g.currentPage()!=d){g.setPageIndex(d-1)}this.drawPageAt(b,h-1)},drawPageAt:function(e,b){var d=b==0;var c=b==this.models.document.totalPages-1;if(d){b+=1}var a=[{label:e[0],index:b-1},{label:e[1],index:b},{label:e[2],index:b+1}];if(c){a.pop()}a[d?0:a.length-1].currentPage=true;this.viewer.pageSet.draw(a)},check:function(){var b=this.viewer;if(b.busy===false){b.busy=true;for(var a=0;a<this.viewer.observers.length;a++){this[b.observers[a]].call(this)}b.busy=false}},loadText:function(a,f){a=(!a)?this.models.document.currentIndex():parseInt(a,10);this._previousTextIndex=a;var d=this;var b=function(i){var h=parseInt(a,10)+1;d.viewer.$(".DV-textContents").replaceWith('<pre class="DV-textContents">'+i+"</pre>");d.elements.currentPage.text(h);d.elements.textCurrentPage.text("p. "+(h));d.models.document.setPageIndex(a);d.helpers.setActiveChapter(d.models.chapters.getChapterId(a));if(d.viewer.openEditor=="editText"&&!(h in d.models.document.originalPageText)){d.models.document.originalPageText[h]=i}if(d.viewer.openEditor=="editText"){d.viewer.$(".DV-textContents").attr("contentEditable",true).addClass("DV-editing")}if(f){f.call(d.helpers)}};if(d.viewer.schema.text[a]){return b(d.viewer.schema.text[a])}var c=DV.jQuery.proxy(function(h){b(d.viewer.schema.text[a]=h)},this);this.viewer.$(".DV-textContents").text("");var g=d.viewer.schema.document.resources.page.text.replace("{page}",a+1);var e=this.helpers.isCrossDomain(g);if(e){g+="?callback=?"}DV.jQuery[e?"getJSON":"get"](g,{},c)},resetTracker:function(){this.viewer.activeAnnotation=null;this.trackAnnotation.combined=null;this.trackAnnotation.h=null},trackAnnotation:function(){var e=this.viewer;var d=this.helpers;var b=this.elements.window[0].scrollTop;if(e.activeAnnotation){var a=e.activeAnnotation;var c=this.trackAnnotation;if(c.id!=a.id){c.id=a.id;d.setActiveAnnotationLimits(a)}if(!e.activeAnnotation.annotationEl.hasClass("DV-editing")&&(b>(c.h)||b<c.combined)){a.hide(true);e.pageSet.setActiveAnnotation(null);e.activeAnnotation=null;c.h=null;c.id=null;c.combined=null}}else{e.pageSet.setActiveAnnotation(null);e.activeAnnotation=null;c.h=null;c.id=null;c.combined=null;d.removeObserver("trackAnnotation")}}};DV.Schema.events.ViewAnnotation={next:function(d){var f=this.viewer;var b=f.activeAnnotationId;var a=this.models.annotations;var c=(b===null)?a.getFirstAnnotation():a.getNextAnnotation(b);if(!c){return false}f.pageSet.showAnnotation(c);this.helpers.setAnnotationPosition(c.position)},previous:function(d){var f=this.viewer;var c=f.activeAnnotationId;var a=this.models.annotations;var b=(!c)?a.getFirstAnnotation():a.getPreviousAnnotation(c);if(!b){return false}f.pageSet.showAnnotation(b);this.helpers.setAnnotationPosition(b.position)},search:function(a){a.preventDefault();this.viewer.open("ViewSearch");return false}};DV.Schema.events.ViewDocument={next:function(){var a=this.models.document.nextPage();this.helpers.jump(a)},previous:function(b){var a=this.models.document.previousPage();this.helpers.jump(a)},search:function(a){a.preventDefault();this.viewer.open("ViewSearch");return false}};DV.Schema.events.ViewSearch={next:function(b){var a=this.models.document.nextPage();this.loadText(a)},previous:function(b){var a=this.models.document.previousPage();this.loadText(a)},search:function(a){a.preventDefault();this.helpers.getSearchResponse(this.elements.searchInput.val());return false}};DV.Schema.events.ViewText={next:function(b){var a=this.models.document.nextPage();this.loadText(a)},previous:function(b){var a=this.models.document.previousPage();this.loadText(a)},search:function(a){a.preventDefault();this.viewer.open("ViewSearch");return false}};_.extend(DV.Schema.events,{handleHashChangeViewDocumentPage:function(b){var a=parseInt(b,10)-1;if(this.viewer.state==="ViewDocument"){this.viewer.pageSet.cleanUp();this.helpers.jump(a)}else{this.models.document.setPageIndex(a);this.viewer.open("ViewDocument")}},handleHashChangeLegacyViewDocumentPage:function(b){var a=parseInt(b,10)-1;this.handleHashChangeViewDocumentPage(b)},handleHashChangeViewDocumentAnnotation:function(c,b){var a=parseInt(c,10)-1;var b=parseInt(b,10);if(this.viewer.state==="ViewDocument"){this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[b])}else{this.models.document.setPageIndex(a);this.viewer.pageSet.setActiveAnnotation(b);this.viewer.open("ViewDocument")}},handleHashChangeViewAnnotationAnnotation:function(a){var a=parseInt(a,10);var b=this.viewer;if(b.state==="ViewAnnotation"){b.pageSet.showAnnotation(this.viewer.models.annotations.byId[a])}else{b.activeAnnotationId=a;this.viewer.open("ViewAnnotation")}},handleHashChangeDefault:function(){this.viewer.pageSet.cleanUp();this.models.document.setPageIndex(0);if(this.viewer.state==="ViewDocument"){this.helpers.jump(0)}else{this.viewer.open("ViewDocument")}},handleHashChangeViewText:function(b){var a=parseInt(b,10)-1;if(this.viewer.state==="ViewText"){this.events.loadText(a)}else{this.models.document.setPageIndex(a);this.viewer.open("ViewText")}},handleHashChangeViewSearchRequest:function(c,b){var a=parseInt(c,10)-1;this.elements.searchInput.val(decodeURIComponent(b));if(this.viewer.state!=="ViewSearch"){this.models.document.setPageIndex(a)}this.viewer.open("ViewSearch")},handleHashChangeViewEntity:function(c,a,d,b){c=parseInt(c,10)-1;a=decodeURIComponent(a);this.elements.searchInput.val(a);this.models.document.setPageIndex(c);this.states.ViewEntity(a,parseInt(d,10),parseInt(b,10))}});_.extend(DV.Schema.events,{handleNavigation:function(h){var f=this.viewer.$(h.target);var d=f.parent();if(f.hasClass("DV-trigger")||d.hasClass("DV-trigger")){if(f.hasClass("DV-expander")){return d.closest(".DV-chapter").toggleClass("DV-expanded")}else{if(d.hasClass("DV-first")){d.parent().addClass("DV-expanded");var i=parseInt(d.parent()[0].id.replace("DV-chapter-",""),10);var c=parseInt(this.models.chapters.getChapterPosition(i),10);var b=parseInt(c,10)+1;if(this.viewer.state==="ViewText"){this.loadText(c)}else{if(this.viewer.state==="ViewDocument"){this.helpers.jump(c)}else{return false}}}else{if(d[0].tagName.toUpperCase()==="DIV"){var g=d[0].id.replace("DV-annotationMarker-","");var a=this.models.annotations.getAnnotation(g);var b=parseInt(a.index,10)+1;if(this.viewer.state==="ViewText"){this.loadText(a.index)}else{this.viewer.pageSet.showAnnotation(a)}}else{return false}}}}}});DV.Schema.helpers={HOST_EXTRACTOR:(/https?:\/\/([^\/]+)\//),BLANK_GIF:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",annotationClassName:".DV-annotation",bindEvents:function(a){var c=this.events.compile("zoom");var i=a.models.document;var j=_.indexOf(i.ZOOM_RANGES,i.zoomLevel)*24.7;var d=this.viewer;d.slider=d.$(".DV-zoomBox").slider({step:24.7,value:j,slide:function(l,m){c(a.models.document.ZOOM_RANGES[parseInt(m.value/24.7,10)])},change:function(l,m){c(a.models.document.ZOOM_RANGES[parseInt(m.value/24.7,10)])}});var f=d.history;var g=d.compiled;g.next=this.events.compile("next");g.previous=this.events.compile("previous");var k=a.states;d.$(".DV-navControls").delegate("span.DV-next","click",g.next);d.$(".DV-navControls").delegate("span.DV-previous","click",g.previous);d.$(".DV-annotationView").delegate(".DV-trigger","click",function(l){l.preventDefault();a.open("ViewAnnotation")});d.$(".DV-documentView").delegate(".DV-trigger","click",function(l){a.open("ViewDocument")});d.$(".DV-textView").delegate(".DV-trigger","click",function(l){a.open("ViewText")});d.$(".DV-allAnnotations").delegate(".DV-annotationGoto .DV-trigger","click",DV.jQuery.proxy(this.gotoPage,this));d.$("form.DV-searchDocument").submit(this.events.compile("search"));d.$(".DV-searchBar").delegate(".DV-closeSearch","click",function(l){l.preventDefault();a.open("ViewText")});d.$(".DV-searchBox").delegate(".DV-searchInput-cancel","click",DV.jQuery.proxy(this.clearSearch,this));d.$(".DV-searchResults").delegate("span.DV-resultPrevious","click",DV.jQuery.proxy(this.highlightPreviousMatch,this));d.$(".DV-searchResults").delegate("span.DV-resultNext","click",DV.jQuery.proxy(this.highlightNextMatch,this));d.$(".DV-trigger").bind("selectstart",function(){return false});d.$(".DV-footer").delegate(".DV-fullscreen","click",_.bind(this.openFullScreen,this));var h=DV.jQuery.proxy(this.annotationBridgeToggle,this);var e=this.elements.collection;e.delegate(".DV-annotationTab","click",h);e.delegate(".DV-annotationRegion","click",DV.jQuery.proxy(this.annotationBridgeShow,this));e.delegate(".DV-annotationNext","click",DV.jQuery.proxy(this.annotationBridgeNext,this));e.delegate(".DV-annotationPrevious","click",DV.jQuery.proxy(this.annotationBridgePrevious,this));e.delegate(".DV-showEdit","click",DV.jQuery.proxy(this.showAnnotationEdit,this));e.delegate(".DV-cancelEdit","click",DV.jQuery.proxy(this.cancelAnnotationEdit,this));e.delegate(".DV-saveAnnotation","click",DV.jQuery.proxy(this.saveAnnotation,this));e.delegate(".DV-deleteAnnotation","click",DV.jQuery.proxy(this.deleteAnnotation,this));e.delegate(".DV-pageNumber","click",_.bind(this.permalinkPage,this,"document"));e.delegate(".DV-textCurrentPage","click",_.bind(this.permalinkPage,this,"text"));e.delegate(".DV-annotationTitle","click",_.bind(this.permalinkAnnotation,this));e.delegate(".DV-permalink","click",_.bind(this.permalinkAnnotation,this));this._touchX=this._touchY=0;e[0].ontouchstart=_.bind(this.touchStart,this);e[0].ontouchmove=_.bind(this.touchMove,this);e[0].ontouchend=_.bind(this.touchMove,this);d.$(".DV-descriptionToggle").live("click",function(l){l.preventDefault();l.stopPropagation();d.$(".DV-descriptionText").slideToggle(300,function(){d.$(".DV-descriptionToggle").toggleClass("DV-showDescription")})});var b=DV.jQuery.proxy(d.pageSet.cleanUp,this);this.elements.window.live("mousedown",function(m){var l=d.$(m.target);if(l.parents().is(".DV-annotation")||l.is(".DV-annotation")){return true}if(a.elements.window.hasClass("DV-coverVisible")){if((l.width()-parseInt(m.clientX,10))>=15){b()}}});if(jQuery.browser.msie==true){this.elements.browserDocument.bind("focus",DV.jQuery.proxy(this.focusWindow,this));this.elements.browserDocument.bind("focusout",DV.jQuery.proxy(this.focusOut,this))}else{this.elements.browserWindow.bind("focus",DV.jQuery.proxy(this.focusWindow,this));this.elements.browserWindow.bind("blur",DV.jQuery.proxy(this.blurWindow,this))}this.elements.window.bind("scroll",DV.jQuery.proxy(this.focusWindow,this));this.elements.coverPages.live("mousedown",b);d.acceptInput=this.elements.currentPage.acceptInput({changeCallBack:DV.jQuery.proxy(this.acceptInputCallBack,this)})},startCheckTimer:function(){var b=this.viewer;var a=function(){b.events.check()};this.viewer.checkTimer=setInterval(a,100)},stopCheckTimer:function(){clearTimeout(this.viewer.checkTimer)},blurWindow:function(){if(this.viewer.isFocus===true){this.viewer.isFocus=false;this.stopCheckTimer()}else{return}},focusOut:function(){if(this.viewer.activeElement!=document.activeElement){this.viewer.activeElement=document.activeElement;this.viewer.isFocus=true}else{this.viewer.isFocus=false;this.viewer.helpers.stopCheckTimer();return}},focusWindow:function(){if(this.viewer.isFocus===true){return}else{this.viewer.isFocus=true;this.startCheckTimer()}},touchStart:function(a){a.stopPropagation();a.preventDefault();var b=a.changedTouches[0];this._touchX=b.pageX;this._touchY=b.pageY},touchMove:function(b){b.stopPropagation();b.preventDefault();var d=b.changedTouches[0];var c=this._touchX-d.pageX;var a=this._touchY-d.pageY;this.elements.window[0].scrollLeft+=c;this.elements.window[0].scrollTop+=a;this._touchX-=c;this._touchY-=a},permalinkPage:function(f,d){if(f=="text"){var b=this.viewer.models.document.currentPage()}else{var a=this.viewer.$(d.target).closest(".DV-set").attr("data-id");var c=this.viewer.pageSet.pages[a];var b=c.pageNumber;this.jump(c.index)}this.viewer.history.save(f+"/p"+b)},permalinkAnnotation:function(c){var d=this.viewer.$(c.target).closest(".DV-annotation").attr("data-id");var b=this.viewer.models.annotations.getAnnotation(d);var a=b.server_id||b.id;if(this.viewer.state=="ViewDocument"){this.viewer.pageSet.showAnnotation(b);this.viewer.history.save("document/p"+b.pageNumber+"/a"+a)}else{this.viewer.history.save("annotation/a"+a)}},setDocHeight:function(a,b){this.elements.window[0].scrollTop+=b;this.elements.bar.css("height",a)},getWindowDimensions:function(){var a={height:window.innerHeight?window.innerHeight:this.elements.browserWindow.height(),width:this.elements.browserWindow.width()};return a},isCrossDomain:function(b){var a=b.match(this.HOST_EXTRACTOR);return a&&(a[1]!=window.location.host)},resetScrollState:function(){this.elements.window.scrollTop(0)},gotoPage:function(c){c.preventDefault();var b=this.viewer.$(c.target).parents(".DV-annotation").attr("rel").replace("aid-","");var a=this.models.annotations.getAnnotation(b);var d=this.viewer;if(d.state!=="ViewDocument"){this.models.document.setPageIndex(a.index);d.open("ViewDocument")}},openFullScreen:function(){var a=this.viewer.schema.document;window.open(a.canonicalURL,a.title,"toolbar=no,resizable=yes,scrollbars=no,status=no")},sortPages:function(a){if(a==0||a%3==1){return["p0","p1","p2"]}if(a%3==2){return["p1","p2","p0"]}if(a%3==0){return["p2","p0","p1"]}},addObserver:function(a){this.removeObserver(a);this.viewer.observers.push(a)},removeObserver:function(b){var d=this.viewer.observers;for(var c=0,a=d.length;c<a;c++){if(b===d[c]){d.splice(c,1)}}},setWindowSize:function(f){var e=this.viewer;var b=this.elements;var a=b.header.outerHeight()+15;var d=DV.jQuery(this.viewer.options.container).offset().top;var c=Math.round((f.height)-a-d);b.window.css({height:c,width:f.width-267});b.well.css({height:c});e.windowDimensions=f},toggleContent:function(a){this.elements.viewer.removeClass("DV-viewText DV-viewSearch DV-viewDocument DV-viewAnnotations").addClass("DV-"+a)},jump:function(c,b,d){b=(b)?parseInt(b,10):0;var a=this.models.document.getOffset(parseInt(c,10))+b;this.elements.window.scrollTop(a);this.models.document.setPageIndex(c);if(d){this.viewer.pageSet.redraw(true)}},shift:function(a){var d=this.elements.window;var c=d.scrollTop()+a.deltaY;var b=d.scrollLeft()+a.deltaX;d.scrollTop(c);d.scrollLeft(b)},getAppState:function(){var a=this.models.document;var b=(a.currentIndex()==0)?1:a.currentPage();return{page:b,zoom:a.zoomLevel,view:this.viewer.state}},constructPages:function(){var b=[];var d=(this.viewer.schema.data.totalPages<3)?this.viewer.schema.data.totalPages:3;var a=this.models.pages.height;for(var c=0;c<d;c++){b.push(JST.pages({pageNumber:c+1,pageIndex:c,pageImageSource:this.BLANK_GIF,baseHeight:a}))}return b.join("")},positionViewer:function(){var a=this.elements.viewer.position();this.elements.viewer.css({position:"absolute",top:a.top,bottom:0,left:a.left,right:a.left})},unsupportedBrowser:function(){if(!(DV.jQuery.browser.msie&&DV.jQuery.browser.version<="6.0")){return false}DV.jQuery(this.viewer.options.container).html(JST.unsupported({viewer:this.viewer}));return true},registerHashChangeEvents:function(){var a=this.events;var b=this.viewer.history;b.defaultCallback=DV.jQuery.proxy(a.handleHashChangeDefault,this.events);b.register(/document\/p(\d*)$/,DV.jQuery.proxy(a.handleHashChangeViewDocumentPage,this.events));b.register(/p(\d*)$/,DV.jQuery.proxy(a.handleHashChangeLegacyViewDocumentPage,this.events));b.register(/p=(\d*)$/,DV.jQuery.proxy(a.handleHashChangeLegacyViewDocumentPage,this.events));b.register(/document\/p(\d*)\/a(\d*)$/,DV.jQuery.proxy(a.handleHashChangeViewDocumentAnnotation,this.events));b.register(/annotation\/a(\d*)$/,DV.jQuery.proxy(a.handleHashChangeViewAnnotationAnnotation,this.events));b.register(/text\/p(\d*)$/,DV.jQuery.proxy(a.handleHashChangeViewText,this.events));b.register(/entity\/p(\d*)\/(.*)\/(\d+):(\d+)$/,DV.jQuery.proxy(a.handleHashChangeViewEntity,this.events));b.register(/search\/p(\d*)\/(.*)$/,DV.jQuery.proxy(a.handleHashChangeViewSearchRequest,this.events))},autoZoomPage:function(){var d=this.elements.window.outerWidth(true);var e;if(this.viewer.options.zoom=="auto"){e=Math.min(700,d-(this.viewer.models.pages.REDUCED_PADDING*2))}else{e=this.viewer.options.zoom}var c=[];if(e<=500){var b=(e+700)/2;c=[e,b,700,850,1000]}else{if(e<=750){var b=((1000-700)/3)+e;var a=((1000-700)/3)*2+e;c=[0.66*e,e,b,a,1000]}else{if(750<e&&e<=850){var b=((1000-e)/2)+e;c=[0.66*e,700,e,b,1000]}else{if(850<e&&e<1000){var b=((e-700)/2)+700;c=[0.66*e,700,b,e,1000]}else{if(e>=1000){e=1000;c=this.viewer.models.document.ZOOM_RANGES}}}}}this.viewer.models.document.ZOOM_RANGES=c;this.viewer.slider.slider({value:parseInt(_.indexOf(c,e)*24.7,10)});this.events.zoom(e)},handleInitialState:function(){var a=this.viewer.history.loadURL(true);if(!a){this.viewer.open("ViewDocument")}}};_.extend(DV.Schema.helpers,{getAnnotationModel:function(b){var a=parseInt(b.attr("rel").match(/\d+/),10);return this.models.annotations.getAnnotation(a)},getAnnotationObject:function(a){var a=this.viewer.$(a);var d=a.attr("id").replace(/DV\-annotation\-|DV\-listAnnotation\-/,"");var b=a.closest("div.DV-set").attr("data-id");for(var c=0;(annotationObject=this.viewer.pageSet.pages[b].annotations[c]);c++){if(annotationObject.id==d){a=null;return annotationObject}}return false},annotationBridgeToggle:function(b){b.preventDefault();var a=this.getAnnotationObject(this.viewer.$(b.target).closest(this.annotationClassName));a.toggle()},annotationBridgeShow:function(b){b.preventDefault();var a=this.getAnnotationObject(this.viewer.$(b.target).closest(this.annotationClassName));a.show()},annotationBridgeHide:function(b){b.preventDefault();var a=this.getAnnotationObject(this.viewer.$(b.target).closest(this.annotationClassName));a.hide(true)},annotationBridgeNext:function(b){b.preventDefault();var a=this.getAnnotationObject(this.viewer.$(b.target).closest(this.annotationClassName));a.next()},annotationBridgePrevious:function(b){b.preventDefault();var a=this.getAnnotationObject(this.viewer.$(b.target).closest(this.annotationClassName));a.previous()},setAnnotationPosition:function(a){this.elements.currentPage.text(a)},setActiveAnnotationLimits:function(a){var a=(a)?a:this.viewer.activeAnnotation;if(!a||a==null){return}var e=this.elements;var b=a.page;var d=a.annotationEl;var c=a.position.top*this.models.pages.zoomFactor();var f=this.events.trackAnnotation;if(a.type==="page"){f.h=d.outerHeight()+b.getOffset();f.combined=(b.getOffset())-e.window.height()}else{f.h=d.height()+c-20+b.getOffset()+b.getPageNoteHeight();f.combined=(c-20+b.getOffset()+b.getPageNoteHeight())-e.window.height()}}});_.extend(DV.Schema.helpers,{renderViewer:function(){var i=this.viewer.schema.document;var b=this.constructPages();var j=(i.description)?i.description:null;var d=(i.resources.related_story=="")?null:i.resources.related_story;var g=JST.header({options:this.viewer.options,id:i.id,story_url:d,title:i.title||""});var c=JST.footer({options:this.viewer.options});var h=i.resources.pdf;h=h?'<a target="_blank" href="'+h+'">Original Document (PDF)</a>':"";var e={options:this.viewer.options,pages:b,header:g,footer:c,pdf_url:h,story_url:d,descriptionContainer:JST.descriptionContainer({description:j}),autoZoom:this.viewer.options.zoom=="auto"};if(this.viewer.options.width&&this.viewer.options.height){DV.jQuery(this.viewer.options.container).css({position:"relative",width:this.viewer.options.width,height:this.viewer.options.height})}var a=this.viewer.options.container;var f=DV.jQuery(a);if(!f.length){throw"Document Viewer container element not found: "+a}f.html(JST.viewer(e))},displayNavigation:function(){var b=this.viewer.schema.document;var a=(!b.description&&!_.size(this.viewer.schema.data.annotationsById)&&!this.viewer.schema.data.sections.length);this.viewer.$(".DV-supplemental").toggleClass("DV-noNavigation",a)},renderNavigation:function(){var w=this;var c=[],h=[],e=[],r=[],o=JST.navigationExpander({}),j=[],k=[],f=[];var p=this.viewer.models.boldsId||(this.viewer.models.boldsId=_.uniqueId());var s=function(B,A){var C=[];for(var z=B,y=A;z<y;z++){if(k[z]){C.push(k[z]);j[z]=""}}return C.join("")};var b=function(i){var y="#DV-selectedChapter-"+i.id+" #DV-chapter-"+i.id;h.push(y+" .DV-first span.DV-trigger");return(JST.chapterNav(i))};var d=function(z){var A=[];var B=w.viewer.schema.data.annotationsByPage[z];for(var y=0;y<B.length;y++){var i=B[y];A.push(JST.annotationNav(i));h.push("#DV-selectedAnnotation-"+i.id+" #DV-annotationMarker-"+i.id+" span.DV-trigger")}return A.join("")};for(var t=0,u=this.models.document.totalPages;t<u;t++){if(this.viewer.schema.data.annotationsByPage[t]){j[t]=d(t);k[t]=j[t]}}var n=this.viewer.schema.data.sections;if(n.length){for(var t=0;t<n.length;t++){var g=n[t];var v=n[t+1];g.id=g.id||_.uniqueId();g.pageNumber=g.page;g.endPage=v?v.page-1:this.viewer.schema.data.totalPages;var a=s(g.pageNumber-1,g.endPage);if(a!=""){g.navigationExpander=o;g.navigationExpanderClass="DV-hasChildren";g.noteViews=a;j[g.pageNumber-1]=b(g)}else{g.navigationExpanderClass="DV-noChildren";g.noteViews="";g.navigationExpander="";j[g.pageNumber-1]=b(g)}}}var x=j.join("");var m=this.viewer.$("div.DV-chaptersContainer");m.html(x);m.unbind("click").bind("click",this.events.compile("handleNavigation"));this.viewer.schema.data.sections.length||_.size(this.viewer.schema.data.annotationsById)?m.show():m.hide();this.displayNavigation();DV.jQuery("#DV-navigationBolds-"+p,document.head).remove();var q=h.join(", ")+" { font-weight:bold; color:#000 !important; }";var l='<style id="DV-navigationBolds-'+p+'" type="text/css" media="screen,print">\n'+q+"\n</style>";DV.jQuery(document.head).append(l);m=null},renderComponents:function(){var b=DV.jQuery(this.viewer.options.container).css("position");if(b!="relative"&&b!="absolute"&&!this.viewer.options.fixedSize){DV.jQuery(document.body).css({overflow:"hidden"})}var f=_.any(this.models.annotations.byId);var d=this.viewer.$(".DV-annotationView");d[f?"show":"hide"]();if(this.viewer.options.text===false||!this.viewer.schema.document.resources.search){this.viewer.$(".DV-textView").hide()}else{if(!this.viewer.options.width||this.viewer.options.width>=540){this.elements.viewer.addClass("DV-searchable");this.viewer.$("input.DV-searchInput",this.viewer.options.container).placeholder({message:"Search",clearClassName:"DV-searchInput-show-search-cancel"})}}if(this.models.document.totalPages<=1){this.viewer.$(".DV-thumbnailsView").hide()}this.viewer.api.roundTabCorners();var c=this.models.chapters.chapters.length>0;this.viewer.$(".DV-navControls").remove();var e=JST.navControls({totalPages:this.viewer.schema.data.totalPages,totalAnnotations:this.viewer.schema.data.totalAnnotations});this.viewer.$(".DV-navControlsContainer").html(e);this.viewer.$(".DV-fullscreenControl").remove();if(this.viewer.schema.document.canonicalURL){var a=JST.fullscreenControl({});this.viewer.$(".DV-fullscreenContainer").html(a)}if(this.viewer.options.sidebar){this.viewer.$(".DV-sidebar").show()}_.defer(_.bind(function(){if(this.elements.viewer.width()<=650){this.viewer.$(".DV-controls").addClass("DV-narrowControls")}},this));this.elements.currentPage=this.viewer.$("span.DV-currentPage");this.models.document.setPageIndex(this.models.document.currentIndex())},reset:function(){this.resetNavigationState();this.cleanUpSearch();this.viewer.pageSet.cleanUp();this.removeObserver("drawPages");this.viewer.dragReporter.unBind();this.elements.window.scrollTop(0)}});_.extend(DV.Schema.helpers,{showAnnotationEdit:function(c){var b=this.viewer.$(c.target).closest(this.annotationClassName);var a=this.viewer.$(".DV-annotationTextArea",b);b.addClass("DV-editing");a.focus()},cancelAnnotationEdit:function(c){var b=this.viewer.$(c.target).closest(this.annotationClassName);var a=this.getAnnotationModel(b);this.viewer.$(".DV-annotationTitleInput",b).val(a.title);this.viewer.$(".DV-annotationTextArea",b).val(a.text);if(a.unsaved){this.models.annotations.removeAnnotation(a)}else{b.removeClass("DV-editing")}},saveAnnotation:function(d,b){var c=this.viewer.$(d.target).closest(this.annotationClassName);var a=this.getAnnotationModel(c);if(!a){return}a.title=this.viewer.$(".DV-annotationTitleInput",c).val();a.text=this.viewer.$(".DV-annotationTextArea",c).val();if(b=="onlyIfText"&&(!a.title||a.title=="Untitled Note")&&!a.text){return this.models.annotations.removeAnnotation(a)}this.models.annotations.refreshAnnotation(a);c.removeClass("DV-editing");this.viewer.api.redraw();this.models.annotations.fireSaveCallbacks(a)},deleteAnnotation:function(c){var b=this.viewer.$(c.target).closest(this.annotationClassName);var a=this.getAnnotationModel(b);this.models.annotations.removeAnnotation(a);this.models.annotations.fireDeleteCallbacks(a)}});_.extend(DV.Schema.helpers,{resetNavigationState:function(){var a=this.elements;if(a.chaptersContainer.length){a.chaptersContainer[0].id=""}if(a.navigation.length){a.navigation[0].id=""}},setActiveChapter:function(a){this.elements.chaptersContainer.attr("id","DV-selectedChapter-"+a)},setActiveAnnotationInNav:function(a){if(a){this.elements.navigation.attr("id","DV-selectedAnnotation-"+a)}else{this.elements.navigation.attr("id","")}}});_.extend(DV.Schema.helpers,{getSearchResponse:function(d){var c=DV.jQuery.proxy(function(e){this.viewer.searchResponse=e;var g=(e.results.length>0)?true:false;var f=g?"of "+e.results.length+" ":" ";this.viewer.$("span.DV-totalSearchResult").text(f);this.viewer.$("span.DV-searchQuery").text(e.query);if(g){this.events.loadText(e.results[0]-1,this.highlightSearchResponses)}else{this.highlightSearchResponses()}},this);var b=function(){this.viewer.$(".DV-currentSearchResult").text("Search is not available at this time");this.viewer.$("span.DV-searchQuery").text(d);this.viewer.$(".DV-searchResults").addClass("DV-noResults")};var a=this.viewer.schema.document.resources.search.replace("{query}",encodeURIComponent(d));if(this.viewer.helpers.isCrossDomain(a)){a+="&callback=?"}DV.jQuery.ajax({url:a,dataType:"json",success:c,error:b})},acceptInputCallBack:function(){var a=parseInt(this.elements.currentPage.text(),10)-1;a=(a==="")?0:a;a=(a<0)?0:a;a=(a+1>this.models.document.totalPages)?this.models.document.totalPages-1:a;var b=a+1;this.elements.currentPage.text(b);this.viewer.$(".DV-pageNumberContainer input").val(b);if(this.viewer.state==="ViewDocument"){this.jump(a)}else{if(this.viewer.state==="ViewText"){this.events.loadText(a)}}},highlightSearchResponses:function(){var g=this.viewer;var c=g.searchResponse;if(!c){return false}var e=c.results;var h=this.viewer.$(".DV-currentSearchResult");if(e.length==0){h.text("No Results");this.viewer.$(".DV-searchResults").addClass("DV-noResults")}else{this.viewer.$(".DV-searchResults").removeClass("DV-noResults")}for(var f=0;f<c.results.length;f++){if(this.models.document.currentPage()===c.results[f]){h.text("Page "+(f+1)+" ");break}}var l="\\b"+c.query.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/\s+/g,"\\s+")+"\\b";var j=this.viewer.$(".DV-textContents");var d=j.text();var k=new RegExp(l,"ig");var b=d.replace(k,'<span class="DV-searchMatch">$&</span>');j.html(b);var a=(g.toHighLight)?g.toHighLight:0;this.highlightMatch(a);h=null;j=null},highlightEntity:function(g,d){this.viewer.$(".DV-searchResults").addClass("DV-noResults");var c=this.viewer.$(".DV-textContents");var f=c.text();var e=f.substr(0,g);var a=f.substr(g,d);var b=f.substr(g+d);f=[e,'<span class="DV-searchMatch">',a,"</span>",b].join("");c.html(f);this.highlightMatch(0)},highlightMatch:function(c){var d=this.viewer.$(".DV-textContents span.DV-searchMatch");if(d.length==0){return false}var f=this.getCurrentSearchPageIndex();var a=this.viewer.toHighLight;if(a){if(a!==false){if(a==="last"){c=d.length-1}else{if(a==="first"){c=0}else{c=a}}}a=false}var e=this.viewer.searchResponse;if(e){if(c===(d.length)){if(e.results.length===f+1){return}a="first";this.events.loadText(e.results[f+1]-1,this.highlightSearchResponses);return}else{if(c===-1){if(f-1<0){return false}a="last";this.events.loadText(e.results[f-1]-1,this.highlightSearchResponses);return}}d.removeClass("DV-highlightedMatch")}var b=this.viewer.$(".DV-textContents span.DV-searchMatch:eq("+c+")");b.addClass("DV-highlightedMatch");this.elements.window[0].scrollTop=b.position().top-50;if(e){e.highlighted=c}d=null;b=null},getCurrentSearchPageIndex:function(){var d=this.viewer.searchResponse;if(!d){return false}var b=this.models.document;for(var c=0,a=d.results.length;c<a;c++){if(d.results[c]===b.currentPage()){return c}}},highlightPreviousMatch:function(a){a.preventDefault();this.highlightMatch(this.viewer.searchResponse.highlighted-1)},highlightNextMatch:function(a){a.preventDefault(a);this.highlightMatch(this.viewer.searchResponse.highlighted+1)},clearSearch:function(a){this.elements.searchInput.val("").keyup().focus()},showEntity:function(a,c,b){this.viewer.$("span.DV-totalSearchResult").text("");this.viewer.$("span.DV-searchQuery").text(a);this.viewer.$("span.DV-currentSearchResult").text("Searching");this.events.loadText(this.models.document.currentIndex(),_.bind(this.viewer.helpers.highlightEntity,this.viewer.helpers,c,b))},cleanUpSearch:function(){var a=this.viewer;a.searchResponse=null;a.toHighLight=null;if(this.elements){this.elements.searchInput.keyup().blur()}}});DV.Schema.states={InitialLoad:function(){if(this.helpers.unsupportedBrowser()){return}this.helpers.renderViewer();window.v=this;this.events.elements=this.helpers.elements=this.elements=new DV.Elements(this);this.helpers.renderComponents();this.helpers.renderNavigation();this.pageSet=new DV.PageSet(this);this.pageSet.buildPages();this.helpers.bindEvents(this);this.helpers.positionViewer();this.models.document.computeOffsets();this.helpers.addObserver("drawPages");this.helpers.registerHashChangeEvents();this.dragReporter=new DV.DragReporter(this,".DV-pageCollection",DV.jQuery.proxy(this.helpers.shift,this),{ignoreSelector:".DV-annotationContent"});this.helpers.startCheckTimer();this.helpers.handleInitialState();this.helpers.autoZoomPage()},ViewAnnotation:function(){this.helpers.reset();this.activeAnnotationId=null;this.acceptInput.deny();if(jQuery.browser.msie){this.elements.annotations.css({zoom:0});this.elements.annotations.css({zoom:1})}this.helpers.toggleContent("viewAnnotations");this.compiled.next();return true},ViewDocument:function(){this.helpers.reset();this.helpers.addObserver("drawPages");this.dragReporter.setBinding();this.elements.window.mouseleave(DV.jQuery.proxy(this.dragReporter.stop,this.dragReporter));this.acceptInput.allow();this.helpers.toggleContent("viewDocument");this.helpers.setActiveChapter(this.models.chapters.getChapterId(this.models.document.currentIndex()));this.helpers.jump(this.models.document.currentIndex());return true},ViewEntity:function(a,c,b){this.helpers.reset();this.helpers.toggleContent("viewSearch");this.helpers.showEntity(a,c,b)},ViewSearch:function(){this.helpers.reset();if(this.elements.searchInput.val()==""){this.elements.searchInput.val(a)}else{var a=this.elements.searchInput.val()}this.helpers.getSearchResponse(a);this.acceptInput.deny();this.helpers.toggleContent("viewSearch");return true},ViewText:function(){this.helpers.reset();this.acceptInput.allow();this.pageSet.zoomText();this.helpers.toggleContent("viewText");this.events.loadText();return true}};DV.DocumentViewer=function(a){this.options=a;this.window=window;this.$=this.jQuery;this.schema=new DV.Schema();this.api=new DV.Api(this);this.history=new DV.History(this);this.models=this.schema.models;this.events=_.extend({},DV.Schema.events);this.helpers=_.extend({},DV.Schema.helpers);this.states=_.extend({},DV.Schema.states);this.isFocus=true;this.openEditor=null;this.confirmStateChange=null;this.activeElement=null;this.observers=[];this.windowDimensions={};this.scrollPosition=null;this.checkTimer={};this.busy=false;this.annotationToLoadId=null;this.dragReporter=null;this.compiled={};this.tracker={};this.onStateChangeCallbacks=[];this.events=_.extend(this.events,{viewer:this,states:this.states,elements:this.elements,helpers:this.helpers,models:this.models,compile:function(){var b=this.viewer;var c=arguments[0];return function(){if(!b.events[b.state][c]){b.events[c].apply(b.events,arguments)}else{b.events[b.state][c].apply(b.events,arguments)}}}});this.helpers=_.extend(this.helpers,{viewer:this,states:this.states,elements:this.elements,events:this.events,models:this.models});this.states=_.extend(this.states,{viewer:this,helpers:this.helpers,elements:this.elements,events:this.events,models:this.models})};DV.DocumentViewer.prototype.loadModels=function(){this.models.chapters=new DV.model.Chapters(this);this.models.document=new DV.model.Document(this);this.models.pages=new DV.model.Pages(this);this.models.annotations=new DV.model.Annotations(this);this.models.removedPages={}};DV.DocumentViewer.prototype.open=function(b){if(this.state==b){return}var a=_.bind(function(){this.state=b;this.states[b].apply(this,arguments);this.notifyChangedState();return true},this);this.confirmStateChange?this.confirmStateChange(a):a()};DV.DocumentViewer.prototype.notifyChangedState=function(){_.each(this.onStateChangeCallbacks,function(a){a()})};DV.DocumentViewer.prototype.jQuery=function(a,b){b=b||this.options.container;return DV.jQuery.call(DV.jQuery,a,b)};DV.load=function(a,c){c=c||{};var g=a.id||a.match(/([^\/]+)(\.js|\.json)$/)[1];if("showSidebar" in c){c.sidebar=c.showSidebar}var e={container:document.body,zoom:"auto",sidebar:true};c=_.extend({},e,c);c.fixedSize=!!(c.width||c.height);var f=new DV.DocumentViewer(c);DV.viewers[g]=f;var b=DV.loadJSON=function(h){var i=DV.viewers[h.id];i.schema.importCanonicalDocument(h);i.loadModels();DV.jQuery(function(){i.open("InitialLoad");if(c.afterLoad){c.afterLoad(i)}if(DV.afterLoad){DV.afterLoad(i)}})};var d=function(){if(_.isString(a)){if(a.match(/\.js$/)){DV.jQuery.getScript(a)}else{var h=f.helpers.isCrossDomain(a);if(h){a=a+"?callback=?"}DV.jQuery.getJSON(a,b)}}else{b(a)}};if(c.templates){DV.jQuery.getScript(c.templates,d)}else{d()}return f};if(DV.onload){_.defer(DV.onload)}DV.Api=function(a){this.viewer=a};DV.Api.prototype={currentPage:function(){return this.viewer.models.document.currentPage()},getPageNumberForId:function(b){var a=this.viewer.pageSet.pages[b];return a.index+1},getId:function(){return this.viewer.schema.document.id},getModelId:function(){return parseInt(this.getId(),10)},currentZoom:function(){var a=this.viewer.models.document;return a.zoomLevel/a.ZOOM_RANGES[1]},numberOfPages:function(){return this.viewer.models.document.totalPages},getContributor:function(){return this.viewer.schema.document.contributor},getContributorOrganization:function(){return this.viewer.schema.document.contributor_organization},setSections:function(a){a=_.sortBy(a,function(b){return b.page});this.viewer.schema.data.sections=a;this.viewer.models.chapters.loadChapters();this.redraw()},getSections:function(){return _.clone(this.viewer.schema.data.sections||[])},getDescription:function(){return this.viewer.schema.document.description},setDescription:function(a){this.viewer.schema.document.description=a;this.viewer.$(".DV-description").remove();this.viewer.$(".DV-navigation").prepend(JST.descriptionContainer({description:a}));this.viewer.helpers.displayNavigation()},getRelatedArticle:function(){return this.viewer.schema.document.resources.related_article},setRelatedArticle:function(a){this.viewer.schema.document.resources.related_article=a;this.viewer.$(".DV-storyLink a").attr({href:a});this.viewer.$(".DV-storyLink").toggle(!!a)},getPublishedUrl:function(){return this.viewer.schema.document.resources.published_url},setPublishedUrl:function(a){this.viewer.schema.document.resources.published_url=a},getTitle:function(){return this.viewer.schema.document.title},setTitle:function(a){this.viewer.schema.document.title=a;document.title=a},getSource:function(){return this.viewer.schema.document.source},setSource:function(a){this.viewer.schema.document.source=a},getPageText:function(a){return this.viewer.schema.text[a-1]},setPageText:function(b,a){this.viewer.schema.text[a-1]=b},resetPageText:function(c){var a=this;var b=this.viewer.schema.text;if(c){this.viewer.models.document.originalPageText={}}else{_.each(this.viewer.models.document.originalPageText,function(d,e){e=parseInt(e,10);if(d!=b[e-1]){a.setPageText(d,e);if(e==a.currentPage()){a.viewer.events.loadText()}}})}if(this.viewer.openEditor=="editText"){this.viewer.$(".DV-textContents").attr("contentEditable",true).addClass("DV-editing")}},redraw:function(a){if(a){this.viewer.models.annotations.renderAnnotations();this.viewer.models.document.computeOffsets()}this.viewer.helpers.renderNavigation();this.viewer.helpers.renderComponents();if(a){this.viewer.elements.window.removeClass("DV-coverVisible");this.viewer.pageSet.buildPages({noNotes:true});this.viewer.pageSet.reflowPages()}},addAnnotation:function(a){a=this.viewer.schema.loadAnnotation(a);this.viewer.models.annotations.sortAnnotations();this.redraw(true);this.viewer.pageSet.showAnnotation(a,{active:true,edit:true});return a},onAnnotationSave:function(a){this.viewer.models.annotations.saveCallbacks.push(a)},onAnnotationDelete:function(a){this.viewer.models.annotations.deleteCallbacks.push(a)},setConfirmStateChange:function(a){this.viewer.confirmStateChange=a},onChangeState:function(a){this.viewer.onStateChangeCallbacks.push(a)},resetRemovedPages:function(){this.viewer.models.document.resetRemovedPages()},addPageToRemovedPages:function(a){this.viewer.models.document.addPageToRemovedPages(a)},removePageFromRemovedPages:function(a){this.viewer.models.document.removePageFromRemovedPages(a)},resetReorderedPages:function(){this.viewer.models.document.redrawReorderedPages()},reorderPages:function(c,b){var a=this.getModelId();this.viewer.models.document.reorderPages(a,c,b)},loadJS:function(a,b){DV.jQuery.getScript(a,b)},roundTabCorners:function(){var a=this.viewer.$(".DV-views > div:visible");a.first().addClass("DV-first");a.last().addClass("DV-last")},enterRemovePagesMode:function(){this.viewer.openEditor="removePages"},leaveRemovePagesMode:function(){this.viewer.openEditor=null},enterAddPagesMode:function(){this.viewer.openEditor="addPages"},leaveAddPagesMode:function(){this.viewer.openEditor=null},enterReplacePagesMode:function(){this.viewer.openEditor="replacePages"},leaveReplacePagesMode:function(){this.viewer.openEditor=null},enterReorderPagesMode:function(){this.viewer.openEditor="reorderPages";this.viewer.elements.viewer.addClass("DV-reorderPages")},leaveReorderPagesMode:function(){this.resetReorderedPages();this.viewer.openEditor=null;this.viewer.elements.viewer.removeClass("DV-reorderPages")},enterEditPageTextMode:function(){this.viewer.openEditor="editText";this.viewer.events.loadText()},leaveEditPageTextMode:function(){this.viewer.openEditor=null;this.resetPageText()}};var $j=jQuery;(function(){window.JST=window.JST||{};window.JST.annotation=_.template('<div class="DV-annotation <%= orderClass %> DV-<%= access %>" style="top:<%= top %>px;" id="DV-annotation-<%= id %>" data-id="<%= id %>">  <div class="DV-annotationTab" style="top:<%= tabTop %>px;">    <div class="DV-annotationClose DV-trigger"></div>  </div>  <div class="DV-annotationRegion" style="margin-left:<%= excerptMarginLeft %>px; height:<%= excerptHeight %>px; width:<%= excerptWidth %>px;">    <div class="<%= access == \'public\' ? \'DV-ownerVisible\' : \'DV-contributorVisible\' %>">      <div class="DV-annotationEdge DV-annotationEdgeTop"></div>      <div class="DV-annotationEdge DV-annotationEdgeRight"></div>      <div class="DV-annotationEdge DV-annotationEdgeBottom"></div>      <div class="DV-annotationEdge DV-annotationEdgeLeft"></div>      <div class="DV-annotationCorner DV-annotationCornerTopLeft"></div>      <div class="DV-annotationCorner DV-annotationCornerTopRight"></div>      <div class="DV-annotationCorner DV-annotationCornerBottomLeft"></div>      <div class="DV-annotationCorner DV-annotationCornerBottomRight"></div>    </div>  </div>  <div class="DV-annotationContent">    <div class="DV-annotationHeader clearfix">      <div class="DV-pagination DV-editHidden">        <span class="DV-trigger DV-annotationPrevious" title="Previous Annotation">Previous</span>        <span class="DV-trigger DV-annotationNext" title="Next Annotation">Next</span>      </div>      <% if (access == \'private\') { %>        <div class="DV-annotationWarning DV-editVisible">This private note is only visible to you.</div>      <% } else { %>        <div class="DV-annotationWarning DV-editVisible">All viewers of this document can see this public note.</div>      <% } %>      <div class="DV-annotationGoto DV-editHidden"><div class="DV-trigger">p. <%= pageNumber %></div></div>      <div class="DV-annotationTitle DV-editHidden"><%= title %></div>      <input class="DV-annotationTitleInput DV-editVisible" type="text" placeholder="Annotation Title" value="<%= title %>" />      <% if (access == \'private\') { %>        <div class="DV-privateLock DV-editHidden" title="Private note"></div>      <% } %>      <span class="DV-permalink DV-editHidden" title="Link to this note"></span>      <div class="DV-showEdit DV-editHidden <%= access == \'public\' ? \'DV-ownerVisible\' : \'DV-contributorVisible\' %>"></div>    </div>    <div class="DV-annotationExcerpt" style="height:<%= excerptHeight %>px;">      <div class="DV-annotationExcerptImageTop" style="height:<%= excerptHeight %>px; width:<%= excerptWidth %>px;left:<%= excerptMarginLeft + 1 %>px;">        <img src="<%= image %>" style="left:-<%= excerptMarginLeft %>px; top:-<%= imageTop %>px;" width="<%= imageWidth %>" />      </div>      <div class="DV-annotationExcerptImage" style="height:<%= excerptHeight %>px;">        <img src="<%= image %>" style="top:-<%= imageTop - 2 %>px;" width="<%= imageWidth %>" />      </div>    </div>    <div class="DV-annotationBody DV-editHidden">      <%= text %>    </div>    <textarea class="DV-annotationTextArea DV-editVisible" style="width: <%= bWidth %>px;"><%= text %></textarea>    <div class="DV-annotationEditControls DV-editVisible">      <div class="<%= access == \'public\' ? \'DV-ownerVisible\' : \'DV-contributorVisible\' %> clearfix">        <div class="minibutton warn DV-deleteAnnotation float_left">Delete</div>        <div class="minibutton default DV-saveAnnotation float_right">Save</div>        <div class="minibutton DV-cancelEdit float_right">Cancel</div>      </div>    </div>  </div></div>');window.JST.annotationNav=_.template('<div class="DV-annotationMarker" id="DV-annotationMarker-<%= id %>">  <span class="DV-trigger">    <%= title %>    <span>p.<%= page %></span>  </span></div>');window.JST.chapterNav=_.template('<div id="DV-chapter-<%= id %>" class="DV-chapter <%= navigationExpanderClass %>">  <div class="DV-first">    <%= navigationExpander %>    <span class="DV-trigger"><%= title %><span>p.&nbsp;<%= pageNumber %></span></span>  </div>  <%= noteViews %></div>');window.JST.descriptionContainer=_.template('<% if (description) { %>  <div class="DV-description">    <div class="DV-descriptionHead">      <span class="DV-descriptionToggle DV-showDescription DV-trigger"> Toggle Description</span>      Description    </div>    <div class="DV-descriptionText"><%= description %></div>  </div><% } %>');window.JST.footer=_.template('<% if (!options.sidebar) { %>  <div class="DV-footer">    <div class="DV-fullscreenContainer"></div>    <div class="DV-navControlsContainer"></div>  </div><% } %>');window.JST.fullscreenControl=_.template('<div class="DV-fullscreen" title="View Document in Fullscreen"></div>');window.JST.header=_.template('<div id="DV-header">  <div id="DV-headerHat" class="clearfix">    <div id="DV-branding" class="clearfix">      <a href="http://www.nytimes.com"><img src="http://graphics8.nytimes.com/projects/images/nytlogo.png" /></a>    </div>    <% if (story_url) { %><div id="DV-relatedLink"><strong><a target="_blank" href="<%= story_url %>">Related Article &raquo;</a></strong></div><% } %>        <div id="DV-title">      <%= title %>    </div>  </div>  <div class="DV-controls">    <div class="DV-views">      <div class="DV-documentView DV-first"><span class="DV-trigger DV-selected">Document</span></div>      <div style="display:none;" class="DV-annotationView"><span class="DV-trigger">Notes</span></div>      <div class="DV-textView DV-last"><span class="DV-trigger">Text</span></div>    </div>    <div class="DV-searchBox clearfix">      <form action="#" method="get" class="DV-searchDocument">        <div class="DV-searchInputWrap">          <div class="DV-searchInput-cancel"></div>          <input class="DV-searchInput" type="text" autosave="DV-<%= id %>" results="10" placeholder="Search" />        </div>      </form>    </div>    <div class="DV-zoomControls">      <span class="DV-zoomLabel">Zoom</span>      <div class="DV-zoomBox"></div>    </div>  </div></div>');window.JST.navControls=_.template('<div class="DV-navControls clearfix">  <span class="DV-trigger DV-previous">&laquo;</span>  <div class="clearfix DV-pageNumberContainer">    <span class="DV-currentPagePrefix">Page</span>    <span class="DV-currentAnnotationPrefix">Note&nbsp;</span>    <span class="DV-currentPage">1</span>    <span class="DV-currentPageSuffix">of&nbsp;      <span class="DV-totalPages"><%= totalPages %></span>      <span class="DV-totalAnnotations"><%= totalAnnotations %></span>                            </span>  </div>  <span class="DV-trigger DV-next">&raquo;</span></div>');window.JST.navigationExpander=_.template('<span class="DV-trigger DV-expander">Expand</span>');window.JST.pageAnnotation=_.template('<div class="DV-annotation DV-pageNote <%= orderClass %> DV-<%= access %>" style="top:<%= top %>px;" id="DV-annotation-<%= id %>" data-id="<%= id %>">  <div class="DV-annotationTab">    <div class="DV-annotationClose DV-trigger">p. <%= pageNumber %></div>  </div>  <div class="DV-annotationContent">    <!-- Header -->    <div class="DV-annotationHeader clearfix">      <div class="DV-pagination DV-editHidden">        <span class="DV-trigger DV-annotationPrevious" title="Previous Annotation">Previous</span>        <span class="DV-trigger DV-annotationNext" title="Next Annotation">Next</span>      </div>      <div class="DV-annotationGoto DV-editHidden"><div class="DV-trigger">p. <%= pageNumber %></div></div>      <div class="DV-annotationTitle DV-editHidden"><%= title %></div>      <input class="DV-annotationTitleInput DV-editVisible" type="text" placeholder="Annotation Title" value="<%= title %>" />      <% if (access == \'private\') { %>        <div class="DV-privateLock DV-editHidden" title="Private note"></div>      <% } %>      <span class="DV-permalink DV-editHidden" title="Link to this note"></span>      <div class="DV-showEdit DV-editHidden <%= access == \'public\' ? \'DV-ownerVisible\' : \'DV-contributorVisible\' %>"></div>    </div>    <div class="DV-annotationBody DV-editHidden">      <%= text %>    </div>    <textarea class="DV-annotationTextArea DV-editVisible" style="width: <%= bWidth %>px;"><%= text %></textarea>    <div class="DV-annotationEditControls DV-editVisible">      <div class="<%= access == \'public\' ? \'DV-ownerVisible\' : \'DV-contributorVisible\' %> clearfix">        <div class="minibutton warn DV-deleteAnnotation float_left">Delete</div>        <div class="minibutton default DV-saveAnnotation float_right">Save</div>        <div class="minibutton DV-cancelEdit float_right">Cancel</div>      </div>    </div>  </div></div>');window.JST.pages=_.template('<div class="DV-set p<%= pageIndex %>" data-id="p<%= pageIndex %>" style="top:0;left:0px;height:893px;width:700px;">  <div class="DV-removeOverlay"></div>  <div class="DV-pageNoteInsert" title="Click to Add a Page Note">    <div class="DV-annotationTab">      <div class="DV-annotationClose"></div>    </div>    <div class="DV-annotationDivider"></div>  </div>  <div class="DV-pageMeta"><span class="DV-pageNumber">p. <%= pageNumber %></span></div>  <div class="DV-annotations"></div>  <div class="DV-page" style="height:863px;width:700px;">    <span class="DV-loading-top">Loading</span>    <span class="DV-loading-bottom">Loading</span>    <div class="DV-cover"></div>    <img class="DV-pageImage" src="<%= pageImageSource %>" height="863" />  </div></div>');window.JST.unsupported=_.template('<div class="DV-unsupported">  <div class="DV-intro">    <% if (viewer.schema.document.resources && viewer.schema.document.resources.pdf) { %>      <a href="<%= viewer.schema.document.resources.pdf %>">Download this document as a PDF</a>    <% } %>    <br />    <br />    To use the Document Viewer you need to<br /> upgrade your browser:  </div>  <div class="DV-browsers">    <div class="DV-browser">      <a href="http://www.google.com/chrome">        <div class="DV-image DV-chrome"> </div>Chrome      </a>    </div>    <div class="DV-browser">      <a href="http://www.apple.com/safari/download/">        <div class="DV-image DV-safari"> </div>Safari      </a>    </div>    <div class="DV-browser">      <a href="http://www.mozilla.com/en-US/firefox/firefox.html">        <div class="DV-image DV-firefox"> </div>Firefox      </a>    </div>    <br style="clear:both;" />  </div>  <div class="DV-after">    Or, if you\'d like to continue using Internet Explorer 6,<br /> you can    <a href="http://www.google.com/chromeframe">install Google Chrome Frame</a>.  </div></div>');window.JST.viewer=_.template('<!--[if lte IE 8]><div class="DV-docViewer DV-clearfix DV-viewDocument DV-ie <% if (autoZoom) { %>DV-autoZoom<% } %> <% if (!options.sidebar) { %>DV-hideSidebar<% } %>"><![endif]--><!--[if (!IE)|(gte IE 9)]><!--><div class="DV-docViewer DV-clearfix DV-viewDocument <% if (autoZoom) { %>DV-autoZoom<% } %> <% if (!options.sidebar) { %>DV-hideSidebar<% } %>"><!-- <![endif]-->  <div class="DV-docViewerWrapper">      <%= header %>    <div class="DV-docViewer-Container <% if (options.sidebar) { %>DV-hide-footer<% } %>">          <div class="DV-searchBarWrapper">        <div class="DV-searchBar">          <span class="DV-trigger DV-closeSearch">CLOSE</span>          <div class="DV-searchPagination DV-foundResult">            <div class="DV-searchResults">              <span class="DV-resultPrevious DV-trigger">Previous</span>              <span class="DV-currentSearchResult"></span>              <span class="DV-totalSearchResult"></span>              <span> for &ldquo;<span class="DV-searchQuery"></span>&rdquo;</span>              <span class="DV-resultNext DV-trigger">Next</span>            </div>          </div>        </div>      </div>          <div class="DV-pages <% if (!options.sidebar) { %>DV-hide-sidebar<% } %>">        <div class="DV-pageCollection">          <div class="DV-bar" style=""></div>          <div class="DV-allAnnotations">              </div>          <div class="DV-text">            <div class="DV-textSearch clearfix">                </div>            <div class="DV-textPage">              <span class="DV-textCurrentPage"></span>              <pre class="DV-textContents"></pre>            </div>          </div>          <%= pages %>        </div>      </div>          <div width="265px" class="DV-sidebar <% if (!options.sidebar) { %>DV-hide<% } %>" style="display:none;">        <div class="DV-well">              <% if (options.sidebar) { %>            <div class="DV-navControlsContainer">            </div>          <% } %>              <div class="DV-navigation">            <%= descriptionContainer %>            <div class="DV-contentsHeader">Contents</div>            <div class="DV-chaptersContainer">            </div>            <div class="DV-supplemental">              <% if (pdf_url) { %>                <div class="DV-pdfLink"><%= pdf_url %></div>              <% } %>              <div class="DV-storyLink" style="<%= story_url ? \'\' : \'display:none\' %>">                <a target="_blank" href="<%= story_url %>">Related Article &raquo;</a>              </div>              <div class="DV-contributor"></div>            </div>            <div class="DV-logo"><a class="DV-logoLink" href="#"></a></div>          </div>        </div>      </div>    </div>        <%= footer %>      </div>    <div class="DV-printMessage">    To print the document, click the "Original Document" link to open the original     PDF. At this time it is not possible to print the document with annotations.  </div></div>')})();