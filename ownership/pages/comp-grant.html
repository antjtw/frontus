<div class="maincontent">
<div class="container dynamic-page">

<div modal="capShare" close="close()" options="shareopts">
    <div class="modalHeader">
        <span>Share Ownership Table</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="close()"></span>
    </div>
    <div>
        <p>Shareholders only see their personal holdings by default, change this by visiting their profile
            to grant full access.
        </p>

        <form>
            <ul>
                <li>
                    <input ng-model="selectAll" ng-change="turnOnShares();" class="checkbox" type="checkbox">
                    <span>Name</span>
                    <span>Email</span>
                </li>
                <li ng-repeat="row in rows | shareList">
                    <input class="checkbox" ng-model="row.send" type="checkbox" tabindex="-1">
                    <span class="capshareNames">{{row.name}}</span>
                    <input ng-class="{'content':!row.email, 'error':emailCheck(row.send, row.email)}"
                           ng-disabled="row.emailkey" ng-model="row.email" ng-change="row.send = autoCheck(row.email)">
                </li>
            </ul>
        </form>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="close();">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-disabled="checkInvites();" ng-click="close(); sendInvites();">Submit</button>
        </div>
    </div>
</div>

<div modal="tranDelete" close="deleteclose();" options="opts">
    <div class="modalHeader">
        <span>Delete?</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="deleteclose();"></span>
    </div>
    <div class="modalText">
        <form>
            <p>Are you sure you want to delete this transaction?</p>
            <br>
        </form>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="deleteclose();">No</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="deleteclose(); manualdeleteTran(deleteTran);">Yes</button>
        </div>
    </div>
</div>

<div class="row-fluid">

<div class="headsection row-fluid">

    <ul class="maintabs head-text">
        <li><a href="/ownership/company-captable">Capitalization</a></li>
        <li class="selectedtab">Grants</li>
        <li><a href="/ownership/company-status">Status</a></li>
    </ul>

    <div ng-show="lastsaved" class="last-saved">
        <span>Last saved at </span><span>{{lastsaved | date:'mediumTime'}}</span>
    </div>
</div>

<div class="row-fluid">
    <div class="captable-controls subnav-controls">
        <div>
            <div class="pull-left" ng-show="issues.length!==0">
                <div class="standard-button small-standard-button blue">
                    <button class="btn" ng-click="editViewToggle();">{{togglename()}}</span></button>
                </div>
            </div>
            <div class="pull-left" ng-show="maintoggle && issues.length!==0" style="margin-left:10px">
                <span>VIEW BY</span>
                <ul class="dropdown-list drop-selector">
                    <li class="dropdown standard">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            {{ optionView }}
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a ng-click="setView('Security')" class="button">Security</a>
                            </li>
                            <li>
                                <a ng-click="setView('Investor')" class="button">Investor</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div ng-show="false" class="pull-right">
                <div class="standard-button">
                    <button ng-click="modalUp();" class="btn">Share</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="DivHelper"></div>
    </div>
</div>

<div class="span8 docLibrary leftBlock">

    <table class="tableView bodyText grant-table" ng-show="issues.length===0 && done">
        <tbody class="empty-table">
        <tr>
            <td>
                <div>Welcome! <a href="/ownership/company-captable" class="link">Create an options security</a> on your
                    capitalization table to manage your grants
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="row-fluid">

        <table class="tableView bodyText grant-table" ng-class="{'viewmode': maintoggle}"
               ng-show="issues.length!==0 && optionView == 'Security'">
            <tr class="column-label">
                <th></th>
                <th></th>
                <th>Granted</th>
                <th>Vested</th>
                <th>Forfeited</th>
                <th>Exercised</th>
            </tr>
            <tbody ng-hide="(issue.trans.length==1 && maintoggle)" ng-repeat="issue in issues">
            <tr class="status-row">
                <td class="status-toggle pointer" ng-class="{'status-toggle-on': issue.shown}"
                    ng-click="opendetails(issue.issue, 'issue')">
                    <span ng-hide="issue.shown" data-icon="&#xe017;" aria-hidden="true"></span>
                    <span ng-show="issue.shown" data-icon="&#xe01c;" aria-hidden="true"></span>
                </td>
                <td>
                    <input disabled ng-model="issue.issue">
                </td>
                <td>{{formatAmount(issueGranted(issue))}}</td>
                <td>{{formatAmount(issueVested(issue))}}</td>
                <td>{{formatAmount(issueActions(issue, 'forfeited'))}}</td>
                <td>{{formatAmount(issueActions(issue, 'exercised'))}}</td>
            </tr>
            <tr class="transaction-rows" ng-show="issue.shown && !maintoggle" ng-repeat="tran in issue.trans">
                <td></td>
                <td><input ng-model="tran.investor"
                           placeholder="add new transaction"
                           ng-change="fauxupdating(tran)"
                           ui-event="{focus : 'getActiveTransaction(tran)', blur : 'updateName(tran)'}">
                </td>
                <td><input maxlength="18" placeholder="shares"
                           ng-disabled="!tran.investor"
                           ui-event="{focus : 'getActiveTransaction(tran)', blur : 'saveTran(activeTran)'}"
                           ng-model="tran.units">
                </td>
                <td ng-click="getActiveTransaction(tran, 'vested')"><span>{{formatAmount(transactionVested(tran.vested))}}</span></td>
                <td><input maxlength="18" placeholder="shares"
                           ng-disabled="!tran.investor"
                           ui-event="{focus : 'getActiveTransaction(tran, \'forfeited\')', blur : 'grantUpdateLR(tran, \'forfeited\')'}"
                           ng-model="tran.forfeited">
                </td>
                <td><input maxlength="18" placeholder="shares"
                           ng-disabled="!tran.investor"
                           ui-event="{focus : 'getActiveTransaction(tran, \'exercised\')', blur : 'grantUpdateLR(tran, \'exercised\')'}"
                           ng-model="tran.exercised">
                </td>
            </tr>
            <tr class="transaction-rows" ng-show="issue.shown && maintoggle" ng-repeat="tran in issue.trans | noempty">
                <td></td>
                <td ng-click="getActiveTransaction(tran, '', 'view')"><span>{{tran.investor}}</span></td>
                <td ng-click="getActiveTransaction(tran, '', 'view')"><span>{{formatAmount(tran.units)}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'vested', 'view')"><span>{{formatAmount(transactionVested(tran.vested))}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'forfeited', 'view')">
                    <span>{{formatAmount(tran.forfeited)}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'exercised', 'view')">
                    <span>{{formatAmount(tran.exercised)}}</span></td>
            </tr>
            </tbody>
            <tr class="total-row">
                <td>Total</td>
                <td colspan="5"></td>
            </tr>
            <tr class='tablefooter'>
                <td></td>
                <td></td>
                <td><input disabled value="{{formatAmount(totalTranAction('granted', trans))}}"></td>
                <td><input disabled value="{{formatAmount(totalVestedAction(trans))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('forfeited', grants))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('exercised', grants))}}"></td>
            </tr>
        </table>

        <table class="tableView bodyText grant-table viewmode" ng-show="issues.length!==0 && optionView == 'Investor'">
            <tr class="column-label">
                <th></th>
                <th></th>
                <th>Granted</th>
                <th>Vested</th>
                <th>Forfeited</th>
                <th>Exercised</th>
            </tr>
            <tbody ng-repeat="investor in investorLed">
            <tr class="status-row">
                <td class="status-toggle pointer" ng-class="{'status-toggle-on': investor.shown}"
                    ng-click="opendetails(investor.name, 'investor')">
                    <span ng-hide="investor.shown" data-icon="&#xe017;" aria-hidden="true"></span>
                    <span ng-show="investor.shown" data-icon="&#xe01c;" aria-hidden="true"></span>
                </td>
                <td>
                    <input disabled ng-model="investor.name">
                </td>
                <td>{{formatAmount(issueGranted(investor))}}</td>
                <td>{{formatAmount(issueVested(investor))}}</td>
                <td>{{formatAmount(issueActions(investor, 'forfeited'))}}</td>
                <td>{{formatAmount(issueActions(investor, 'exercised'))}}</td>
            </tr>
            <tr class="transaction-rows" ng-show="investor.shown && maintoggle"
                ng-repeat="tran in investor.trans | noempty">
                <td></td>
                <td ng-click="getActiveTransaction(tran, '', 'view')"><span>{{tran.issue}}</span></td>
                <td ng-click="getActiveTransaction(tran, '', 'view')"><span>{{formatAmount(tran.units)}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'vested', 'view')"><span>{{formatAmount(transactionVested(tran.vested))}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'forfeited', 'view')">
                    <span>{{formatAmount(tran.forfeited)}}</span></td>
                <td ng-click="getActiveTransaction(tran, 'exercised', 'view')">
                    <span>{{formatAmount(tran.exercised)}}</span></td>
            </tr>
            </tbody>
            <tr class="total-row">
                <td>Total</td>
                <td colspan="5"></td>
            </tr>
            <tr class='tablefooter'>
                <td></td>
                <td></td>
                <td><input disabled value="{{formatAmount(totalTranAction('granted', trans))}}"></td>
                <td><input disabled value="{{formatAmount(totalVestedAction(rows))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('forfeited', grants))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('exercised', grants))}}"></td>
            </tr>
        </table>
    </div>
</div>


<div class="span4 capright">
<div ng-switch on="sideBar">
<span ng-switch-when="1">

                <div class="headsection tabbed row-fluid">
                    <h1>{{activeInvestor}}</h1>

                    <p>Terms from the ownership table</p>
                </div>

              <div class="capGuide global" ng-show="mode == 1 && !maintoggle">

                  <h2>Transaction Information</h2>

                  <p class="rightTitle"><span>Date</span><input ng-show="mode == 1 && !maintoggle"
                                                                ng-disabled="toggleView();"
                                                                id="date{{activeTran.$$hashKey}}"
                                                                ui-event="{keydown:'saveTranDate(activeTran, \'date\', $event)', blur:'saveTranDate(activeTran, \'date\', \'blur\')'}"
                                                                ng-change="saveTranDate(activeTran, 'date')"
                                                                type="text" ng-model="activeTran.date"
                                                                data-date-format={{settings.lowercasedate}}
                                                                bs-datepicker>
                                        <span class="delete-icon" data-icon="&#xe00c;"
                                              ng-click="tranDeleteUp(activeTran);" aria-hidden="true"></span>

                  </p>

                  <p class="rightTitle"><span>Units</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                 ng-model="activeTran.units"></p>

                  <p class="rightTitle"><span>Strike Price</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                        ng-model="activeTran.price"></p>

                  <p class="rightTitle double"><span>Vesting Term (months)</span><input
                          ui-event="{blur : 'saveTran(activeTran)'}"
                          ng-model="activeTran.terms"></p>

                  <p class="rightTitle"><span>Vesting Cliff Date</span><input id="{{activeTran.$$hashKey}}"
                                                                              ui-event="{keydown:'saveTranDate(activeTran, \'vestingbegins\', $event)', blur:'saveTranDate(activeTran, \'vestingbegins\', \'blur\')'}"
                                                                              ng-change="saveTranDate(activeTran, 'vestingbegins')"
                                                                              type="text"
                                                                              ng-model="activeTran.vestingbegins"
                                                                              data-date-format={{settings.lowercasedate}}
                                                                              bs-datepicker></p>

                  <p class="rightTitle"><span>Vesting Cliff %</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                           ng-model="activeTran.vestcliff"></p>


                  <div class="rightTitle double"><span>Post Cliff Frequency</span>
                      <ul class="dropdown-list  drop-selector">
                          <li class="dropdown standard">
                              <a class="dropdown-toggle">
                                  {{activeTran.vestfreq}}<span class="invisible-drop">'</span>
                              </a>
                              <ul class="dropdown-menu">
                                  <li ng-repeat="i in freqtypes">
                                      <a ng-click="saveTranAssign(activeTran, 'vestfreq', i)">{{i}}</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </div>
              </div>

            <div class="capGuide grants" ng-show="mode == 2 && !maintoggle">

                <h2>Forfeit Information</h2>

                <ul>
                    <li class="grant-list" ng-repeat="act in activeTran.activeAct | grantSelect:'forfeited'">
                        <p class="rightTitle"><span>Date</span><input ng-change="saveGrant(act, 'forfeited')"
                                                                      ng-model="act.date"
                                                                      data-date-format={{settings.lowercasedate}}
                                                                      bs-datepicker></p>

                        <p class="rightTitle"><span>Shares</span><input
                                ui-event="{blur : 'saveGrant(act, \'forfeited\')'}" ng-model="act.unit">
                    </li>
                </ul>
            </div>

            <div class="capGuide grants" ng-show="mode == 3 && !maintoggle">

                <h2>Exercise Information</h2>

                <ul>
                    <li class="grant-list" ng-repeat="act in activeTran.activeAct | grantSelect:'exercised'">
                        <p class="rightTitle"><span>Date</span><input ng-change="saveGrant(act, 'exercised')"
                                                                      ng-model="act.date"
                                                                      data-date-format={{settings.lowercasedate}}
                                                                      bs-datepicker></p>

                        <p class="rightTitle"><span>Shares</span><input
                                ui-event="{blur : 'saveGrant(act, \'exercised\')'}" ng-model="act.unit">
                    </li>
                </ul>
            </div>

            <div class="capGuide grants" ng-show="mode == 4 && !maintoggle">

                <h2>Vested Information</h2>

                <ul>
                    <li class="grant-list"
                        ng-repeat="grant in activeTran.vested">
                        <p class="belowTitle"><span
                                ng-bind="grant.date | date:settings.shortdate"></span><span>Date</span></p>

                        <p class="belowTitle"><span ng-bind="formatAmount(grant.units)"></span><span>Shares</span></p>
                    </li>
                </ul>
            </div>


        </span>

<!-- Explain -->
        <span ng-switch-when="3">

            <div class="headsection tabbed row-fluid">
                <h1>{{activeInvestor}}</h1>

                <p>Terms from the ownership table</p>
            </div>

              <div class="capGuide grants" ng-show="mode == 1 && maintoggle">

                  <h2>Transaction Information</h2>

                  <p ng-show="activeTran.date" class="belowTitle"><span
                          ng-bind="activeTran.date | date:settings.shortdate"></span><span>Date</span></p>

                  <p ng-show="activeTran.units" class="belowTitle"><span
                          ng-bind="formatAmount(activeTran.units)"></span><span>Shares</span></p>

                  <p ng-show="activeTran.optundersec" class="belowTitle"><span
                          ng-bind="activeTran.optundersec"></span><span tooltip-placement="top"
                                                                        tooltip="The security each granted share will convert to upon exercise">Underlying Security</span>
                  </p>

                  <p ng-show="activeTran.price" class="belowTitle"><span
                          ng-bind="formatDollarAmount(activeTran.price)"></span><span tooltip-placement="top"
                                                                                      tooltip="The price each granted share can be purchased at when vested">Strike Price</span>
                  </p>

                  <p ng-show="activeTran.terms" class="belowTitle"><span ng-bind="activeTran.terms"></span><span
                          tooltip-placement="top" tooltip="The total number of months until fully vested">Vesting Term (months)</span>
                  </p>

                  <p ng-show="activeTran.vestingbegins" class="belowTitle"><span
                          ng-bind="activeTran.vestingbegins | date:settings.shortdate"></span><span
                          tooltip-placement="top" tooltip="The date the vesting cliff percentage becomes vested">Vesting Cliff Date</span>
                  </p>

                  <p ng-show="activeTran.vestcliff" class="belowTitle"><span ng-bind="activeTran.vestcliff"></span><span
                          tooltip-placement="top"
                          tooltip="The percentage of granted shares that are considered vested on the cliff date">Vesting Cliff %</span>
                  </p>

                  <p ng-show="activeTran.vestfreq" class="belowTitle"><span ng-bind="activeTran.vestfreq"></span><span
                          tooltip-placement="top"
                          tooltip="The frequency that granted shares vest after the cliff date, distributed evenly by frequency until the vesting term ends">Post Cliff Frequency</span>
                  </p>
              </div>

              <div class="capGuide grants" ng-show="mode == 2 && maintoggle">

                  <h2>Forfeit Information</h2>

                  <ul>
                      <li class="grant-list" ng-show="act.unit"
                          ng-repeat="act in activeTran.activeAct | grantSelect:'forfeited'">
                          <p class="belowTitle"><span
                                  ng-bind="act.date | date:settings.shortdate"></span><span>Date</span></p>

                          <p class="belowTitle"><span ng-bind="act.unit"></span><span>Shares</span></p>
                      </li>
                  </ul>
              </div>

            <div class="capGuide grants" ng-show="mode == 3 && maintoggle">

                <h2>Exercised Information</h2>

                <ul>
                    <li class="grant-list" ng-show="act.unit"
                        ng-repeat="act in activeTran.activeAct | grantSelect:'exercised'">
                        <p class="belowTitle"><span
                                ng-bind="act.date | date:settings.shortdate"></span><span>Date</span></p>

                        <p class="belowTitle"><span ng-bind="act.unit"></span><span>Shares</span></p>
                    </li>
                </ul>
            </div>

            <div class="capGuide grants" ng-show="mode == 4 && maintoggle">

                <h2>Vested Information</h2>

                <ul>
                    <li class="grant-list"
                        ng-repeat="grant in activeTran.vested">
                        <p class="belowTitle"><span
                                ng-bind="grant.date | date:settings.shortdate"></span><span>Date</span></p>

                        <p class="belowTitle"><span ng-bind="formatAmount(grant.units)"></span><span>Shares</span></p>
                    </li>
                </ul>
            </div>

        </span>

        <span ng-switch-when="2">
          <p>Investor Email <input disabled ng-model="activeInvestorName"></p>
        </span>
        <span class="capGuide railpadding" ng-switch-default>
            <h1 class="right-bar-header">Manage your Grants</h1>

            <p>Grant information is derived from the cap table, but allows for more control such as
                exercising or forfeiting shares. Any transaction in the cap table that's not been fully
                paid for, and has an underlying stock class, will be considered a grant and display in this view.
            </p>

            <p>Actions taken here on any transaction will also be reflected in your cap table,
                as both are simply views on your shareholder transactions.
            </p>
          </span>
</div>
</div>
</div>
</div>
</div>


<div class="push"></div>