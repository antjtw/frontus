<div class="maincontent">
<div class="container dynamic-page">

<div modal="capShare" close="close()" options="shareopts">
    <div class="modalHeader">
        <span>Share Ownership Table</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="close()"></span>
    </div>
    <div>
        <p>Shareholders only see their personal holdings by default, change this by visiting their profile
            to grant full access.
        </p>
        <form>
            <ul>
                <li>
                    <input ng-model="selectAll" ng-change="turnOnShares();" class="checkbox" type="checkbox">
                    <span>Name</span>
                    <span>Email</span>
                </li>
                <li ng-repeat="row in rows | shareList">
                    <input class="checkbox" ng-model="row.send" type="checkbox" tabindex="-1">
                    <span class="capshareNames">{{row.name}}</span>
                    <input ng-class="{'content':!row.email, 'error':emailCheck(row.send, row.email)}"
                           ng-disabled="row.emailkey" ng-model="row.email" ng-change="row.send = autoCheck(row.email)">
                </li>
            </ul>
        </form>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="close();">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-disabled="checkInvites();" ng-click="close(); sendInvites();">Submit</button>
        </div>
    </div>
</div>

<div class="row-fluid">

    <div class="headsection row-fluid">

        <ul class="maintabs head-text">
            <li><a href="/ownership/company-captable">Capitalization</a></li>
            <li class="selectedtab">Grants</li>
            <li><a href="/ownership/company-status">Status</a></li>
        </ul>
    </div>

    <div class="row-fluid">
        <div class="captable-controls subnav-controls">
            <div>
                <div ng-show="rows.length > 0" class="pull-right">
                    <div class="standard-button">
                        <button ng-click="modalUp();" class="btn">Share</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="DivHelper"></div>
        </div>
    </div>

    <div class="span8 docLibrary leftBlock">

        <div class="row-fluid">
            <table class="tableView bodyText grant-table" ng-show="rows.length===0">
                <tbody class="empty-table">
                <tr>
                    <td>
                        Welcome! <a href="/ownership/company-captable" class="link">Create an options security</a> on your capitalization table to manage your grants
                    </td>
                </tr>
                </tbody>
            </table>
            <table class="tableView bodyText grant-table" ng-show="rows.length!==0">
                <tr class="column-label">
                    <th>Shareholder</th>
                    <th>Granted</th>
                    <th>Vested</th>
                    <th>Forfeited</th>
                    <th>Exercised</th>
                </tr>
                <tr class="pointer status-row" ng-click="getActiveTransaction(row.name)" ng-repeat="row in rows" ng-class="{rowSelected:row.state}">
                    <td>
                        <input class="pointer" disabled style="width:180px;" ng-model="row.name">
                    </td>
                    <td>{{formatAmount(row.granted)}}</td>
                    <td>{{formatAmount(row.vested)}}</td>
                    <td>{{formatAmount(row.forfeited)}}</td>
                    <td>{{formatAmount(row.exercised)}}</td>
                </tr>
                <tr class="total-row">
                    <td>Total</td>
                    <td colspan="4"></td>
                </tr>
                <tr class='tablefooter'>
                    <td></td>
                    <td><input disabled value="{{formatAmount(totalTranAction('granted', trans))}}"></td>
                    <td><input disabled value="{{formatAmount(totalVestedAction(rows))}}"></td>
                    <td><input disabled value="{{formatAmount(totalGrantAction('forfeited', grants))}}"></td>
                    <td><input disabled value="{{formatAmount(totalGrantAction('exercised', grants))}}"></td>
                </tr>
            </table>
        </div>
    </div>


    <div class="span4 capright">
        <div ng-switch on="sideBar">
        <span ng-switch-when="1">
          <div class="headsection tabbed row-fluid">
              <h1>{{activeInvestor}}</h1>
              <p>Terms from the ownership table</p>
          </div>
          <tabset class="trantabs">
              <tab ng-repeat="tran in activeTran" heading="{{tran.date | date:settings.shortdate}}" active="tran.active">

                  <div class="capGuide global">

                      <h2>Transaction Information</h2>

                      <div class="rightTitle double"><span>Underlying Security</span>
                          <ul class="dropdown-list  drop-selector">
                              <li class="dropdown standard">
                                  <a class="dropdown-toggle">
                                      {{tran.optundersec | maxLength}}<span class="invisible-drop">'</span>
                                  </a>
                                  <ul class="dropdown-menu">
                                      <li ng-repeat="i in tran.allowKeys">
                                          <a ng-click="saveTranAssign(tran, 'optundersec', i)">{{i | maxLength}}</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </div>

                      <p class="rightTitle"><span>Strike Price</span><input ui-event="{blur : 'saveTran(tran)'}"
                                                                            ng-model="tran.price"></p>

                      <p class="rightTitle double"><span>Vesting Term (months)</span><input ui-event="{blur : 'saveTran(tran)'}"
                                                                                            ng-model="tran.terms"></p>

                      <p class="rightTitle"><span>Vesting Cliff Date</span><input id="{{tran.$$hashKey}}"
                                                                                  ui-event="{keydown:'saveTranDate(tran, \'vestingbegins\', $event)', blur:'saveTranDate(tran, \'vestingbegins\', \'blur\')'}"
                                                                                  ng-change="saveTranDate(tran, \'vestingbegins\')"
                                                                                  type="text"
                                                                                  ng-model="tran.vestingbegins"
                                                                                  data-date-format={{settings.lowercasedate}}
                                                                                  bs-datepicker></p>

                      <p class="rightTitle"><span>Vesting Cliff %</span><input ui-event="{blur : 'saveTran(tran)'}"
                                                                               ng-model="tran.vestcliff"></p>


                      <div class="rightTitle double"><span>Post Cliff Frequency</span>
                          <ul class="dropdown-list  drop-selector">
                              <li class="dropdown standard">
                                  <a class="dropdown-toggle">
                                      {{tran.vestfreq}}<span class="invisible-drop">'</span>
                                  </a>
                                  <ul class="dropdown-menu">
                                      <li ng-repeat="i in freqtypes">
                                          <a ng-click="saveTranAssign(tran, 'vestfreq', i)">{{i}}</a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </div>
                  </div>


                  <div class="capGuide grants">

                      <h2>Grant Activity</h2>

                      <ul>
                          <li class="grant-list" ng-repeat="act in tran.activeAct">
                              <div class="rightTitle"><span>Action</span>
                                  <ul style="display: inline-block" class="dropdown-list drop-selector">
                                      <li class="dropdown standard">
                                          <a class="dropdown-toggle">
                                              {{act.action}}<span class="invisible-drop">'</span>
                                          </a>
                                          <ul ng-hide="toggleView();" class="dropdown-menu">
                                              <li ng-repeat="i in possibleActions">
                                                  <a ng-click="saveGrantDrop(act, i)">{{i}}</a>
                                              </li>
                                          </ul>
                                      </li>
                                  </ul>
                              </div>
                              <p class="rightTitle"><span>Date</span><input ng-change="saveGrant(act)" ng-model="act.date" data-date-format={{settings.lowercasedate}} bs-datepicker></p>
                              <p class="rightTitle"><span>Shares</span><input ui-event="{blur : 'saveGrant(act)'}" ng-model="act.unit">
                          </li>
                      </ul>
                  </div>
              </tab>
          </tabset>
        </span>

        <span ng-switch-when="2">
          <p>Investor Email <input disabled ng-model="activeInvestorName"></p>
        </span>
        <span class="capGuide railpadding" ng-switch-default>
            <h1 class="right-bar-header">Manage your Grants</h1>

            <p>Grant information is derived from the cap table, but allows for more control such as
                exercising or forfeiting shares. Any transaction in the cap table that's not been fully
                paid for, and has an underlying stock class, will be considered a grant and display in this view.
            </p>

            <p>Actions taken here on any transaction will also be reflected in your cap table,
                as both are simply views on your shareholder transactions.
            </p>
          </span>
        </div>
    </div>
</div>
</div>
</div>


<div class="push"></div>