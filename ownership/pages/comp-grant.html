<div class="maincontent">
<div class="container dynamic-page">

<div modal="capShare" close="close()" options="shareopts">
    <div class="modalHeader">
        <span>Share Ownership Table</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="close()"></span>
    </div>
    <div>
        <p>Shareholders only see their personal holdings by default, change this by visiting their profile
            to grant full access.
        </p>
        <form>
            <ul>
                <li>
                    <input ng-model="selectAll" ng-change="turnOnShares();" class="checkbox" type="checkbox">
                    <span>Name</span>
                    <span>Email</span>
                </li>
                <li ng-repeat="row in rows | shareList">
                    <input class="checkbox" ng-model="row.send" type="checkbox" tabindex="-1">
                    <span class="capshareNames">{{row.name}}</span>
                    <input ng-class="{'content':!row.email, 'error':emailCheck(row.send, row.email)}"
                           ng-disabled="row.emailkey" ng-model="row.email" ng-change="row.send = autoCheck(row.email)">
                </li>
            </ul>
        </form>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="close();">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-disabled="checkInvites();" ng-click="close(); sendInvites();">Submit</button>
        </div>
    </div>
</div>

<div class="row-fluid">

<div class="headsection row-fluid">

    <ul class="maintabs head-text">
        <li><a href="/ownership/company-captable">Capitalization</a></li>
        <li class="selectedtab">Grants</li>
        <li><a href="/ownership/company-status">Status</a></li>
    </ul>
</div>

<div class="row-fluid">
    <div class="captable-controls subnav-controls">
        <div>
            <div ng-show="rows.length > 0" class="pull-right">
                <div class="standard-button">
                    <button ng-click="modalUp();" class="btn">Share</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="DivHelper"></div>
    </div>
</div>

<div class="span8 docLibrary leftBlock">

    <table class="tableView bodyText grant-table" ng-show="issues.length===0">
        <tbody class="empty-table">
        <tr>
            <td>
                <div>Welcome! <a href="/ownership/company-captable" class="link">Create an options security</a> on your capitalization table to manage your grants</div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="row-fluid">
        <!--<table class="tableView bodyText grant-table" ng-show="rows.length!==0">
            <tr class="column-label">
                <th>Shareholder</th>
                <th>Granted</th>
                <th>Vested</th>
                <th>Forfeited</th>
                <th>Exercised</th>
            </tr>
            <tr class="pointer status-row" ng-click="getActiveTransaction(row.name)" ng-repeat="row in rows" ng-class="{rowSelected:row.state}">
                <td>
                    <input class="pointer" disabled style="width:180px;" ng-model="row.name">
                </td>
                <td>{{formatAmount(row.granted)}}</td>
                <td>{{formatAmount(row.vested)}}</td>
                <td>{{formatAmount(row.forfeited)}}</td>
                <td>{{formatAmount(row.exercised)}}</td>
            </tr>
            <tr class="total-row">
                <td>Total</td>
                <td colspan="4"></td>
            </tr>
            <tr class='tablefooter'>
                <td></td>
                <td><input disabled value="{{formatAmount(totalTranAction('granted', trans))}}"></td>
                <td><input disabled value="{{formatAmount(totalVestedAction(rows))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('forfeited', grants))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('exercised', grants))}}"></td>
            </tr>
        </table>-->

        <table class="tableView bodyText grant-table" ng-show="issues.length!==0">
            <tr class="column-label">
                <th></th>
                <th></th>
                <th>Granted</th>
                <th>Vested</th>
                <th>Forfeited</th>
                <th>Exercised</th>
            </tr>
            <tbody ng-repeat="issue in issues">
            <tr class="status-row">
                <td class="status-toggle pointer" ng-class="{'status-toggle-on': issue.shown}" ng-click="opendetails(issue.issue)">
                    <span ng-hide="issue.shown" data-icon="&#xe017;" aria-hidden="true"></span>
                    <span ng-show="issue.shown" data-icon="&#xe01c;" aria-hidden="true"></span>
                </td>
                <td>
                    <input class="pointer" disabled style="width:180px;" ng-model="issue.issue">
                </td>
                <td>{{formatAmount(issueGranted(issue))}}</td>
                <td>{{formatAmount(issue.vested)}}</td>
                <td>{{formatAmount(issue.forfeited)}}</td>
                <td>{{formatAmount(issue.exercised)}}</td>
            </tr>
            <tr ng-show="issue.shown" ng-repeat="tran in issue.trans">
                <td></td>
                <td><input  ng-model="tran.investor"
                            ng-change="fauxupdating(tran)"
                            ui-event="{focus : 'getActiveTransaction(tran)', blur : 'updateName(tran)'}">
                </td>
                <td><input maxlength="18"
                           placeholder="shares"
                           ui-event="{focus : 'getActiveTransaction(tran)', blur : 'saveTran(activeTran)'}"
                           ng-model="tran.units">
                </td>
                <td>{{tran.vested}}</td>
                <td>{{tran.forfeited}}</td>
                <td><input maxlength="18"
                           ui-event="{focus : 'getActiveTransaction(tran, \'exercised\')'}"
                           ng-model="tran.exercised">
                </td>
            </tr>
            </tbody>
            <tr class="total-row">
                <td>Total</td>
                <td colspan="5"></td>
            </tr>
            <tr class='tablefooter'>
                <td></td>
                <td></td>
                <td><input disabled value="{{formatAmount(totalTranAction('granted', trans))}}"></td>
                <td><input disabled value="{{formatAmount(totalVestedAction(rows))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('forfeited', grants))}}"></td>
                <td><input disabled value="{{formatAmount(totalGrantAction('exercised', grants))}}"></td>
            </tr>
        </table>
    </div>
</div>


<div class="span4 capright">
    <div ng-switch on="sideBar">
        <span ng-switch-when="1">
          <div class="headsection tabbed row-fluid">
              <h1>{{activeInvestor}}</h1>
              <p>Terms from the ownership table</p>
          </div>

              <div class="capGuide global" ng-show="mode == 1">

                  <h2>Transaction Information</h2>

                  <p class="rightTitle"><span>Units</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                        ng-model="activeTran.units"></p>

                  <div class="rightTitle double"><span>Underlying Security</span>
                      <ul class="dropdown-list  drop-selector">
                          <li class="dropdown standard">
                              <a class="dropdown-toggle">
                                  {{activeTran.optundersec | maxLength}}<span class="invisible-drop">'</span>
                              </a>
                              <ul class="dropdown-menu">
                                  <li ng-repeat="i in activeTran.allowKeys">
                                      <a ng-click="saveTranAssign(activeTran, 'optundersec', i)">{{i | maxLength}}</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </div>

                  <p class="rightTitle"><span>Strike Price</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                        ng-model="activeTran.price"></p>

                  <p class="rightTitle double"><span>Vesting Term (months)</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                                        ng-model="activeTran.terms"></p>

                  <p class="rightTitle"><span>Vesting Cliff Date</span><input id="{{activeTran.$$hashKey}}"
                                                                              ui-event="{keydown:'saveTranDate(activeTran, \'vestingbegins\', $event)', blur:'saveTranDate(activeTran, \'vestingbegins\', \'blur\')'}"
                                                                              ng-change="saveTranDate(activeTran, \'vestingbegins\')"
                                                                              type="text"
                                                                              ng-model="activeTran.vestingbegins"
                                                                              data-date-format={{settings.lowercasedate}}
                                                                              bs-datepicker></p>

                  <p class="rightTitle"><span>Vesting Cliff %</span><input ui-event="{blur : 'saveTran(activeTran)'}"
                                                                           ng-model="activeTran.vestcliff"></p>


                  <div class="rightTitle double"><span>Post Cliff Frequency</span>
                      <ul class="dropdown-list  drop-selector">
                          <li class="dropdown standard">
                              <a class="dropdown-toggle">
                                  {{activeTran.vestfreq}}<span class="invisible-drop">'</span>
                              </a>
                              <ul class="dropdown-menu">
                                  <li ng-repeat="i in freqtypes">
                                      <a ng-click="saveTranAssign(activeTran, 'vestfreq', i)">{{i}}</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </div>
              </div>


              <div class="capGuide grants" ng-show="mode == 2">

                  <h2>Exercise Information</h2>

                  <ul>
                      <li class="grant-list" ng-repeat="act in activeTran.activeAct">
                          <p class="rightTitle"><span>Date</span><input ng-change="saveGrant(act, 'exercised')" ng-model="act.date" data-date-format={{settings.lowercasedate}} bs-datepicker></p>
                          <p class="rightTitle"><span>Shares</span><input ui-event="{blur : 'saveGrant(act, \'exercised\')'}" ng-model="act.unit">
                      </li>
                  </ul>
              </div>
        </span>

        <span ng-switch-when="2">
          <p>Investor Email <input disabled ng-model="activeInvestorName"></p>
        </span>
        <span class="capGuide railpadding" ng-switch-default>
            <h1 class="right-bar-header">Manage your Grants</h1>

            <p>Grant information is derived from the cap table, but allows for more control such as
                exercising or forfeiting shares. Any transaction in the cap table that's not been fully
                paid for, and has an underlying stock class, will be considered a grant and display in this view.
            </p>

            <p>Actions taken here on any transaction will also be reflected in your cap table,
                as both are simply views on your shareholder transactions.
            </p>
          </span>
    </div>
</div>
</div>
</div>
</div>


<div class="push"></div>