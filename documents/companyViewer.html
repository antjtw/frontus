<div class="container">
  <div class="row-fluid">
    <div class="headsection row-fluid">
<!--        <h2>
            <a href="/documents/">
                <span class="back-icon" data-icon="&#xe032;" aria-hidden="true"></span>
            </a>
            <span restrict-content-editable contentEditable="true" class="doc-title" ng-model="document.docname" title="Click to Edit" ng-bind="document.docname | limitTo:58 || ''"></span>
        </h2>-->

        <ul class="maintabs head-text">
            <li class="selectedtab"><a href="/documents/company-list">Documents</a></li>
            <li class="selectedtab"><span restrict-content-editable contentEditable="true" class="doc-title" ng-model="document.docname" title="Click to Edit" ng-bind="document.docname | limitTo:48 || ''"></span></li>
            <li><a href="/documents/company-status?doc={{docKey}}">Status</a></li>
        </ul>

        <!--
        <div class="row-fluid">
            <ul class="bodyText maintabs">
                <li class="button">
                  <a href="/documents/company-status?doc={{docKey}}">
                    Status
                </a>
              </li>
                <li class="selectedtab">View</li>
            </ul>
        </div>
        -->
    </div>

      <div class="row-fluid">
          <div class="subnav-controls flush-controls">
              <div>
                  <div class="pull-right">
                      <div class="standard-button">
                          <button class="btn" ng-show="tester && currentDoc.original" ng-click="retract(currentDoc)">Retract share</button>
                      </div>
                  </div>
                  <div class="pull-right">
                      <div class="standard-button">
                          <button class="btn" ng-show="tester && !(currentDoc.when_signed || currentDoc.original == currentDoc.docId)" ng-click="fakeSign(currentDoc)">Fake Sign</button>
                      </div>
                  </div>
                  <div class="pull-right">
                      <div class="standard-button">
                          <button class="btn" ng-show="currentDoc.when_signed && !currentDoc.when_confirmed" ng-click="confirmModal=true">Countersign</button>
                      </div>
                  </div>
                  <div class="pull-right">
                      <div class="standard-button red">
                          <button class="btn" ng-show="currentDoc.when_signed && !currentDoc.when_confirmed" ng-click="rejectDocOpen()">Reject Signature</button>
                      </div>
                  </div>
                  <div class="pull-right">
                      <div class="standard-button">
                          <button class="btn" ng-show="tester && currentDoc.when_confirmed" ng-click="renege(currentDoc)">Renege Countersignature</button>
                      </div>
                  </div>
                  <div class="pull-right">
                      <div class="standard-button">
                          <button ng-hide="counterparty" class="btn" ng-click="shareDocOpen()">Share Document</button>
                      </div>
                  </div>
              </div>
              <div class="DivHelper"></div>
          </div>
      </div>
  </div>


  <div class="row-fluid">
    <div class="span3 docVersiontab leftBlock">
      <ul>
        <li ng-class="{thisone: docId==docKey, thatone:true}" ng-click="getOriginal();">
          <span class="unselectable">Original</span>
          <span class="tab-arrow" data-icon="&#xe033;"></span>
        </li>
        <li ng-repeat="doc in docversions" ng-class="{thisone: docId == doc.doc_id, thatone:true}" ng-click="pickInvestor(doc);" >
          <span class="unselectable" >{{doc | nameoremail}}<span class="for-r0ml">[{{ doc.doc_id }}]</span><span class="tab-arrow" data-icon="&#xe033;"></span><span class="smallDate for-r0ml">({{doc.investor}})</span></span>
          <ul style="padding-left: 3em;" ng-show="doc.doc_id==docId" ng-repeat="pp in modifiedPages">
             <li ng-click="jumpToPage(pp);">Page {{ pp }}</li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="span9 companyDocViewer">
        <div class="row-fluid">
         <doc-viewer page-query-string="pageQueryString()" doc-id="docId" invq="false"></doc-viewer>
        </div>
    </div>
  </div>
</div>

  <div modal="confirmModal" close="confirmModalClose()" options="opts">
    <div class="sign-modal">
      <div class="modalHeader">
        <span data-icon="&#xe00d;" aria-hidden="true"></span>Confirm Electronic Countersignature
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="confirmModalClose()"></span>
      </div>

      <div class='modalText esign'>
          <input class="checkbox-class" type="checkbox" ng-model="confirmSignature">
          <span class="chkboxtext">
              Do you wish to electonically counter-sign this document?<br>(This action is irreversible)
          </span>
      </div>

      <div class="dModalButtons">
        <button class="greyButton" ng-click="confirmModalClose()">Cancel</button>
        <button class="greenButton" ng-disabled="processing || !confirmSignature" ng-click="countersignDocument(currentDoc);">Sign</button>
      </div>
    </div>
  </div>

<div modal="shareDocModal" close="shareDocClose()" options="opts">
    <div class="modalHeader">
        <span data-icon="&#xe027;" aria-hidden="true"></span>Share Document
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="shareDocClose()"></span>
    </div>
    <div class="modalText dshare">
        <ul>
            <li>
                <span>Email Address</span>
                <input ng-model="recipient" type="text" typeahead="investor for investor in vInvestors | filter:$viewValue" typeahead-min-length="1"/>
            </li>
            <li>
                <span>Get Signature?</span>
                <ul class="dropdown-list">
                    <li class="dropdown standard small">
                        <a class="dropdown-toggle">
                            {{signeeded}}<span class="invisible-drop">'</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a ng-click="changeSig('No')">No</a>
                                <a ng-click="changeSig('Yes')">Yes</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <textarea class="email-text" rows="4" cols="60" ng-model="messageText"></textarea>
    </div>
    <div class="modalButtons">
        <div class="left"><button class="button subText greyButton left" ng-click="shareDocClose()">Cancel</button></div>
        <div class="right">
            <button class="button subText greenButton" ng-click="shareDocClose(); share(messageText, recipient, signeeded);">Share
            </button>
        </div>
    </div>
</div>

<div modal="rejectDocModal" close="rejectDocClose()" options="opts">
  <div class="modalSize">
    <div class="modalHeader">
        <span data-icon="&#xe01b;" aria-hidden="true"></span>Reject Document
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="rejectDocClose()"></span>
    </div>
    <div class="messageSection">
        <textarea class="messageText" rows="4" ng-model="messageText"></textarea>
    </div>
    <div class="modal-buttons">
        <div class="leftModalButton">
            <button class="button subText greyButton" ng-click="rejectDocClose()">Cancel</button>
        </div>
        <div class="rightModalButton">
            <button class="button subText greenButton" ng-click="rejectDocClose(); rejectSignature(currentDoc, messageText);">Reject</button>
        </div>
    </div>
  </div>
</div>
