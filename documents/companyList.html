<div class="container">

  <div modal="shareModal" modalshare></div>

  <div class="row-fluid">
  	<div class="headsection row-fluid">

        <ul class="maintabs head-text">
            <li class="selectedtab">Documents</li>
        </ul>
    </div>

    <div style="margin-left: 0;" class="span12 recipientInfo docLibrary statusBlock">
        <div class="row-fluid">
            <div class="subnav-controls">
                <div>

                    <div class="pull-left">
                        <span>Search</span>
                        <input type="text" class="search-box" ng-model="query">
                    </div>

                    <div class="pull-right">
                        <div class="standard-button">
                            <button ng-click="documentUploadOpen();" class="btn">Upload Document
                            </button>
                        </div>
                    </div>
                </div>
                <div class="DivHelper"></div>
            </div>
            <table class="status-table">
                <tbody>
                    <tr>
                        <th colspan="2" class="left" style="width:45%" ng-click="setOrder('docname')">Document Name</th>
                        <th colspan="2" class="left" style="width:40%">Status</th><!--TODO: sort by status?-->
                        <th></th>
                        <th></th>
                    </tr>
                </tbody>
                <tbody ng-repeat="doc in documents | filter:searchFilter | orderBy:docOrder">
                    <tr class="empty-row"></tr>
                    <tr ng-class="{selectedrow:doc.shown}">
                        <td class="status-toggle" ng-class="{'status-toggle-on': doc.shown}" ng-click="!doc.versions[0] || opendetails(doc)">
                            <span ng-hide="doc.shown || !doc.versions[0]" data-icon="&#xe017;" aria-hidden="true"></span>
                            <span ng-show="doc.shown && doc.versions[0]" data-icon="&#xe01c;" aria-hidden="true"></span>
                        </td>
                        <td class="shareholder-column docname-column" ng-click="viewOriginal(doc)">
                            <ul>
                                <li>{{doc.docname}}</li>
                                <li>{{docStatus(doc)}}</li>
                            </ul>
                        </td>
                        <td class="status-toggle status-icon">
                            <div ng-show="docIsComplete(doc)" data-icon="&#xe023;" class="circle green" aria-hidden="true"></div>
                            <div ng-hide="docIsComplete(doc)" class="circle yellow"></div>
                        </td>
                        <td class="shareholder-column status-column" ng-click="viewStatus(doc)">
                            <ul>
                                <li>{{shortDocStatus(doc)}}</li>
                                <li>{{docStatusRatio(doc)}}</li>
                            </ul>
                        </td>
                        <td>
                            <div class="standard-button small-standard-button gray">
                                <button class="btn" ng-click="shareDocOpen(doc)">Share</button>
                            </div>
                        </td>
                        <td>
                            <ul class="dropdown-list">
                                <li class="dropdown standard menu-drop">
                                    <a class="dropdown-toggle">
                                        <span data-icon="&#xe011;" aria-hidden="true"></span>
                                    </a>
                                    <ul ng-hide="toggleView();" class="dropdown-menu">
                                        <li ng-click="viewOriginal(doc)">View Original</li>
                                        <li ng-click="renameDocument(doc)">Rename</li>
                                        <li ng-click="deleteDoc(doc)">Delete</li>
                                    </ul>
                                </li>
                          </ul>
                    </tr>
                    <tr ng-show="doc.shown" class="sub-row" ng-repeat="version in doc.versions">
                        <td class="status-toggle"></td>
                        <td class="shareholder-column docname-column">
                            <ul>
                                <li>{{version.name || version.investor}}</li>
                                <li>{{versionStatus(version)}}</li>
                            </ul>
                        </td>
                        <td class="status-toggle status-icon">
                            <div ng-show="versionIsComplete(version)" data-icon="&#xe023;" class="circle green" aria-hidden="true"></div>
                            <div ng-hide="versionIsComplete(version)" class="circle yellow" aria-hidden="true"></div>
                        </td>
                        <td class="shareholder-column status-column">
                            <ul>
                                <li>{{version.last_event.activity}}</li>
                                <li>{{momentFromNow(version.last_event.event_time)}}</li>
                            </ul>
                        </td>
                        <td>
                            <div class="standard-button small-standard-button">
                                <button ng-show="isPendingSignature(version)" class="btn">Remind</button>
                                <button ng-show="isPendingCountersignature(version)" class="btn" ng-click="viewInvestorCopy(doc, version)">Sign Now</button>
                            </div>
                        </td>
                        <td>
                            <ul class="dropdown-list">
                                <li class="dropdown standard menu-drop">
                                    <a class="dropdown-toggle dark" ng-click="viewInvestorCopy(doc, version)">
                                        <span data-icon="&#xe009;" aria-hidden="true"></span>
                                    </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- <uploadModal class="upload-modal" ng-show="uploadModal" close="uploadModalClose()" options="{dialogClass: 'modal upload-modal-positioning'}" >  </uploadModal> -->


    <!--
    <section class="statusBlock" library>
            <div class="row-fluid">
                <div class="subnav-controls">
                    <div>

                        <div class="pull-left">
                            <span>Search</span>
                            <input type="text" class="search-box" ng-model="query">
                        </div>

                        <div class="pull-right">
                            <div class="standard-button">
                                <button ng-click="documentUploadOpen();" class="btn">Upload Document
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="DivHelper"></div>
                </div>
            </div>
            <table class="docLibrary doclib tableView bodyText">
              <tr class="column-label status-columns">
                  <th class="button" ng-click="setOrder('docname')">
                      <span class="title sortedDown">Name</span>
                      <div style="display: none; vertical-align: middle; position: relative;">
                          <span data-icon="&#xe034;" class="topSortIcon" ng-style="docOrder=='docname' && {'color': '#1E2D3D'}" aria-hidden="true"></span>
                          <span data-icon="&#xe031;" class="bottomSortIcon" ng-style="docOrder=='-docname' && {'color': '#1E2D3D'}" aria-hidden="true"></span>
                      </div>
                  </th>
                  <th colspan="5" class="button" ng-click="setOrder('last_updated')">
                      <span class="title">Last Updated</span>
                      <div style="display: none; vertical-align: middle; position: relative;">
                          <span data-icon="&#xe034;" class="topSortIcon" ng-style="docOrder=='last_updated' && {'color': '#1E2D3D'}" aria-hidden="true"></span>
                          <span data-icon="&#xe031;" class="bottomSortIcon" ng-style="docOrder=='-last_updated' && {'color': '#1E2D3D'}" aria-hidden="true"></span>
                      </div>
                  </th>
              </tr>
              <tr ng-click="gotoDoc(doc.doc_id)" class="pointer status-row" ng-repeat="doc in documents  | filter:searchFilter  | orderBy:docOrder">
                <td>{{doc.docname}}</td>
                <td><span class="dateFormatting">{{doc.last_updated | fromNow}}</span></td>
                <td class="button for-r0ml" ng-click="askShare(doc.doc_id)"><span tooltip-placement="bottom" tooltip="Share"><i class="icon-share icon-large"></i></span></td>
                <td class="button for-r0ml" ng-click="delete(doc.doc_id)"><span tooltip-placement="bottom" tooltip="Delete"><i class="icon-delete icon-large"></i></span></td>
                <td></td>
              </tr>
            </table>
            <div ng-hide="documents">You have no documents.</div>
    </section>
    -->
              <!-- The template for showing files that are currently uploading -->
<!--              <tr ng-show="progressVisible">
                <td>{{uploading.docname}}</td>
                <td><span class="uploadingText">Uploading Document<span id="dots">...</span></span></td>
                <td colspan="3"></td>
              </tr>
              -->


  </div>
</div>

<div modal="documentUploadModal" close="documentUploadClose()" options="narrowopts">
    <div class="modalHeader">
        <span>Upload a document</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="documentUploadClose()"></span>
    </div>

    <div class="modalText uploadModal">
        <p>Currently we're only taking PDF files (20MB max)</p>
        <form class="form-inline">
            <fieldset>
                <div ng-show="fileError" class="upload-errors">
                    <span>{{fileError}}</span>
                </div>
                <div class="fileinputs">
                    <input ng-hide="showProgress || showProcessing" type="file" class='file' onchange="angular.element(this).scope().setFiles(this);"/>
                    <div ng-hide="showProgress" class="fakefile">
                        <span>CHOOSE FILE</span>
                        <div ng-show="files.length">
                            <span>{{files[0].name | fileLength}}</span>
                        </div>
                    </div>
                    <div ng-show="showProgress" class="progress-bar"><progress percent="loadProgress"></progress></div>
                </div>
                <div ng-show="showProcessing" class="upload-errors">
                    <span>Processing Document</span>
                </div>
            </fieldset>
        </form>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="documentUploadClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="uploadFile(files)">Upload</button>
        </div>
    </div>
</div>
