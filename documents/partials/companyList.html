<link type="text/css" rel="stylesheet" href="/documents/css/app.css">
<script src="/cmn/spin.js"></script>
<div class="company-list maincontent openflow">
<div class="container dynamic-page doclistFlow">
<div class="row-fluid">
    <div class="row-fluid">
        <div class="subnav-controls doclist-controls">
            <div>
                <div class="pull-left" ng-hide="!state.hideSharebar" ng-animate="{show:'fadeShow', hide:'fadeHide'}"> <span>VIEW BY</span>
                    <ul class="dropdown-list drop-selector">
                        <li class="dropdown standard"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            {{ viewBy | viewByPrinter }}
                        </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a ng-click="setViewBy('document')" class="button">Document</a>
                                </li>
                                <li>
                                    <a ng-click="setViewBy('name')" class="button">Recipient</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="pull-left checkboxitem" ng-animate="{show:'fadeShow', hide:'fadeHide'}">
                    <span>HIDE COMPLETED</span>
                    <button class="check-box-button" ng-class="{'selected':state.maxRatio===2}" ng-click="toggleMaxRatio()">
                        <span data-icon="&#xe023;" aria-hidden="true"></span>
                    </button>
                </div>
                <div class="pull-left checkboxitem" ng-animate="{show:'fadeShow', hide:'fadeHide'}">
                    <span>SHOW ARCHIVED</span>
                    <button class="check-box-button" ng-class="{'selected':state.show_archived==true}" ng-click="toggleArchived();">
                        <span data-icon="&#xe023;" aria-hidden="true"></span>
                    </button>
                </div>
                <div class="pull-left"> <span>SEARCH</span>
                    <input type="text" class="search-box" ng-model="query">
                </div>
                <div class="box-button pull-right"
                     ng-class="{selected:!state.hideSharebar, 'disabledme': companyIsZombie()}"
                     ng-show="documents.length!==0"
                     ng-click="companyIsZombie() || toggleSide();"
                     data-placement="bottom" bs-tooltip="zombiemessage">
                    <ul>
                        <li> <span data-icon="&#xe604;" aria-hidden="true"></span>

                        </li>
                        <li> <span>Share</span>

                        </li>
                    </ul>
                </div>
                <div class="box-button pull-right"
                     ng-class="{selected: uploadModal, 'disabledme': companyIsZombie()}"
                     ng-click="companyIsZombie() || documentUploadOpen();"
                     data-placement="bottom" bs-tooltip="zombiemessage">
                    <ul>
                        <li> <span data-icon="&#xe053;" aria-hidden="true"></span>
                        </li>
                        <li> <span>Add Files</span>

                        </li>
                    </ul>
                </div>
            </div>
            <div class="DivHelper"></div>
        </div>
    </div>
</div>
<div class="row-fluid leftTabWindow">
<div ng-style="viewportheight" ng-class="{leftFullTableBlock:state.hideSharebar, widthtransition25:oldSafari()}"
     class="span8 recipientInfo statusBlock leftBlock">
<div class="row-fluid listcontainer" my-loading-spinner="!finishedLoading">
<table class="status-table" ng-show="documents.length===0 && viewBy==='document'">
    <tbody class="empty-table">
    <tr>
        <td> <span>Welcome! </span><span class="link" ng-click="documentUploadOpen();">Upload a document</span><span> to get started.</span>

        </td>
    </tr>
    </tbody>
</table>
<table class="status-table" ng-show="!investorDocs && viewBy==='name'">
    <tbody class="empty-table">
    <tr>
        <td>
            <!-- todo update ng-click --> <span>Welcome! </span><span class="link" ng-click="multishareOpen();">Share a document</span><span> to get started.</span>
        </td>
    </tr>
    </tbody>
</table>
<table class="status-table" ng-show="documents.length!==0 && viewBy==='document'">
    <tbody>
    <tr>
        <th colspan="2" style="width: 40%" class="left doc-name-header" ng-click="setOrder('docname')">Document Name</th>
        <th colspan="2" style="width: 20%" ng-hide="!state.hideSharebar" ng-animate="{show:'fadeShow', hide:'fadeHide'}"
            class="left doc-status-header" ng-click="setOrder('statusRatio')">Status</th>
        <th colspan="2">Tags</th>
    </tr>
    </tbody>
    <tbody document-summary-row doc="doc" view-state="state" ng-repeat="doc in documents | filter:searchFilter | orderBy:docOrder" class="animate">
    </tbody>
</table>
<table class="status-table" ng-show="investorDocs && viewBy==='name'">
    <tbody>
    <tr>
        <th colspan="2" class="left doc-name-header" ng-click="setInvestorOrder('name')">Name</th>
        <th colspan="2" class="left doc-status-header" ng-click="setInvestorOrder('statusRatio')">Status</th>
        <th></th>
    </tr>
    </tbody>
    <tbody ng-repeat="investor in investorDocs | filter:searchFilter | orderBy:investorOrder">
    <tr class="empty-row"></tr>
    <tr ng-class="{selectedrow:investor.shown}">
        <td class="status-toggle"
            ng-class="{'pointer':(investor.versions[0] && versionsVisible(investor.versions)), 'status-toggle-on':(investor.shown && versionsVisible(investor.versions))}"
            ng-click="!investor.versions[0] || opendetails(investor)">
            <span ng-hide="!versionsVisible(investor.versions) || (investor.shown || !investor.versions[0])" data-icon="&#xe017;" aria-hidden="true"></span>
            <span ng-show="versionsVisible(investor.versions) && investor.shown && investor.versions[0]" data-icon="&#xe01c;" aria-hidden="true"></span>
        </td>
        <td class="shareholder-column docname-column">
            <ul>
                <li>{{investor.name || investor.investor | caplength:40}}</li>
                <li>{{docStatus(investor)}}</li>
            </ul>
        </td>
        <td class="status-toggle status-icon">
            <div ng-show="docIsComplete(investor)" data-icon="&#xe023;" class="circle green"
                 aria-hidden="true"></div>
            <div ng-hide="docIsComplete(investor)" class="circle" ng-class="{gray:investor.versions.length===0, yellow:investor.versions.length>0}"></div>
        </td>
        <td class="shareholder-column status-column issuer pointer">
            <ul>
                <li>{{formatDocStatusRatio(investor)}}</li>
            </ul>
        </td>
        <td>
            <ul ng-show="investor.name" class="dropdown-list">
                <li class="dropdown standard menu-drop">
                    <a class="dropdown-toggle"> <span data-icon="&#xe011;" aria-hidden="true"></span>

                    </a>
                    <ul ng-hide="toggleView();" class="dropdown-menu">
                        <li ng-click="viewProfile(investor)">View Profile</li>
                    </ul>
                </li>
            </ul>
        </td>
    </tr>
    <tr document-version-row version="version" view-state="state" ng-show="investor.shown" class="sub-row"
        ng-repeat="version in investor.versions | filter: versionFilter | archived: state.show_archived | orderBy:versionOrder">
    </tr>
    </tbody>
</table>
</div>
</div>
<div ng-style="viewportheight" ng-show="!state.hideSharebar" ng-class="{rightNoTableBlock:state.hideSharebar,
                showSharebar:!state.hideSharebar,
                slidingcss25:oldSafari()}" class="span4 capright button-offset">
    <h2 class="right-bar-header">SHARE DOCUMENTS</h2>
    <p>To share documents, check which documents you would like to share then add your contacts and a message below.</p>
    <div class="shareForm">
        <span>Recipients</span>
        <div class="sharepeople-input">
            <input ui-select2="select2Options" ng-model="docShareState.emails">
        </div>
        <span>Message</span>
        <textarea class="email-text" rows="4" cols="60" ng-model="messageText" ng-click="fakePlaceholder()"></textarea>
        <div class="controls" my-loading-spinner="processing">
            <div class="standard-button pull-right">
                <button class="btn"
                        ng-if="!companyIsZombie()"
                        ng-click="shareDocuments(docShareState.doclist,
                                   docShareState.emails, messageText)"
                        ng-disabled="processing || checkmany(docShareState.emails, docShareState.doclist, true)
                                      || !docsReadyToShare(docShareState.doclist)">
                    Share Documents
                </button>
            </div>
             <span class="pull-right pointer" ng-click="toggleSide(); saveShareState(true);">
                 Cancel
             </span>
        </div>
    </div>
</div>
</div>

<div modal="documentUploadModal" close="documentUploadClose()" options="narrowopts">
    <div class="modalHeader">
        <span>Upload Documents</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="documentUploadClose()"></span>
    </div>

    <div class="modalText uploadModal">
        <div ng-if="triggerUpgradeDocs(files.length)"
             class="upgradeWarning">
            <span>
                Warning: Uploading these documents will automatically upgrade your payment plan.
            </span>
        </div>
        <p>Please select any document, presentation or image (20MB max per file)</p>
        <form class="form-inline">
            <fieldset>
                <!--
                <div ng-show="fileError" class="upload-errors">
                    <span>{{fileError}}</span>
                </div>
                -->
                <div class="fileinputs">
                    <input multiple ng-hide="showProgress || showProcessing" type="file" class='file'
                           onchange="angular.element(this).scope().setFiles(this);"/>

                    <div ng-hide="showProgress" class="fakefile">
                        <span>CHOOSE FILES</span>

                    </div>
                    <div ng-show="showProgress" class="progress-bar">
                        <progress percent="loadProgress"></progress>
                    </div>
                </div>
                <div ng-show="showProcessing" class="upload-errors">
                    <span>Processing Document</span>
                </div>
            </fieldset>
        </form>
        <div class="multiple-files" ng-show="files.length">
            <ul>
                <li ng-repeat="file in files">{{file.name | caplength:40}}</li>
            </ul>
        </div>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="documentUploadClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn"
                    ng-click="uploadFile(files)"
                    ng-disabled="files.length === 0">Upload</button>
        </div>
    </div>
</div>

<div modal="updateTitleModal" close="updateTitleClose()" options="opts">
    <div class="modalHeader">
        <span>Rename Document</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="updateTitleClose()"></span>
    </div>
    <div class="modalText updateTitleModal">
        <input ng-model="docForModal.docname" type="text">
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="updateTitleClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="updateTitleClose()" ng-disabled="docForModal.docname.length < 1">Confirm
            </button>
        </div>
    </div>
</div>
<div modal="updateTagsModal" close="updateTagsClose()" options="wideopts">
    <div class="tagsModalHeader modalHeader">
        <span>{{docForModal.docname | caplength:50}} Tags</span>
        <span class="close" data-icon="&#xe00f;" aria-hidden="true" ng-click="updateTagsClose()"></span>
    </div>
    <div class="modalText tagsModal">
        <div>
            <ul>
                <li>Type a tag name and press "enter" or "," to add. Click the X to remove.</li>
            </ul>
        </div>
        <div>
            <bootstrap-tagsinput ng-model="docForModal.new_tags"
                                 typeahead-source="getAvailableTags"
                                 tagClass="getTagClass">
            </bootstrap-tagsinput>
        </div>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="updateTagsClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="updateTags(docForModal);">
                Confirm
            </button>
        </div>
    </div>
</div>
<div modal="retractDocModal" close="retractVersionClose()" options="opts" class="updateTitleModal">
    <div class="modalHeader">
        <span>Retract Document</span>
        <span class="close" data-icon="&#xe00f;" aria-hiddden="true" ng-click="retractVersionClose()"></span>
    </div>
    <div class="modalText deleteDocModal retractModal">
        <span>Are you sure you want to retract {{docForModal.docname}} from {{docForModal.name || docForModal.investor}}?</span>

        <div>
            <ul class="checkboxOption">
                <li class="pull-left">
                    <button class="check-box-button" ng-class="{'selected':modalArchive}" ng-click="modalArchive = !modalArchive">
                        <span data-icon="&#xe023;" aria-hidden="true"></span>
                    </button>
                </li>
                <li class="pull-left">
                    <span>Archive from library</span>
                </li>
            </ul>
        </div>
    </div>


    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="retractVersionClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="retractVersion(docForModal, modalArchive); retractVersionClose();">Confirm</button>
        </div>
    </div>
</div>

<div modal="deleteDocModal" close="deleteDocClose()" options="opts" class="updateTitleModal">
    <div class="modalHeader">
        <span>Delete Document</span>
        <span class="close" data-icon="&#xe00f;" aria-hiddden="true" ng-click="deleteDocClose()"></span>
    </div>
    <div class="modalText deleteDocModal">
        <span>Are you sure you want to delete </span>
        <span>{{docForModal.docname}}?</span>
    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="deleteDocClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="reallyDeleteDoc(docForModal); deleteDocClose();">Confirm</button>
        </div>
    </div>
</div>

<div modal="voidDocModal" close="voidDocClose()" options="opts" class="updateTitleModal">
    <div class="modalHeader">
        <span>Void Document</span>
        <span class="close" data-icon="&#xe00f;" aria-hiddden="true" ng-click="voidDocClose()"></span>
    </div>
    <div class="modalText voidDocModal">
        <span>Voiding a document will nullify the agreement, as if it had never existed. Your confirmation will send a void request to the other party, who must also agree to void the document before the process is complete.</span>

        <div class="message-block">
            <span>Message</span>
            <textarea rows="4" cols="60" ng-model="voidText"></textarea>
        </div>

    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="voidDocClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="voidDocument(voiddocForModal, voidText); voidDocClose();">Confirm</button>
        </div>
    </div>
</div>

<div modal="remindDocModal" close="remindDocClose()" options="opts">
    <div class="modalHeader">
        <span>Send Signature Reminder</span>
        <span class="close" data-icon="&#xe00f;" aria-hiddden="true" ng-click="remindDocClose()"></span>
    </div>
    <div class="modalText voidDocModal">
        <span>Send a reminder to the original recipient.</span>

        <div class="message-block">
            <span>Message</span>
            <textarea rows="4" cols="60" ng-model="remindText"></textarea>
        </div>

    </div>
    <div class="modal-footer">
        <div class="pull-left standard-button gray">
            <button class="btn" ng-click="remindDocClose()">Cancel</button>
        </div>
        <div class="standard-button green">
            <button class="btn" ng-click="remindDocument(reminddocForModal, remindText); remindDocClose();">Confirm</button>
        </div>
    </div>
</div>

</div>
</div>
