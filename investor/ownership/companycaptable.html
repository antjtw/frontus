<div class="container">

  <div class="row-fluid">
    <div class="span9 docLibrary statusBlock" style="overflow:auto;">

      <div class="headsection row-fluid">
        <h1>{{currentCompany}}</h1>

        <div class="row-fluid">
          <ul class="bodyText maintabs">
            <li class="selectedtab">Ownership</li>
            <a href="/investor/ownership/grant"><li class="button">Grants</li></a>
           </ul>
        </div>
      </div>

      <div class="row-fluid">
        <div class="subnav-controls">
        </div>
      </div>

      <div class="row-fluid">
          <table class="tableView bodyText">
            <tr class="column-label">
              <th colspan="2">Ownership</th>
              <th><span class="longrow">Shareholder</span></th>
              <th class="capEditHeaders" ng-repeat="one in issues" ng-click="getActiveIssue(one)">
                {{one.issue}}
              </th>
            </tr>
            <!-- Descriptive row viewable from all modes -->
              <tr class="descriptionRow">
                  <td>Shares</td>
                  <td>%</td>
                  <td></td>
                  <td ng-repeat="one in issues">
                      <span>UNITS</span>
                      <span>PAID</span>
                  </td>
              </tr>
            <tr ng-show="fullview" ng-repeat="row in rows">
              <td><input disabled value="{{shareSum(row);}}"></td>
              <td><input disabled value="{{sharePercentage(row, rows, issuekeys) | number:3}}%"></td>
              <td ng-click="getActiveInvestor(row);">{{row.name}}</td>
              <td ng-repeat="key in issuekeys | orderBy:issueSort">
                  <p class="captablepair" ng-click="getActiveTransaction(row.name, key)">{{row[key]["u"]}}</p>
                  <p class="captablepair" ng-click="getActiveTransaction(row.name, key)">{{row[key]["a"]}}</p>
              </td>
            </tr>
            <tr ng-hide="fullview" ng-repeat="row in rows">
              <td><input disabled value="{{shareSum(row);}}"></td>
              <td><input disabled value="{{myPercentage(everyone.percentage) | number:3}}%"></td>
              <td ng-click="getActiveInvestor(row);">{{row.name}}</td>
              <td ng-repeat="key in issuekeys | orderBy:issueSort">
                  <p class="captablepair" ng-click="getActiveTransaction(row.name, key)">{{row[key]["u"]}}</p>
                  <p class="captablepair" ng-click="getActiveTransaction(row.name, key)">{{row[key]["a"]}}</p>
              </td>
            </tr>
            <tr ng-hide="fullview">
              <td><input disabled></td>
              <td><input disabled value="{{everyone.percentage  | number:3}}%"></td>
              <td>Other Investors</td>
              <td ng-repeat="key in issuekeys">
              </td>
            </tr>
          <tr ng-show="fullview" class='tablefooter'>
            <td><input disabled value="{{totalShares(rows);}}"></td>
            <td><input disabled value="100%"></td>
            <td></td>
            <td ng-repeat="one in issues">
              <input class="captablepair" disabled value="{{colTotal(one.issue, rows, 'u');}}">
              <input class="captablepair" disabled value="{{colTotal(one.issue, rows, 'a');}}">
            </td>
          </tr>
        </table>
      </div>
    </div>


    <div class="span3">
      <div ng-switch on="sideBar" >
        <span ng-switch-when="1">
          <p>Name <input disabled ng-model="activeIssue.issue"></p>
          <p>Date <input disabled type="text" ng-model="activeIssue.date" data-date-format="mm/dd/yyyy" bs-datepicker></p>

          <accordion close-others="true">
            <accordion-group heading="Valuation">
              <p>Pre Money<input disabled pattern="[0-9]*(.[0-9]*)*" ng-model="activeIssue.premoney"></p>
              <p>Post Money<input disabled ng-model="activeIssue.postmoney"></p>
              <p>Price Per Share<input disabled ng-model="activeIssue.ppshare"></p>
              <p>Total Authorized<input disabled ng-model="activeIssue.totalauth"></p>
              <p>Liquidation Preference
                <select ng-init="activeIssue.liquidpref" ng-model="activeIssue.liquidpref" ng-options="i for i in tf">
                </select>
              </p>
              <p>Participating Preferred
                <select ng-init="activeIssue.partpref" ng-model="activeIssue.partpref" ng-options="i for i in tf">
                </select>
              </p>
            </accordion-group>
            <span ng-show="trantype('options', activeIssue.atype);">
              <accordion-group heading="Options">
                <p>Underlying Security
                  <select ng-init="activeIssue.optundersec" ng-model="activeIssue.optundersec" ng-options="i for i in allowKeys">
                  <option></option>
                  </select>
                </p>
                <p>Price<input disabled ng-model="activeIssue.price"></p>
                <p>Granted <input disabled value="{{totalGranted(activeIssue.issue, trans);}}"></p>
                <p>Term (months)<input disabled ng-model="activeIssue.terms"></p>
                <p>Vesting Cliff Date<input disabled type="text" ng-model="activeIssue.vestingbegins" data-date-format="mm/dd/yyyy" bs-datepicker></p>
                <p>Vesting Cliff %<input disabled ng-model="activeIssue.vestcliff"></p>
                <p>Post Cliff Frequency
                  <select ng-init="activeIssue.vestfreq" ng-model="activeIssue.vestfreq" ng-options="i for i in freqtypes">
                  </select>
                </p>
              </accordion-group>
            </span>
            <span ng-show="trantype('debt', activeIssue.atype);">
              <accordion-group heading="Debt">
                <p>Underlying Security
                  <select ng-init="activeIssue.debtundersec" ng-model="activeIssue.debtundersec" ng-options="i for i in allowKeys">
                  <option></option>
                  </select>
                </p>
                <p>Interest Rate<input disabled ng-model="activeIssue.interestrate"></p>
                <p>Valuation Cap<input disabled ng-model="activeIssue.valcap"></p>
                <p>Discount<input disabled ng-model="activeIssue.discount"></p>
                <p>Term<input disabled ng-model="activeIssue.term"></p>
              </accordion-group>
            </span>
          </accordion>
        </span>


        <span ng-switch-when="2">
          <p>Investor Name <input disabled ng-model="activeInvestor"></p>
          <tabset class="trantabs">
            <tab ng-repeat="tran in activeTran" heading="{{tran.date | date:'mediumDate'}}" active="tran.active">
              <p>Date <input disabled type="text" ng-model="tran.date" data-date-format="mm/dd/yyyy" bs-datepicker></p>
              <p>Paid<input disabled ng-model="tran.amount"></p>
              <p>Shares<input disabled ng-model="tran.units"></p>

              <accordion close-others="true">
                <accordion-group heading="Valuation">
                  <p>Pre Money<input disabled pattern="[0-9]*(.[0-9]*)*" disabled ng-model="tran.premoney"></p>
                  <p>Post Money<input disabled disabled ng-model="tran.postmoney"></p>
                  <p>Price Per Share<input disabled ng-model="tran.ppshare"></p>
                  <p>Total Authorized<input disabled disabled ng-model="tran.totalauth"></p>
                  <p>Liquidation Preference
                    <select ng-init="tranIssue.liquidpref" disabled ng-model="tran.liquidpref" ng-options="i for i in tf">
                    </select>
                  </p>
                  <p>Participating Preferred
                    <select ng-init="tran.partpref" disabled ng-model="tran.partpref" ng-options="i for i in tf">
                    </select>
                  </p>
                </accordion-group>
                <span ng-show="trantype('options', tran.atype);">
                  <accordion-group heading="Options">
                    <p>Underlying Security
                      <select ng-init="tran.optundersec" ng-model="tran.optundersec" ng-options="i for i in allowKeys">
                      <option></option>
                      </select>
                    </p>
                    <p>Price<input disabled ng-model="tran.price"></p>
                    <p>Granted <input disabled value="{{totalGranted(tran.issue, trans);}}"></p>
                    <p>Term (months)<input disabled ng-model="tran.terms"></p>
                    <p>Vesting Cliff Date<input disabled type="text" ng-model="tran.vestingbegins" data-date-format="mm/dd/yyyy" bs-datepicker></p>
                    <p>Vesting Cliff %<input disabled ng-model="tran.vestcliff"></p>
                    <p>Post Cliff Frequency
                      <select ng-init="tran.vestfreq" ng-model="tran.vestfreq" ng-options="i for i in freqtypes">
                      </select>
                    </p>
                  </accordion-group>
                </span>
                <span ng-show="trantype('debt', tran.atype);">
                    <accordion-group heading="Debt">
                      <p>Underlying Security
                        <select ng-init="tran.debtundersec" ng-model="tran.debtundersec" ng-options="i for i in allowKeys">
                        <option></option>
                        </select>
                      </p>
                      <p>Interest Rate<input disabled ng-model="tran.interestrate"></p>
                      <p>Valuation Cap<input disabled ng-model="tran.valcap"></p>
                      <p>Discount<input disabled ng-model="tran.discount"></p>
                      <p>Term<input disabled ng-model="tran.term"></p>
                    </accordion-group>
                  </span>
              </accordion>
            </tab>
          </tabset>
        </span>

        <span ng-switch-when="3">
          <p>Investor Email <input disabled ng-model="activeInvestorName"></p>
        </span>
        <span ng-switch-default>
          <p>Welcome To Your Captable</p>
        </span>
      </div>
    </div>
  </div>
</div>