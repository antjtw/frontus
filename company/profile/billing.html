<div class="container dynamic-page doclistFlow">
    <div class="row-fluid">
        <div class="headsection row-fluid">
            <ul class="maintabs head-text">
                <li><a href="/company/profile/">Company Profile</a>
                </li>
                <li class="selectedtab">Billing</li>
            </ul>
        </div>
        <div style="margin-left:0;" class="span12 statusBlock">
            <div class="row-fluid">
                <div class="subnav-controls">
                    <div>
                        <div class="pull-left">Payment Summary</div>
                         <div class="pull-right standard-button" ng-hide="billing.customer_id">
                             <button class="btn"
                                     ng-disabled="!billing.payment_token || !billing.currentPlan"
                                     ng-click="create_customer(billing.payment_token, billing.currentPlan);">
                                 Create Customer
                             </button>
                         </div>
                    </div>
                    <div class="DivHelper"></div>
                </div>
            </div>
        </div>
        <div class="row-fluid home-top-row span12">
            <div class="span8">
                <div class="row-fluid">
                    <div class="front info-box">
                        <div class="head-box">
                             <h2>Billing Information</h2>

                        </div>
                        <div class="body-box">
                            <div class="row-fluid">
                                <div class="span6">
                                    <div>
                                         <h2>Plan Level</h2>
                                    </div> <span>
                                        Sharewave provides 3 levels of service.
                                        <a href="/pricing">Learn more.</a>
                                    </span>
                                    <ul class="dropdown-list drop-selector wide">
                                        <li class="dropdown standard">
                                            <a class="dropdown-toggle">
                                                {{billing.currentPlan | billingPlans}}<span class="invisible-drop">'</span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li ng-repeat="p in billing.plans">
                                                    <a ng-click="updateSubscription(p.plan);">{{p.plan | billingPlans}}</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span12">
                                    <div>
                                         <h2>Credit Card Information</h2>
                                    </div>
                                    <div ng-switch on="showStripeForm()">
                                        <div ng-switch-when="false">
                                            <div class="input-list">
                                                <div class="row-fluid span12">
                                                    <span>Full Name</span>
                                                    <input type="text" class="input-block-level" disabled placeholder="XXXXXXXXXXXXXX">
                                                </div>
                                                <div class="row-fluid">
                                                    <div class="span5">
                                                        <span>Credit Card Number</span>
                                                        <input type="text" class="input-block-level" disabled placeholder="Last 4: {{billing.current_card.last4}}">
                                                    </div>
                                                    <div class="span2">
                                                        <span>CVC</span>
                                                        <input type="text" class="input-block-level" disabled placeholder="XXX">
                                                    </div>
                                                    <div class="span5">
                                                        <span>Expiration Date</span>
                                                        <input type="text" class="input-block-level" disabled placeholder="{{billing.current_card.exp_month}} / {{billing.current_card.exp_year}}">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="standard-button pull-right">
                                                <button class="btn" ng-click="toggleUpdateCard();">Enter New Card</button>
                                            </div>
                                        </div>

                                        <form ng-switch-when="true" stripe-form="handleStripe" name="myForm">
                                            <fieldset>
                                                <div class="input-list">
                                                    <div class="row-fluid span12">
                                                        <span>Full Name</span>
                                                        <input type="text"
                                                               class="input-block-level">
                                                    </div>
                                                    <div class="row-fluid">
                                                        <div class="span5">
                                                            <span>Credit Card Number</span>
                                                            <input type="text"
                                                                   class="input-block-level"
                                                                   ng-model="number"
                                                                   payments-validate="card"
                                                                   payments-format="card"
                                                                   payments-type-model="type"
                                                                   ng-class="myForm.number.$card.type"/>
                                                        </div>
                                                        <div class="span2">
                                                            <span>CVC</span>
                                                            <input type="text"
                                                                   class="input-block-level"
                                                                   ng-model="cvc"
                                                                   payments-validate="cvc"
                                                                   payments-format="cvc"
                                                                   payments-type-model="type"/>
                                                        </div>
                                                        <div class="span5">
                                                            <span>Expiration Date</span>
                                                            <input type="text"
                                                                   class="input-block-level"
                                                                   ng-model="expiry"
                                                                   payments-validate="expiry"
                                                                   payments-format="expiry"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="standard-button pull-right gray" ng-show="billing.current_card">
                                                    <button class="btn" ng-click="toggleUpdateCard();">Cancel</button>
                                                <div class="standard-button pull-right">
                                                    <button type="submit" class="btn">Update</button>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="span4">
                <div class="row-fluid">
                    <div class="front info-box">
                        <div class="head-box">
                            <h2>Invoices</h2>
                        </div>
                        <div class="body-box">
                            <div class="row-fluid">
                                <div class="span12 row-fluid" ng-repeat="inv in billing.invoices">
                                    <div class="span7">
                                        <span>{{inv.lines.data[0].period.start*1000 | date: 'MMMM d, yyyy'}}</span>
                                    </div>
                                    <div class="span3">
                                        <span>{{inv.amount_due/100 | currency}}</span>
                                    </div>
                                    <div class="span2">
                                        <a href="">Invoice</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
